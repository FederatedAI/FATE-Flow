{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"configuration_instruction/","title":"Configuration Instructions","text":""},{"location":"configuration_instruction/#1-description","title":"1. Description","text":"<p>Contains the general configuration of the <code>FATE project</code> and the configuration of each subsystem</p>"},{"location":"configuration_instruction/#2-global-configuration","title":"2. Global configuration","text":"<ul> <li>Path: <code>${FATE_PROJECT_BASE}/conf/server_conf.yaml</code></li> <li>Description: Commonly used configuration, generally needed to determine when deploying</li> <li>Note: Configuration items that are not listed below in the configuration file are internal system parameters and are not recommended to be modified</li> </ul> <pre><code># If FATEFlow uses the registry, FATEFlow will register the FATEFlow Server address and the published model download address to the registry for the online system FATEServing; it will also get the FATEServing address from the registry.\nuse_registry: false\n# Whether to enable higher security serialization mode\nuse_deserialize_safe_module: false\ndependent_distribution: false\n# party id\uff1a required for site authentication\nparty_id:\n# Hook module configuration\nhook_module:\n# Client authentication hooks\nclient_authentication: fate_flow.hook.flow.client_authentication\n# site-side authentication hooks\nsite_authentication: fate_flow.hook.flow.site_authentication\n# Permission authentication hooks\npermission: fate_flow.hook.flow.permission\n# In addition to using flow's hooks for authentication and authentication, we also support authentication and authentication interfaces registered with third-party services\n# The name of the service registered by the third-party authentication and authentication service\nhook_server_name:\n# Authentication\nauthentication:\n# Client authentication configuration\nclient:\n# Client authentication switch\nswitch: false\nhttp_app_key:\nhttp_secret_key:\n# Site authentication configuration\nsite:\n# Authentication switch\nswitch: false\n# Authentication\npermission:\n# Authentication switch\nswitch: false\n# Component authentication switch\ncomponent: false\n# Data set authentication switch\ndataset: false\nfateflow:\n# you must set real ip address, 127.0.0.1 and 0.0.0.0 is not supported\nhost: 127.0.0.1\nhttp_port: 9380\ngrpc_port: 9360\n# The nginx address needs to be configured for high availability\nnginx:\nhost:\nhttp_port:\ngrpc_port:\n# use random instance_id instead of {host}:{http_port}\nrandom_instance_id: false\n# support rollsite/nginx/fateflow as a coordination proxy\n# rollsite support fate on eggroll, use grpc protocol\n# nginx support fate on eggroll and fate on spark, use http or grpc protocol, default is http\n# fateflow support fate on eggroll and fate on spark, use http protocol, but not support exchange network mode\n\n# format(proxy: rollsite) means rollsite use the rollsite configuration of fate_one_eggroll and nginx use the nginx configuration of fate_one_spark\n# you also can customize the config like this(set fateflow of the opposite party as proxy):\n# proxy:\n#   name: fateflow\n#   host: xx\n#   http_port: xx\n#   grpc_port: xx\nproxy: rollsite\n# support default/http/grpc\nprotocol: default\ndatabase:\nname: fate_flow\nuser: fate\npasswd: fate\nhost: 127.0.0.1\nport: 3306\nmax_connections: 100\nstale_timeout: 30\n# The registry address and its authentication parameters\nzookeeper:\nhosts:\n- 127.0.0.1:2181\nuse_acl: false\nuser: fate\npassword: fate\n# engine services\ndefault_engines:\ncomputing: standalone\nfederation: standalone\nstorage: standalone\nfate_on_standalone:\nstandalone:\ncores_per_node: 20\nnodes: 1\nfate_on_eggroll:\nclustermanager:\n# CPU cores of the machine where eggroll nodemanager service is running\ncores_per_node: 16\n# the number of eggroll nodemanager machine\nnodes: 1\nrollsite:\nhost: 127.0.0.1\nport: 9370\nfate_on_spark:\nspark:\n# default use SPARK_HOME environment variable\nhome:\ncores_per_node: 20\nnodes: 2\nlinkis_spark:\ncores_per_node: 20\nnodes: 2\nhost: 127.0.0.1\nport: 9001\ntoken_code: MLSS\npython_path: /data/projects/fate/python\nhive:\nhost: 127.0.0.1\nport: 10000\nauth_mechanism:\nusername:\npassword:\nlinkis_hive:\nhost: 127.0.0.1\nport: 9001\nhdfs:\nname_node: hdfs://fate-cluster\n# default /\npath_prefix:\nrabbitmq:\nhost: 192.168.0.4\nmng_port: 12345\nport: 5672\nuser: fate\npassword: fate\n# default conf/rabbitmq_route_table.yaml\nroute_table:\npulsar:\nhost: 192.168.0.5\nport: 6650\nmng_port: 8080\ncluster: standalone\n# all parties should use a same tenant\ntenant: fl-tenant\n# message ttl in minutes\ntopic_ttl: 5\n# default conf/pulsar_route_table.yaml\nroute_table:\nnginx:\nhost: 127.0.0.1\nhttp_port: 9300\ngrpc_port: 9310\n# external services\nfateboard:\nhost: 127.0.0.1\nport: 8080\n\n# on API `/model/load` and `/model/load/do`\n# automatic upload models to the model store if it exists locally but does not exist in the model storage\n# or download models from the model store if it does not exist locally but exists in the model storage\n# this config will not affect API `/model/store` or `/model/restore`\nenable_model_store: false\n# default address for export model\nmodel_store_address:\n# use mysql as the model store engine\n#  storage: mysql\n#  database: fate_model\n#  user: fate\n#  password: fate\n#  host: 127.0.0.1\n#  port: 3306\n# other optional configs send to the engine\n#  max_connections: 10\n#  stale_timeout: 10\n# use redis as the model store engine\n#  storage: redis\n#  host: 127.0.0.1\n#  port: 6379\n#  db: 0\n#  password:\n# the expiry time of keys, in seconds. defaults None (no expiry time)\n#  ex:\n# use tencent cos as model store engine\nstorage: tencent_cos\nRegion:\nSecretId:\nSecretKey:\nBucket:\n\n# The address of the FATE Serving Server needs to be configured if the registry is not used\nservings:\nhosts:\n- 127.0.0.1:8000\nfatemanager:\nhost: 127.0.0.1\nport: 8001\nfederatedId: 0\n</code></pre>"},{"location":"configuration_instruction/#3-fate-flow-configuration","title":"3. FATE Flow Configuration","text":""},{"location":"configuration_instruction/#31-fate-flow-server-configuration","title":"3.1 FATE Flow Server Configuration","text":"<ul> <li>Path: <code>${FATE_FLOW_BASE}/python/fate_flow/settings.py</code></li> <li>Description: Advanced configuration, generally no changes are needed</li> <li>Note: Configuration items that are not listed below in the configuration file are internal system parameters and are not recommended to be modified</li> </ul> <pre><code># Thread pool size of grpc server used by FATE Flow Server for multiparty FATE Flow Server communication, not set default equal to the number of CPU cores of the machine\nGRPC_SERVER_MAX_WORKERS = None\n\n# Switch\n# The upload data interface gets data from the client by default, this value can be configured at the time of the interface call using use_local_data\nUPLOAD_DATA_FROM_CLIENT = True\n# Whether to enable multi-party communication authentication, need to be used with FATE Cloud\nCHECK_NODES_IDENTITY = False\n# Whether to enable the resource authentication function, need to use with FATE Cloud\nUSE_AUTHENTICATION = False\n# Resource privileges granted by default\nPRIVILEGE_COMMAND_WHITELIST = []\n</code></pre>"},{"location":"configuration_instruction/#32-fate-flow-default-job-configuration","title":"3.2 FATE Flow Default Job Configuration","text":"<ul> <li>Path: <code>${FATE_FLOW_BASE}/conf/job_default_config.yaml</code></li> <li>Description: Advanced configuration, generally no changes are needed</li> <li>Note: Configuration items that are not listed below in the configuration file are internal system parameters and are not recommended to be modified</li> <li>Take effect: use flow server reload or restart fate flow server</li> </ul> <pre><code># component provider, relative path to get_fate_python_directory\ndefault_component_provider_path: federatedml\n\n# resource\n# total_cores_overweight_percent\ntotal_cores_overweight_percent: 1 # 1 means no overweight\ntotal_memory_overweight_percent: 1 # 1 means no overweight\n# Default task parallelism per job, you can configure a custom value using job_parameters:task_parallelism when submitting the job configuration\ntask_parallelism: 1\n# The default number of CPU cores per task per job, which can be configured using job_parameters:task_cores when submitting the job configuration\ntask_cores: 4\n# This configuration does not take effect as memory resources are not supported for scheduling at the moment\ntask_memory: 0 # mb\n# The ratio of the maximum number of CPU cores allowed for a job to the total number of resources, e.g., if the total resources are 10 and the value is 0.5, then a job is allowed to request up to 5 CPUs, i.e., task_cores * task_parallelism &lt;= 10 * 0.5\nmax_cores_percent_per_job: 1 # 1 means total\n\n# scheduling\n# Default job execution timeout, you can configure a custom value using job_parameters:timeout when submitting the job configuration\njob_timeout: 259200 # s\n# Timeout for communication when sending cross-participant scheduling commands or status\nremote_request_timeout: 30000 # ms\n# Number of retries to send cross-participant scheduling commands or status\nfederated_command_trys: 3\nend_status_job_scheduling_time_limit: 300000 # ms\nend_status_job_scheduling_updates: 1\n# Default number of auto retries, you can configure a custom value using job_parameters:auto_retries when submitting the job configuration\nauto_retries: 0\n# Default retry interval\nauto_retry_delay: 1 #seconds\n# Default multiparty status collection method, supports PULL and PUSH; you can also specify the current job collection mode in the job configuration\nfederated_status_collect_type: PUSH\n\n# upload\nupload_max_bytes: 104857600 # bytes\n\n#component output\noutput_data_summary_count_limit: 100\n</code></pre>"},{"location":"configuration_instruction/#4-fate-board-configuration","title":"4. FATE Board Configuration","text":"<ul> <li>Path: <code>${FATE_BOARD_BASE}/conf/application.properties</code></li> <li>Description: Commonly used configuration, generally needed to determine when deploying</li> <li>Note: Configuration items that are not listed below in the configuration file are internal system parameters and are not recommended to be modified</li> </ul> <pre><code># Service listening port\nserver.port=8080\n# fateflow address, referring to the http port address of fateflow\nfateflow.url==http://127.0.0.1:9380\n# db address, same as the above global configuration service_conf.yaml inside the database configuration\nfateboard.datasource.jdbc-url=jdbc:mysql://localhost:3306/fate_flow?characterEncoding=utf8&amp;characterSetResults=utf8&amp;autoReconnect= true&amp;failOverReadOnly=false&amp;serverTimezone=GMT%2B8\n# db configuration, same as the above global configuration service_conf.yaml inside the database configuration\nfateboard.datasource.username=\n# db configuration, same as the above global configuration service_conf.yaml inside the database configuration\nfateboard.datasource.password=\nserver.tomcat.max-threads=1000\nserver.tomcat.max-connections=20000\nspring.servlet.multipart.max-file-size=10MB\nspring.servlet.multipart.max-request-size=100MB\n# Administrator account configuration\nserver.board.login.username=admin\nserver.board.login.password=admin\nserver.ssl.key-store=classpath:\nserver.ssl.key-store-password=\nserver.ssl.key-password=\nserver.ssl.key-alias=\n# When fateflo server enables api access authentication, you need to configure\nHTTP_APP_KEY=\nHTTP_SECRET_KEY=\n</code></pre>"},{"location":"configuration_instruction/#5-eggroll","title":"5. EggRoll","text":""},{"location":"configuration_instruction/#51-system-configuration","title":"5.1 System configuration","text":"<ul> <li>Path: <code>${EGGROLL_HOME}/conf/eggroll.properties</code></li> <li>Description: Commonly used configuration, generally needed to determine when deploying</li> <li>Note: Configuration items that are not listed below in the configuration file are internal system parameters and are not recommended to be modified</li> </ul> <pre><code>[eggroll]\n# core\n# MySQL connection configuration, generally required for production applications\neggroll.resourcemanager.clustermanager.jdbc.driver.class.name=com.mysql.cj.jdbc.\n# MySQL connection configuration, generally required for production applications\neggroll.resourcemanager.clustermanager.jdbc.url=jdbc:mysql://localhost:3306/eggroll_meta?useSSL=false&amp;serverTimezone=UTC&amp; characterEncoding=utf8&amp;allowPublicKeyRetrieval=true\n# Connect to MySQL account, this configuration is required for general production applications\neggroll.resourcemanager.clustermanager.jdbc.username=\n# Connect to MySQL password, generally required for production applications\neggroll.resourcemanager.clustermanager.jdbc.password=\n\n# Data storage directory\neggroll.data.dir=data/\n# Log storage directory\neggroll.logs.dir=logs/\neggroll.resourcemanager.clustermanager.host=127.0.0.1\neggroll.resourcemanager.clustermanager.port=4670\neggroll.resourcemanager.nodemanager.port=4670\n\n# python path\neggroll.resourcemanager.bootstrap.eggg_pair.venv=\n# pythonpath, usually you need to specify the python directory of eggroll and the python directory of fate\neggroll.resourcemanager.bootstrap.eggg_pair.pythonpath=python\n\n# java path\neggroll.resourcemanager.bootstrap.eggg_frame.javahome=\n# java service startup parameters, no special needs, no need to configure\neggroll.resourcemanager.bootstrap.eggg_frame.jvm.options=\n# grpc connection hold time for multi-party communication\neggroll.core.grpc.channel.keepalive.timeout.sec=20\n\n# session\n# Number of computing processes started per nodemanager in an eggroll session; replaced by the default parameters of the fate flow if using fate for committing tasks\neggroll.session.processors.per.node=4\n\n# rollsite\neggroll.rollsite.coordinator=webank\neggroll.rollsite.host=127.0.0.1\neggroll.rollsite.port=9370\neggroll.rollsite.party.id=10001\neggroll.rollsite.route.table.path=conf/route_table.json\n\neggroll.rollsite.push.max.retry=3\neggroll.rollsite.push.long.retry=2\neggroll.rollsite.push.batches.per.stream=10\neggroll.rollsite.adapter.sendbuf.size=100000\n</code></pre>"},{"location":"configuration_instruction/#52-routing-table-configuration","title":"5.2 Routing table configuration","text":"<ul> <li>Path: <code>${EGGROLL_HOME}/conf/route_table.json</code></li> <li>Description: Commonly used configuration, generally needed to determine when deploying</li> <li>The routing table is mainly divided into two levels</li> <li>The first level indicates the site, if the corresponding target site configuration is not found, then use default</li> <li>The second level represents the service, if you can not find the corresponding target service, then use default</li> <li>The second level, usually set default as the address of our rollsite service, and fateflow as the grpc address of our fate flow server service</li> </ul> <pre><code>{\n\"route_table\":\n{\n\"10001\":\n{\n\"default\":[\n{\n\"port\": 9370,\n\"ip\": \"127.0.0.1\"\n}\n],\n\"fateflow\":[\n{\n\"port\": 9360,\n\"ip\": \"127.0.0.1\"\n}\n]\n},\n\"10002\":\n{\n\"default\":[\n{\n\"port\": 9470,\n\"ip\": \"127.0.0.1\"\n}\n]\n}\n},\n\"permission\":\n{\n\"default_allow\": true\n}\n}\n</code></pre>"},{"location":"document_navigation/","title":"Document Navigation","text":""},{"location":"document_navigation/#1-general-document-variables","title":"1. General Document Variables","text":"<p>You will see the following <code>document variables</code> in all <code>FATE Flow</code> documentation, with the following meanings.</p> <ul> <li>FATE_PROJECT_BASE: denotes the <code>FATE project</code> deployment directory, containing configuration, fate algorithm packages, fate clients and subsystems: <code>bin</code>, <code>conf</code>, <code>examples</code>, <code>fate</code>, <code>fateflow</code>, <code>fateboard</code>, <code>eggroll</code>, etc.</li> <li>FATE_BASE: The deployment directory of <code>FATE</code>, named <code>fate</code>, contains algorithm packages, clients: <code>federatedml</code>, <code>fate arch</code>, <code>fate client</code>, usually the path is <code>${FATE_PROJECT_BASE}/fate</code></li> <li>FATE_FLOW_BASE: The deployment directory of <code>FATE Flow</code>, named <code>fateflow</code>, containing <code>fate flow server</code>, etc., usually the path is <code>${FATE_PROJECT_BASE}/fateflow</code></li> <li>FATE_BOARD_BASE: the deployment directory of <code>FATE Board</code>, name <code>fateboard</code>, contains <code>fateboard</code>, usually the path is <code>${FATE_PROJECT_BASE}/fateboard</code></li> <li> <p>EGGROLL_HOME: the deployment directory for <code>EggRoll</code>, named <code>eggroll</code>, containing <code>rollsite</code>, <code>clustermanager</code>, <code>nodemanager</code>, etc., usually in <code>${FATE_PROJECT_BASE}/eggroll</code></p> <p>Deploy the <code>FATE project</code> with reference to the main repository FederatedAI/FATE, the main directory structure is as follows</p> <p></p> </li> <li> <p>FATE_VERSION: The version number of <code>FATE</code>, e.g. 1.7.0</p> </li> <li>FATE_FLOW_VERSION: the version number of <code>FATE Flow</code>, e.g. 1.7.0</li> <li>version: Generally in the deployment documentation, it means the version number of <code>FATE project</code>, such as <code>1.7.0</code>, <code>1.6.0</code>.</li> <li>version_tag: generally in the deployment documentation, indicates the <code>FATE project</code> version tag, such as <code>release</code>, <code>rc1</code>, <code>rc10</code></li> </ul>"},{"location":"document_navigation/#2-glossary-of-terms","title":"2. Glossary of terms","text":"<p><code>component_name</code>: the name of the component when the task is submitted, a task can have more than one of the same component, but the <code>component_name</code> is not the same, equivalent to an instance of the class</p> <p><code>componet_module_name</code>: the class name of the component</p> <p><code>model_alias</code>: similar to <code>component_name</code>, which is the name of the output model that the user can configure inside dsl</p> <p>Example.</p> <p>In the figure <code>dataio_0</code> is <code>component_name</code>, <code>DataIO</code> is <code>componet_module_name</code>, <code>dataio</code> is <code>model_alias</code></p> <p>! </p>"},{"location":"document_navigation/#3-reading-guide","title":"3. Reading guide","text":"<ol> <li>you can first read overall design</li> <li>Refer to the main repository FATE for deployment, either standalone (installer, Docker, source compiler) or cluster (Ansible, Docker, Kuberneters)</li> <li>You can refer to the directory in order of navigation</li> </ol>"},{"location":"faq/","title":"FAQ","text":""},{"location":"faq/#1-description","title":"1. Description","text":""},{"location":"faq/#2-log-descriptions","title":"2. Log descriptions","text":"<p>In general, to troubleshoot a problem, the following logs are required.</p>"},{"location":"faq/#v17","title":"v1.7+","text":"<ul> <li> <p><code>${FATE_PROJECT_BASE}/fateflow/logs/$job_id/fate_flow_schedule.log</code>, this is the internal scheduling log of a certain task</p> </li> <li> <p><code>${FATE_PROJECT_BASE}/fateflow/logs/$job_id/*</code> These are all the execution logs of a certain task</p> </li> <li> <p><code>${FATE_PROJECT_BASE}/fateflow/logs/fate_flow/fate_flow_stat.log</code>, this is some logs that are not related to tasks</p> </li> <li> <p><code>${FATE_PROJECT_BASE}/fateflow/logs/fate_flow/fate_flow_schedule.log</code>, this is the overall scheduling log of all tasks</p> </li> <li> <p><code>${FATE_PROJECT_BASE}/fateflow/logs/fate_flow/fate_flow_detect.log</code>, which is the overall exception detection log for all tasks</p> </li> </ul>"},{"location":"faq/#v17-","title":"v1.7-","text":"<ul> <li> <p><code>${FATE_PROJECT_BASE}/logs/$job_id/fate_flow_schedule.log</code>, this is the internal scheduling log for a particular task</p> </li> <li> <p><code>${FATE_PROJECT_BASE}/logs/$job_id/*</code> These are all the execution logs of a certain task</p> </li> <li> <p><code>${FATE_PROJECT_BASE}/logs/fate_flow/fate_flow_stat.log</code>, this is some logs that are not related to the task</p> </li> <li> <p><code>${FATE_PROJECT_BASE}/logs/fate_flow/fate_flow_schedule.log</code>, this is the overall scheduling log of all tasks</p> </li> <li> <p><code>${FATE_PROJECT_BASE}/logs/fate_flow/fate_flow_detect.log</code>, this is the overall exception detection log of all tasks</p> </li> </ul>"},{"location":"faq/#3-offline","title":"3. Offline","text":""},{"location":"faq/#upload-failed","title":"upload failed","text":"<ul> <li>checking eggroll related services for exceptions.</li> </ul>"},{"location":"faq/#submit-job-is-stuck","title":"submit job is stuck","text":"<ul> <li>check if both rollsite services have been killed</li> </ul>"},{"location":"faq/#submit_job-returns-grpc-exception","title":"submit_job returns grpc exception","text":"<ul> <li>submit job link: guest fate_flow -&gt; guest rollsite -&gt; host rollsite -&gt; host fate_flow</li> <li>check that each service in the above link is not hung, it must be ensured that each node is functioning properly.</li> <li>checking that the routing table is correctly configured.</li> </ul>"},{"location":"faq/#dataio-component-exception-not-enough-values-to-unpack-expected-2-got-1","title":"dataio component exception: not enough values to unpack (expected 2, got 1)","text":"<ul> <li>the data separator does not match the separator in the configuration</li> </ul>"},{"location":"faq/#exception-thrown-at-task-runtime-count-of-data_instance-is-0","title":"Exception thrown at task runtime: \"Count of data_instance is 0\"","text":"<ul> <li>task has an intersection component and the intersection match rate is 0, need to check if the output data ids of guest and host can be matched.</li> </ul>"},{"location":"faq/#4-serving","title":"4. Serving","text":""},{"location":"faq/#load-model-retcode-returns-100-what-are-the-possible-reasons","title":"load model retcode returns 100, what are the possible reasons?","text":"<ul> <li> <p>no fate-servings deployed</p> </li> <li> <p>flow did not fetch the fate-servings address</p> </li> <li> <p>flow reads the address of the fate-servings in priority order:</p> </li> <li> <p>read from zk</p> </li> <li> <p>if zk is not open, it will read from the fate-servings configuration file, the configuration path is</p> <ul> <li> <p>1.5+: <code>${FATE_PROJECT_BASE}/conf/service_conf.yaml</code></p> </li> <li> <p>1.5-: <code>${FATE_PROJECT_BASE}/arch/conf/server_conf.json</code></p> </li> </ul> </li> </ul>"},{"location":"faq/#load-model-retcode-returns-123-what-are-the-possible-reasons","title":"load model retcode returns 123, what are the possible reasons?","text":"<ul> <li>Incorrect model information.</li> <li>This error code is thrown by fate-servings not finding the model.</li> </ul>"},{"location":"faq/#bind-model-operation-prompted-no-service-id","title":"bind model operation prompted \"no service id\"?","text":"<ul> <li>Customize the service_id in the bind configuration</li> </ul>"},{"location":"faq/#where-is-the-configuration-of-servings-how-do-i-configure-it","title":"Where is the configuration of servings? How do I configure it?","text":"<ul> <li>v1.5+ Configuration path: <code>${FATE_PROJECT_BASE}/conf/service_conf.yaml</code></li> </ul> <pre><code>servings:\nhosts:\n- 127.0.0.1:8000\n</code></pre> <ul> <li>v1.5- Configuration path: <code>${FATE_PROJECT_BASE}/arch/conf/server_conf.json</code></li> </ul> <pre><code>{\n\"servers\": {\n\"servings\": [\"127.0.0.1:8000\"]\n}\n}\n</code></pre>"},{"location":"fate_flow/","title":"Overall Design","text":""},{"location":"fate_flow/#1-logical-architecture","title":"1. Logical Architecture","text":"<ul> <li>DSL defined jobs</li> <li>Top-down vertical subtask flow scheduling, multi-participant joint subtask coordination</li> <li>Independent isolated task execution work processes</li> <li>Support for multiple types and versions of components</li> <li>Computational abstraction API</li> <li>Storage abstraction API</li> <li>Cross-party transfer abstraction API</li> </ul>"},{"location":"fate_flow/#2-service-architecture","title":"2. Service Architecture","text":""},{"location":"fate_flow/#21-fate","title":"2.1 FATE","text":""},{"location":"fate_flow/#22-fate-flow","title":"2.2 FATE Flow","text":""},{"location":"fate_flow/#3-scheduling-architecture","title":"3. Scheduling Architecture","text":""},{"location":"fate_flow/#31-a-new-scheduling-architecture-based-on-shared-state","title":"3.1 A new scheduling architecture based on shared-state","text":"<ul> <li>Stripping state (resources, jobs) and managers (schedulers, resource managers)</li> <li>Resource state and job state are persisted in MySQL and shared globally to provide reliable transactional operations</li> <li>Improve the high availability and scalability of managed services</li> <li>Jobs can be intervened to support restart, rerun, parallel control, resource isolation, etc.</li> </ul>"},{"location":"fate_flow/#32-state-driven-scheduling","title":"3.2 State-Driven Scheduling","text":"<ul> <li>Resource coordination</li> <li>Pull up the child process Executor to run the component</li> <li>Executor reports state to local Server and also to scheduler</li> <li>Multi-party task state calculation of federal task state</li> <li>Upstream and downstream task states compute job states</li> </ul>"},{"location":"fate_flow/#4-multiparty-resource-coordination","title":"4. Multiparty Resource Coordination","text":"<ul> <li>The total resource size of each engine is configured through the configuration file, and the system is subsequently interfaced</li> <li>The cores_per_node in the total resource size indicates the number of cpu cores per compute node, and nodes indicates the number of compute nodes.</li> <li>FATEFlow server reads the resource size configuration from the configuration file when it starts and registers the update to the database</li> <li>The resources are requested in Job dimension, and take effect when Job Conf is submitted, formula: task_parallelism*task_cores</li> <li>See separate section of the documentation for details</li> </ul>"},{"location":"fate_flow/#5-data-flow-tracking","title":"5. Data Flow Tracking","text":"<ul> <li>Definition</li> <li>metric type: metric type, such as auc, loss, ks, etc.</li> <li>metric namespace: custom metric namespace, e.g. train, predict</li> <li>metric name: custom metric name, e.g. auc0, hetero_lr_auc0</li> <li>metric data: metric data in key-value form</li> <li>metric meta: metric meta information in key-value form, support flexible drawing</li> <li>API</li> <li>log_metric_data(metric_namespace, metric_name, metrics)</li> <li>set_metric_meta(metric_namespace, metric_name, metric_meta)</li> <li>get_metric_data(metric_namespace, metric_name)</li> <li>get_metric_meta(metric_namespace, metric_name)</li> </ul>"},{"location":"fate_flow/#6-realtime-monitoring","title":"6. Realtime Monitoring","text":"<ul> <li>Job process survivability detection</li> <li>Job timeout detection</li> <li>Resource recovery detection</li> <li>Base engine session timeout detection</li> </ul>"},{"location":"fate_flow/#7-task-component-registry","title":"7. Task Component Registry","text":""},{"location":"fate_flow/#8-multi-party-federated-model-registry","title":"8. Multi-Party Federated Model Registry","text":"<ul> <li>Using Google Protocol Buffer as the model storage protocol, using cross-language sharing, each algorithmic model consists of two parts: ModelParam &amp; ModelMeta</li> <li>A Pipeline generates a series of algorithmic models</li> <li>The model named Pipeline stores Pipeline modeling DSL and online inference DSL</li> <li>Under federal learning, model consistency needs to be guaranteed for all participants, i.e., model binding</li> <li>model_key is the model identifier defined by the user when submitting the task</li> <li>The model IDs of the federated parties are the party identification information role, party_id, plus model_key</li> <li>The model version of the federated parties must be unique and consistent, and FATE-Flow directly sets it to job_id</li> </ul>"},{"location":"fate_flow/#9-data-access","title":"9. Data Access","text":"<ul> <li>Upload.</li> <li>External storage is imported directly to FATE Storage, creating a new DTable</li> <li> <p>When the job runs, Reader reads directly from Storage</p> </li> <li> <p>Table Bind.</p> </li> <li>Key the external storage address to a new DTable in FATE</li> <li>When the job is running, Reader reads data from external storage via Meta and transfers it to FATE Storage</li> <li>Connecting to the Big Data ecosystem: HDFS, Hive/MySQL</li> </ul> <p></p>"},{"location":"fate_flow/#10-multi-party-collaboration-authority-management","title":"10. Multi-Party Collaboration Authority Management","text":""},{"location":"fate_flow_authority_management/","title":"Certification program","text":""},{"location":"fate_flow_authority_management/#1-description","title":"1. Description","text":"<ul> <li> <p>Authentication includes: client authentication and site authentication</p> </li> <li> <p>Authentication configuration: <code>$FATE_BASE/conf/service_conf.yaml</code>.</p> </li> </ul> <pre><code>## Site authentication requires configuration of the party site id\nparty_id:\n# Hook module, need to configure different hooks according to different scenarios\nhook_module:\nclient_authentication: fate_flow.hook.flow.client_authentication\nsite_authentication: fate_flow.hook.flow.site_authentication\n# Third-party authentication service name\nhook_server_name:\nauthentication:\nclient:\n# Client authentication switch\nswitch: false\nhttp_app_key:\nhttp_secret_key:\nsite:\n# Site authentication switch\nswitch: false\n</code></pre> <ul> <li>Authentication method: Support flow's own authentication module authentication and third-party service authentication. The authentication hooks can be modified by hook_module, currently the following hooks are supported.</li> <li>client_authentication supports \"fate_flow.hook.flow.client_authentication\" and \"fate_flow.hook.api.client_authentication\", where the former is the client authentication method of flow. the former is the client authentication method of flow, the latter is the client authentication method of third-party services.</li> <li>site_authentication supports \"fate_flow.hook.flow.site_authentication\" and \"fate_flow.hook.api.site_authentication\", where the former is the site authentication method of flow and the latter is the third-party The former is the site authentication method of flow, and the latter is the third-party site authentication method.</li> </ul>"},{"location":"fate_flow_authority_management/#2-client-authentication","title":"2. client authentication","text":""},{"location":"fate_flow_authority_management/#21-flow-authentication","title":"2.1 flow authentication","text":""},{"location":"fate_flow_authority_management/#211-configuration","title":"2.1.1 Configuration","text":"<pre><code>hook_module:\nclient_authentication: fate_flow.hook.flow.client_authentication\nauthentication:\nclient:\nswitch: true\nhttp_app_key: \"xxx\"\nhttp_secret_key: \"xxx\"\n</code></pre>"},{"location":"fate_flow_authority_management/#222-interface-authentication-method","title":"2.2.2 Interface Authentication Method","text":"<p>All client requests sent to Flow need to add the following header <pre><code>`TIMESTAMP`: Unix timestamp in milliseconds, e.g. `1634890066095` means `2021-10-22 16:07:46 GMT+0800`, note that the difference between this time and the current time of the server cannot exceed 60 seconds\n\n`NONCE`: random string, can use UUID, such as `782d733e-330f-11ec-8be9-a0369fa972af`\n\n`APP_KEY`: must be consistent with `http_app_key` in the Flow configuration file\n\n`SIGNATURE`: signature generated based on `http_secret_key` and request parameters in the Flow configuration file\n</code></pre></p>"},{"location":"fate_flow_authority_management/#223-signature-generation-method","title":"2.2.3 Signature generation method","text":"<ul> <li>Combine the following elements in order</li> </ul> <p><code>TIMESTAMP</code></p> <p><code>NONCE</code></p> <p><code>APP_KEY</code></p> <p>request path + query parameters, if there are no query parameters then the final <code>?</code>, such as <code>/v1/job/submit</code> or <code>/v1/data/upload?table_name=dvisits_hetero_guest&amp;namespace=experiment</code></p> <p>If <code>Content-Type</code> is <code>application/json</code>, then it is the original JSON, i.e. the request body; if not, this item is filled with the empty string</p> <p>If <code>Content-Type</code> is <code>application/x-www-form-urlencoded</code> or <code>multipart/form-data</code>, all parameters need to be sorted alphabetically and <code>urlencode</code>, refer to RFC 3986 (i.e. except <code>a-zA-Z0-9- . _~</code>), note that the file does not participate in the signature; if not, this item is filled with the empty string</p> <ul> <li> <p>Concatenate all parameters with the newline character <code>\\n</code> and encode them in <code>ASCII</code>.</p> </li> <li> <p>Use the <code>HMAC-SHA1</code> algorithm to calculate the binary digest using the <code>http_secret_key</code> key in the Flow configuration file</p> </li> <li> <p>Encode the binary digest using base64</p> </li> </ul>"},{"location":"fate_flow_authority_management/#224-example","title":"2.2.4 Example","text":"<p>You can refer to Fate SDK</p>"},{"location":"fate_flow_authority_management/#22-third-party-service-authentication","title":"2.2 Third party service authentication","text":""},{"location":"fate_flow_authority_management/#221-configuration","title":"2.2.1 Configuration","text":"<pre><code>hook_module:\nclient_authentication: fate_flow.hook.api.client_authentication\nauthentication:\nclient:\nswitch: true\nhook_server_name: \"xxx\"\n</code></pre>"},{"location":"fate_flow_authority_management/#222-interface-authentication-method_1","title":"2.2.2 Interface Authentication Method","text":"<ul> <li>The third party service needs to register the client authentication interface with flow, refer to Client Authentication Service Registration</li> <li>If the authentication fails, flow will return the authentication failure directly to the client.</li> </ul>"},{"location":"fate_flow_authority_management/#3-site-authentication","title":"3. Site Authentication","text":""},{"location":"fate_flow_authority_management/#31-flow-authentication","title":"3.1 flow authentication","text":""},{"location":"fate_flow_authority_management/#311-configuration","title":"3.1.1 Configuration","text":"<pre><code>party_id: 9999\nhook_module:\nsite_authentication: fate_flow.hook.flow.site_authentication\nauthentication:\nclient:\nswitch: true\nhttp_app_key: \"xxx\"\nhttp_secret_key: \"xxx\"\n</code></pre>"},{"location":"fate_flow_authority_management/#312-authentication-scheme","title":"3.1.2 Authentication scheme","text":"<ul> <li>flow generates a pair of public and private keys when it starts, and needs to exchange public keys with each other with its partners. When sending a request, it uses the public key to generate a signature by RSA algorithm, and the requested site verifies the signature by its co-key.</li> <li>flow provides a key management cli as follows</li> </ul>"},{"location":"fate_flow_authority_management/#313-key-management","title":"3.1.3 Key Management","text":"<ul> <li>Add the partner's public key</li> </ul> <p>Used to save other fate site public key information, that is, for cooperation with other sites</p> <pre><code>flow key save -c fateflow/examples/key/save_public_key.json\n</code></pre> <p>Options </p> parameters short format long format required type description conf_path <code>-c</code> <code>-conf-path</code> yes string configuration-path <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> parameter name required type description party_id yes string site id key yes string site public key <p>return</p> parameter name type description retcode int return code retmsg string return message <p>Sample</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre> <ul> <li>Delete a partner's public key</li> </ul> <p>Delete the partner site public key, i.e. cancel the partnership</p> <pre><code>flow key delete -p 9999\n</code></pre> <p>Options </p> parameters short-format long-format required type description party_id <code>-p</code> <code>--party-id</code> yes string site id <p>returns</p> parameter name type description retcode int return-code retmsg string return message <p>Sample</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre> <ul> <li>Query the co-key</li> </ul> <p>Query the public key information of our or partner's fate site</p> <p><pre><code>flow key query -p 9999\n</code></pre> Options </p> parameters short-format long-format required type description party_id <code>-p</code> <code>--party-id</code> yes string site id <p>returns</p> parameter name type description retcode int return-code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": \"-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzxgbxa3cfhvwbu0AFfY/\\ nkm7uFZ17J0EEDgaIWlrLakds7XboU5iOT0eReQp/KG3R0fVM9rBtdj8NcBcArtZ9\\n2242Atls3jiuza/MPPo9XACnedGW7O+ VAfvVmq2sdmKZMX5l7krEXYN645UZAd8b\\nhIh+xf0qGW6IgxyKvqF13VxxB7OMUzUwyY/ZcN2rW1urfdXsCNoQ1cFl3KaarkHl\\nn/ gBMcCDvACXoKysFnFE7L4E7CGglYaDBJrfIyti+sbSVNxUDx2at2VXqj/PohTa\\nkBKfrgK7sT85gz1sc9uRwhwF4nOY7izq367S7t/W8BJ75gWsr+lhhiIfE19RBbBQ\\n /wIDAQAB\\n-----END PUBLIC KEY-----\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_authority_management/#32-third-party-service-authentication","title":"3.2 Third-party service authentication","text":""},{"location":"fate_flow_authority_management/#321-configuration","title":"3.2.1 Configuration","text":"<pre><code>hook_module:\nsite_authentication: fate_flow.hook.api.site_authentication\nauthentication:\nsite:\nswitch: true\nhook_server_name: \"xxx\"\n</code></pre>"},{"location":"fate_flow_authority_management/#322-interface-authentication-method","title":"3.2.2 Interface Authentication Method","text":"<ul> <li>Third party services need to register the site authentication interface with flow, refer to site authentication service registration</li> <li>If the authentication fails, flow will directly return the authentication failure to the initiator.</li> </ul>"},{"location":"fate_flow_client/","title":"FATE Flow Client","text":""},{"location":"fate_flow_client/#description","title":"Description","text":"<ul> <li>Introduces how to install and use the <code>FATE Flow Client</code>, which is usually included in the <code>FATE Client</code>, which contains several clients of the <code>FATE Project</code>: <code>Pipeline</code>, <code>FATE Flow Client</code> and <code>FATE Test</code>.</li> <li>Introducing the command line provided by <code>FATE Flow Client</code>, all commands will have a common invocation entry, you can type <code>flow</code> in the command line to get all the command categories and their subcommands.</li> </ul> <pre><code>    [IN]\nflow\n\n    [OUT]\nUsage: flow COMMAND [OPTIONS]\n\nFate Flow Client\n\n    Options.\n      -h, --help Show this message and exit.\n\n    Commands: -h, --help\n      Component Component Operations\n      data Data Operations\n      init Flow CLI Init Command\n      Job Job Operations\n      model Model Operations\n      queue Queue Operations\n      table Table Operations\n      task Task Operations\n</code></pre> <p>For more information, please consult the following documentation or use the <code>flow --help</code> command.</p> <ul> <li>All commands are described</li> </ul>"},{"location":"fate_flow_client/#install-fate-client","title":"Install FATE Client","text":""},{"location":"fate_flow_client/#online-installation","title":"Online installation","text":"<p>FATE Client will be distributed to <code>pypi</code>, you can install the corresponding version directly using tools such as <code>pip</code>, e.g.</p> <pre><code>pip install fate-client\n</code></pre> <p>or</p> <pre><code>pip install atmosphere-client==${version}\n</code></pre>"},{"location":"fate_flow_client/#installing-on-a-fate-cluster","title":"Installing on a FATE cluster","text":"<p>Please install on a machine with version 1.5.1 and above of FATE.</p> <p>Installation command.</p> <pre><code>cd $FATE_PROJECT_BASE/\n# Enter the virtual environment of FATE PYTHON\nsource bin/init_env.sh\n# Execute the installation\ncd fate/python/fate_client &amp;&amp; python setup.py install\n</code></pre> <p>Once the installation is complete, type <code>flow</code> on the command line and enter, the installation will be considered successful if you get the following return.</p> <pre><code>Usage: flow [OPTIONS] COMMAND [ARGS]...\n\n  Fate Flow Client\n\nOptions:\n  -h, --help Show this message and exit.\n\nCommands:\n  component Component Operations\n  data Data Operations\n  init Flow CLI Init Command\n  Job Job Operations\n  model Model Operations\n  queue Queue Operations\n  Table Table Operations\n  tag Tag Operations\n  task Task Operations\nTask Operations\n\n## Initialization\n\nBefore using the fate-client, you need to initialize it. It is recommended to use the configuration file of fate-client to initialize it.\n\n### Specify the fateflow service address\n\n```bash\n### Specify the IP address and port of the fateflow service for initialization\nflow init --ip 192.168.0.1 --port 9380\n</code></pre>"},{"location":"fate_flow_client/#via-the-configuration-file-on-the-fate-cluster","title":"via the configuration file on the FATE cluster","text":"<pre><code>### Go to the FATE installation path, e.g. /data/projects/fate\ncd $FATE_PROJECT_BASE/\nflow init -c conf/service_conf.yaml\n</code></pre> <p>The initialization is considered successful if you get the following return.</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"Fate Flow CLI has been initialized successfully.\"\n}\n</code></pre>"},{"location":"fate_flow_client/#verify","title":"Verify","text":"<p>Mainly verify that the client can connect to the <code>FATE Flow Server</code>, e.g. try to query the current job status</p> <pre><code>flow job query\n</code></pre> <p>Usually the <code>retcode</code> in the return is <code>0</code>.</p> <pre><code>{\n\"data\": [],\n\"retcode\": 0,\n\"retmsg\": \"no job could be found\"\n}\n</code></pre> <p>If it returns something like the following, it means that the connection is not available, please check the network situation</p> <pre><code>{\n\"retcode\": 100,\n\"retmsg\": \"Connection refused. Please check if the fate flow service is started\"\n}\n</code></pre>"},{"location":"fate_flow_client/#data","title":"Data","text":""},{"location":"fate_flow_client/#upload","title":"upload","text":"<p>Used to upload the input data for the modeling task to the storage system supported by fate</p> <pre><code>flow data upload -c ${conf_path}\n</code></pre> <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> <p>Options</p> parameter name required type description file yes string data storage path id_delimiter yes string Data separator, e.g. \",\" head no int Whether the data has a table header partition yes int Number of data partitions storage_engine no string storage engine type, default \"EGGROLL\", also support \"HDFS\", \"LOCALFS\", \"HIVE\", etc. namespace yes string table namespace table_name yes string table name storage_address no object The storage address of the corresponding storage engine is required use_local_data no int The default is 1, which means use the data from the client's machine; 0 means use the data from the fate flow service's machine. drop no int Whether to overwrite uploads extend_sid no bool Whether to add a new column for uuid id, default False auto_increasing_sid no bool Whether the new id column is self-increasing (will only work if extend_sid is True), default False <p>mete information</p> parameter name required type description input_format no string The format of the data (danse, svmlight, tag:value), used to determine delimiter no string The data separator, default \",\" tag_with_value no bool Valid for tag data format, whether to carry value tag_value_delimiter no string tag:value data separator, default \":\" with_match_id no bool Whether or not to carry match id with_match_id no object The name of the id column, effective when extend_sid is enabled, e.g., [\"email\", \"phone\"] id_range no object For tag/svmlight format data, which columns are ids exclusive_data_type no string The format of the special type data columns data_type no string Column data type, default \"float64 with_label no bool Whether to have a label, default False label_name no string The name of the label, default \"y\" label_type no string Label type, default \"int\" <p>In version 1.9.0 and later, passing in the meta parameter will generate anonymous information about the feature. Example </p> <ul> <li>eggroll</li> </ul> <pre><code>{\n\"file\": \"examples/data/breast_hetero_guest.csv\",\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partition\": 10,\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\",\n\"storage_engine\": \"EGGROLL\"\n}\n</code></pre> <ul> <li>hdfs</li> </ul> <pre><code>{\n\"file\": \"examples/data/breast_hetero_guest.csv\",\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partition\": 10,\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\",\n\"storage_engine\": \"HDFS\"\n}\n</code></pre> <ul> <li>localfs</li> </ul> <pre><code>{\n\"file\": \"examples/data/breast_hetero_guest.csv\",\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partition\": 4,\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\",\n\"storage_engine\": \"LOCALFS\"\n}\n</code></pre> <p>return parameters </p> parameter name type description jobId string job id retcode int return code retmsg string return message data object return data <p>Example </p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://xxx.xxx.xxx.xxx:8080/index.html#/dashboard?job_id=202111081218319075660&amp;role=local&amp;party_id=0\",\n        \"code\": 0,\n        \"dsl_path\": \"/data/projects/fate/jobs/202111081218319075660/job_dsl.json\",\n        \"job_id\": \"202111081218319075660\",\n        \"logs_directory\": \"/data/projects/fate/logs/202111081218319075660\",\n        \"message\": \"success\",\n        \"model_info\": {\n\"model_id\": \"local-0#model\",\n            \"model_version\": \"202111081218319075660\"\n},\n        \"namespace\": \"experiment\",\n        \"pipeline_dsl_path\": \"/data/projects/fate/jobs/202111081218319075660/pipeline_dsl.json\",\n        \"runtime_conf_on_party_path\": \"/data/projects/fate/jobs/202111081218319075660/local/0/job_runtime_on_party_conf.json\",\n        \"runtime_conf_path\":\"/data/projects/fate/jobs/202111081218319075660/job_runtime_conf.json\",\n        \"table_name\": \"breast_hetero_host\",\n        \"train_runtime_conf_path\":\"/data/projects/fate/jobs/202111081218319075660/train_runtime_conf.json\"\n},\n    \"jobId\": \"202111081218319075660\",\n    \"retcode\": 0,\n    \"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#upload-history","title":"upload-history","text":"<p>Used to query upload table history.</p> <pre><code>flow data upload-history -l 20\nflow data upload-history --job-id $JOB_ID\n</code></pre> <p>Options</p> parameter name required type description -l --limit no int Number of records to return. (default: 10) -j --job_id no string Job ID"},{"location":"fate_flow_client/#download","title":"download","text":"<p>Brief description: </p> <p>Used to download data from within the fate storage engine to file format data</p> <pre><code>flow data download -c ${conf_path}\n</code></pre> <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> <p>Options</p> parameter name required type description output_path yes string download_path table_name yes string fate table name namespace yes int fate table namespace <p>Example:</p> <pre><code>{\n\"output_path\": \"/data/projects/fate/breast_hetero_guest.csv\",\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\"\n}\n</code></pre> <p>return parameters </p> parameter name type description jobId string job id retcode int return code retmsg string return message data object return data <p>Example </p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://xxx.xxx.xxx.xxx:8080/index.html#/dashboard?job_id=202111081457135282090&amp;role=local&amp;party_id=0\",\n\"code\": 0,\n\"dsl_path\": \"/data/projects/fate/jobs/202111081457135282090/job_dsl.json\",\n\"job_id\": \"202111081457135282090\",\n\"logs_directory\": \"/data/projects/fate/logs/202111081457135282090\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"local-0#model\",\n\"model_version\": \"202111081457135282090\"\n},\n\"pipeline_dsl_path\": \"/data/projects/fate/jobs/202111081457135282090/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"/data/projects/fate/jobs/202111081457135282090/local/0/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\": \"/data/projects/fate/jobs/202111081457135282090/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"/data/projects/fate/jobs/202111081457135282090/train_runtime_conf.json\"\n},\n\"jobId\": \"202111081457135282090\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#writer","title":"writer","text":"<p>Brief description: </p> <p>Used to download data from the fate storage engine to the external engine or to save data as a new table</p> <pre><code>flow data writer -c ${conf_path}\n</code></pre> <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> <p>Options </p> parameter name required type description table_name yes string fate table name namespace yes int fate table namespace storage_engine no string Storage type, e.g., MYSQL address no object storage_address output_namespace no string Save as a table namespace for fate output_name no string Save as fate's table name **Note: storage_engine, address are combined parameters that provide storage to the specified engine. output_namespace, output_name are also combined parameters, providing the function to save as a new table of the same engine** <p>Example:</p> <pre><code>{\n\"table_name\": \"name1\",\n\"namespace\": \"namespace1\",\n\"output_name\": \"name2\",\n\"output_namespace\": \"namespace2\"\n}\n</code></pre> <p>return</p> parameter name type description jobId string job id retcode int return code retmsg string return information data object return data <p>Example </p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://xxx.xxx.xxx.xxx:8080/index.html#/dashboard?job_id=202201121235115028490&amp;role=local&amp;party_id=0\",\n\"code\": 0,\n\"dsl_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/job_dsl.json\",\n\"job_id\": \"202201121235115028490\",\n\"logs_directory\": \"/data/projects/fate/fateflow/logs/202201121235115028490\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"local-0#model\",\n\"model_version\": \"202201121235115028490\"\n},\n\"pipeline_dsl_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/local/0/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\":\"/data/projects/fate/fateflow/jobs/202201121235115028490/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/train_runtime_conf.json\"\n},\n\"jobId\": \"202201121235115028490\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#table","title":"Table","text":""},{"location":"fate_flow_client/#info","title":"info","text":"<p>Query information about the fate table (real storage address, number, schema, etc.)</p> <pre><code>flow table info [options]\n</code></pre> <p>options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns | parameter name | type | description | | :------ | :----- | -------- | | retcode | int | return code | | retmsg | string | return information | | data | object | return data |</p> <p>Sample</p> <pre><code>{\n\"data\": {\n\"address\": {\n\"home\": null,\n\"name\": \"breast_hetero_guest\",\n\"namespace\": \"experiment\"\n},\n\"count\": 569,\n\"exists\": 1,\n\"namespace\": \"experiment\",\n\"partition\": 4,\n\"schema\": {\n\"header\": \"y,x0,x1,x2,x3,x4,x5,x6,x7,x8,x9\",\n\"sid\": \"id\"\n},\n\"table_name\": \"breast_hetero_guest\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#delete","title":"delete","text":"<p>You can delete table data with table delete</p> <pre><code>flow table delete [options]\n</code></pre> <p>Options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#bind","title":"bind","text":"<p>Real storage addresses can be mapped to fate storage tables via table bind</p> <pre><code>flow table bind [options]\n</code></pre> <p>options </p> parameters short format long format required type description conf_path <code>-c</code> <code>--conf-path</code> yes string configuration-path <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> parameter_name required type description name yes string fate table name namespace yes string fate table namespace engine yes string storage engine, supports \"HDFS\", \"MYSQL\", \"PATH\" yes object real storage address drop no int Overwrite previous information head no int Whether there is a data table header id_delimiter no string Data separator id_column no string id field feature_column no array feature_field <p>mete information</p> parameter name required type description input_format no string The format of the data (danse, svmlight, tag:value), used to determine delimiter no string The data separator, default \",\" tag_with_value no bool Valid for tag data format, whether to carry value tag_value_delimiter no string tag:value data separator, default \":\" with_match_id no bool Whether or not to carry match id with_match_id no object The name of the id column, effective when extend_sid is enabled, e.g., [\"email\", \"phone\"] id_range no object For tag/svmlight format data, which columns are ids exclusive_data_type no string The format of the special type data columns data_type no string Column data type, default \"float64 with_label no bool Whether to have a label, default False label_name no string The name of the label, default \"y\" label_type no string Label type, default \"int\" <p>In version 1.9.0 and later, if the meta parameter is passed in during the table bind phase, no anonymous information about the feature is generated directly.  The feature anonymization information of the original data will be updated after the data has passed through the reader component once</p> <p>Sample </p> <ul> <li>hdfs</li> </ul> <pre><code>{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\",\n\"engine\": \"HDFS\",\n\"address\": {\n\"name_node\": \"hdfs://fate-cluster\",\n\"path\": \"/data/breast_hetero_guest.csv\"\n},\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partitions\": 10\n}\n</code></pre> <ul> <li>mysql</li> </ul> <pre><code>{\n\"engine\": \"MYSQL\",\n\"address\": {\n\"user\": \"fate\",\n\"passwd\": \"fate\",\n\"host\": \"127.0.0.1\",\n\"port\": 3306,\n\"db\": \"experiment\",\n\"name\": \"breast_hetero_guest\"\n},\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\",\n\"head\": 1,\n\"id_delimiter\": \",\",\n\"partitions\": 10,\n\"id_column\": \"id\",\n\"feature_column\": \"y,x0,x1,x2,x3,x4,x5,x6,x7,x8,x9\"\n}\n</code></pre> <ul> <li>PATH</li> </ul> <p><pre><code>{\n\"namespace\": \"xxx\",\n\"name\": \"xxx\",\n\"engine\": \"PATH\",\n\"address\": {\n\"path\": \"xxx\"\n}\n}\n</code></pre> return</p> parameter name type description retcode int return code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#disable","title":"disable","text":"<p>Tables can be made unavailable by table disable</p> <pre><code>flow table disable [options]\n</code></pre> <p>Options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns</p> parameter name type description retcode int return code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#enable","title":"enable","text":"<p>Tables can be made available with table enable</p> <pre><code>flow table enable [options]\n</code></pre> <p>Options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns</p> parameter name type description retcode int return code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": [{\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n}],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#disable-delete","title":"disable-delete","text":"<p>Tables that are currently unavailable can be deleted with disable-delete</p> <pre><code>flow table disable-delete </code></pre> <p>return</p> parameter name type description retcode int return-code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": [\n{\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n{\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n}\n],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#job","title":"Job","text":""},{"location":"fate_flow_client/#submit","title":"submit","text":"<p>Build a federated learning job with two configuration files: job dsl and job conf, and submit it to the scheduler for execution</p> <pre><code>flow job submit [options]\n</code></pre> <p>Options</p> parameter name required type description -d, --dsl-path yes string path to job dsl -c, --conf-path yes string job conf's path <p>Returns</p> parameter name type description retcode int return code retmsg string return message jobId string Job ID data dict return data data.dsl_path string The path to the actual running dsl configuration generated by the system based on the submitted dsl content data.runtime_conf_on_party_path string The system-generated path to the actual running conf configuration for each party based on the submitted conf content data.dsl_path string The system-generated path to the actual running conf configuration for each party based on the submitted conf content data.board_url string fateboard view address data.model_info dict Model identification information <p>Example</p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://127.0.0.1:8080/index.html#/dashboard?job_id=202111061608424372620&amp;role=guest&amp;party_id=9999\",\n\"code\": 0,\n\"dsl_path\": \"$FATE_PROJECT_BASE/jobs/202111061608424372620/job_dsl.json\",\n\"job_id\": \"202111061608424372620\",\n\"logs_directory\": \"$FATE_PROJECT_BASE/logs/202111061608424372620\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"arbiter-10000#guest-9999#host-10000#model\",\n\"model_version\": \"202111061608424372620\"\n},\n\"pipeline_dsl_path\": \"$FATE_PROJECT_BASE/jobs/202111061608424372620/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"$FATE_FATE_PROJECT_BASE/jobs/202111061608424372620/guest/9999/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\":\"$FATE_PROJECT_BASE/jobs/202111061608424372620/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"$FATE_PROJECT_BASE/jobs/202111061608424372620/train_runtime_conf.json\"\n},\n\"jobId\": \"202111061608424372620\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#rerun","title":"rerun","text":"<p>Rerun a job</p> <pre><code>flow job rerun [options]\n</code></pre> <p>Options</p> <p>| parameter name | required | type | description | | :------------- | :------- | :--- | ----------- |------- | | -j, --job-id | yes | string | job id path | | --cpn, --component-name | no | string | Specifies which component to rerun from, unspecified components will not be executed if they have no upstream dependencies on the specified component; if not specified, the entire job will be rerun | | --force | no | bool | The job will be rerun even if it succeeds; if not specified, the job will be skipped if it succeeds |</p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message jobId string Job ID data dict return data <p>Example</p> <pre><code>flow job rerun -j 202111031100369723120\n</code></pre> <pre><code>flow job rerun -j 202111031100369723120 -cpn hetero_lr_0\n</code></pre> <pre><code>flow job rerun -j 202111031100369723120 -cpn hetero_lr_0 --force </code></pre>"},{"location":"fate_flow_client/#parameter-update","title":"parameter-update","text":"<p>Update the job parameters</p> <pre><code>flow job parameter-update [options]\n</code></pre> <p>Options</p> parameter-name required type description -j, --job-id yes string job id path -c, --conf-path yes string The contents of the job conf that needs to be updated, no need to fill in parameters that don't need to be updated <p>Returns</p> parameter name type description retcode int return code retmsg string return message jobId string Job ID data dict Returns the updated job conf <p>Example</p> <p>Assuming that the job is updated with some of the execution parameters of the hetero_lr_0 component, the configuration file is as follows. <pre><code>{\n\"job_parameters\": {\n},\n  \"component_parameters\": {\n\"common\": {\n\"hetero_lr_0\": {\n\"alpha\": 0.02,\n        \"max_iter\": 5\n}\n}\n}\n}\n</code></pre></p> <p>Execution of the following command takes effect.</p> <pre><code>flow job parameter-update -j 202111061957421943730 -c examples/other/update_parameters.json\n</code></pre> <p>Execute the following command to rerun.</p> <pre><code>flow job rerun -j 202111061957421943730 -cpn hetero_lr_0 --force </code></pre>"},{"location":"fate_flow_client/#stop","title":"stop","text":"<p>Cancels or terminates the specified job</p> <p>Options</p> number parameters short format long format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> yes Job ID <p>Example</p> <pre><code>flow job stop -j $JOB_ID\n</code></pre>"},{"location":"fate_flow_client/#query","title":"query","text":"<p>Retrieve task information. Options</p> number parameters short-format long-format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> no Job ID 2 role <code>-r</code> <code>--role</code> no role 3 party_id <code>-p</code> <code>--party_id</code> no Party ID 4 status <code>-s</code> <code>--status</code> No Task status <p>Example</p> <pre><code>flow job query -r guest -p 9999 -s complete\nflow job query -j $JOB_ID\n</code></pre>"},{"location":"fate_flow_client/#view","title":"view","text":"<p>Retrieve the job data view. Options</p> number parameters short-format long-format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> yes Job ID 2 role <code>-r</code> <code>--role</code> no role 3 party_id <code>-p</code> <code>--party_id</code> no Party ID 4 status <code>-s</code> <code>--status</code> No Task status <p>Example</p> <pre><code>flow job view -j $JOB_ID -s complete\n</code></pre>"},{"location":"fate_flow_client/#config","title":"config","text":"<p>Download the configuration file for the specified job to the specified directory.</p> <p>Options</p> number parameters short-format long-format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> yes Job ID 2 role <code>-r</code> <code>--role</code> yes role 3 party_id <code>-p</code> <code>--party_id</code> yes Party ID 4 output_path <code>-o</code> <code>--output-path</code> yes output directory <p>Example</p> <pre><code>flow job config -j $JOB_ID -r host -p 10000 --output-path . /examples/\n</code></pre>"},{"location":"fate_flow_client/#log","title":"log","text":"<p>Download the log file of the specified job to the specified directory. Options</p> number parameters short-format long-format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> yes Job ID 2 output_path <code>-o</code> <code>--output-path</code> yes output directory <p>Example</p> <pre><code>flow job log -j JOB_ID --output-path . /examples/\n</code></pre>"},{"location":"fate_flow_client/#list","title":"list","text":"<p>Show the list of jobs. Options</p> number parameters short-format long-format required parameters parameter description 1 limit <code>-l</code> <code>-limit</code> no Returns the number limit (default: 10) <p>Example</p> <pre><code>flow job list\nflow job list -l 30\n</code></pre>"},{"location":"fate_flow_client/#dsl","title":"dsl","text":"<p>Predictive DSL file generator. Options</p> number parameters short-format long-format required parameters parameter description 1 cpn_list <code>-cpn-list</code> No List of user-specified component names 2 cpn_path <code>-cpn-path</code> No User-specified path to a file with a list of component names 3 train_dsl_path <code>-train-dsl-path</code> yes path to the training dsl file 4 output_path <code>-o</code> <code>--output-path</code> no output directory path <p>Example</p> <pre><code>flow job dsl --cpn-path fate_flow/examples/component_list.txt --train-dsl-path fate_flow/examples/test_hetero_lr_job_dsl.json\n\nflow job dsl --cpn-path fate_flow/examples/component_list.txt --train-dsl-path fate_flow/examples/test_hetero_lr_job_dsl.json -o fate_flow /examples/\n\nflow job dsl --cpn-list \"dataio_0, hetero_feature_binning_0, hetero_feature_selection_0, evaluation_0\" --train-dsl-path fate_flow/examples/ test_hetero_lr_job_dsl.json -o fate_flow/examples/\n\nflow job dsl --cpn-list [dataio_0,hetero_feature_binning_0,hetero_feature_selection_0,evaluation_0] --train-dsl-path fate_flow/examples/ test_hetero_lr_job_dsl.json -o fate_flow/examples/\n</code></pre>"},{"location":"fate_flow_client/#task","title":"Task","text":""},{"location":"fate_flow_client/#query_1","title":"query","text":"<p>Retrieve Task information</p> <p>Options</p> number parameters short format long format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> no Job ID 2 role <code>-r</code> <code>--role</code> no role 3 party_id <code>-p</code> <code>--party_id</code> no Party ID 4 component_name <code>-cpn</code> <code>--component_name</code> no component_name 5 status <code>-s</code> <code>--status</code> No Task status <p>Example</p> <pre><code>flow task query -j $JOB_ID -p 9999 -r guest\nflow task query -cpn hetero_feature_binning_0 -s complete\n</code></pre>"},{"location":"fate_flow_client/#list_1","title":"list","text":"<p>Show the list of Tasks. Options</p> number parameters short format long format required parameters parameter description 1 limit <code>-l</code> <code>-limit</code> no Returns a limit on the number of results (default: 10) <p>Example</p> <pre><code>flow task list\nflow task list -l 25\n</code></pre>"},{"location":"fate_flow_client/#tracking","title":"Tracking","text":""},{"location":"fate_flow_client/#metrics","title":"metrics","text":"<p>Get a list of all metrics names generated by a component task</p> <pre><code>flow tracking metrics [options]\n</code></pre> <p>Options</p> parameter name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data <p>Example</p> <pre><code>flow tracking metrics -j 202111081618357358520 -r guest -p 9999 -cpn evaluation_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"train\": [\n\"hetero_lr_0\",\n\"hetero_lr_0_ks_fpr\",\n\"hetero_lr_0_ks_tpr\",\n\"hetero_lr_0_lift\",\n\"hetero_lr_0_gain\",\n\"hetero_lr_0_accuracy\",\n\"hetero_lr_0_precision\",\n\"hetero_lr_0_recall\",\n\"hetero_lr_0_roc\",\n\"hetero_lr_0_confusion_mat\",\n\"hetero_lr_0_f1_score\",\n\"hetero_lr_0_quantile_pr\"\n]\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#metric-all","title":"metric-all","text":"<p>Get all the output metrics for a component task</p> <pre><code>flow tracking metric-all [options]\n</code></pre> <p>Options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking metric-all -j 202111081618357358520 -r guest -p 9999 -cpn evaluation_0\n</code></pre> <p>Output (limited space, only some of the metric data is shown and some values are omitted in the middle of the array type data):</p> <pre><code>{\n\"data\": {\n\"train\": {\n\"hetero_lr_0\": {\n\"data\": [\n[\n\"auc\",\n0.293893\n],\n[\n\"ks\",\n0.0\n]\n],\n\"meta\": {\n\"metric_type\": \"EVALUATION_SUMMARY\",\n\"name\": \"hetero_lr_0\"\n}\n},\n\"hetero_lr_0_accuracy\": {\n\"data\": [\n[\n0.0,\n0.372583\n],\n[\n0.99,\n0.616872\n]\n],\n\"meta\": {\n\"curve_name\": \"hetero_lr_0\",\n\"metric_type\": \"ACCURACY_EVALUATION\",\n\"name\": \"hetero_lr_0_accuracy\",\n\"thresholds\": [\n0.999471,\n0.002577\n]\n}\n},\n\"hetero_lr_0_confusion_mat\": {\n\"data\": [],\n\"meta\": {\n\"fn\": [\n357,\n0\n],\n\"fp\": [\n0,\n212\n],\n\"metric_type\": \"CONFUSION_MAT\",\n\"name\": \"hetero_lr_0_confusion_mat\",\n\"thresholds\": [\n0.999471,\n0.0\n],\n\"tn\": [\n212,\n0\n],\n\"tp\": [\n0,\n357\n]\n}\n}\n}\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#parameters","title":"parameters","text":"<p>After the job is submitted, the system resolves the actual component task parameters based on the component_parameters in the job conf combined with the system default component parameters</p> <pre><code>flow tracking parameters [options]\n</code></pre> <p>Options</p> parameter_name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking parameters -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"ComponentParam\": {\n\"_feeded_deprecated_params\": [],\n\"_is_raw_conf\": false,\n\"_name\": \"HeteroLR#hetero_lr_0\",\n\"_user_feeded_params\": [\n\"batch_size\",\n\"penalty\",\n\"max_iter\",\n\"learning_rate\",\n\"init_param\",\n\"optimizer\",\n\"init_param.init_method\",\n\"alpha\"\n],\n\"alpha\": 0.01,\n\"batch_size\": 320,\n\"callback_param\": {\n\"callbacks\": [],\n\"early_stopping_rounds\": null,\n\"metrics\": [],\n\"save_freq\": 1,\n\"use_first_metric_only\": false,\n\"validation_freqs\": null\n},\n\"cv_param\": {\n\"history_value_type\": \"score\",\n\"mode\": \"hetero\",\n\"n_splits\": 5,\n\"need_cv\": false,\n\"output_fold_history\": true,\n\"random_seed\": 1,\n\"role\": \"guest\",\n\"shuffle\": true\n},\n\"decay\": 1,\n\"decay_sqrt\": true,\n\"early_stop\": \"diff\",\n\"early_stopping_rounds\": null,\n\"encrypt_param\": {\n\"key_length\": 1024,\n\"method\": \"Paillier\"\n},\n\"encrypted_mode_calculator_param\": {\n\"mode\": \"strict\",\n\"re_encrypted_rate\": 1\n},\n\"floating_point_precision\": 23,\n\"init_param\": {\n\"fit_intercept\": true,\n\"init_const\": 1,\n\"init_method\": \"random_uniform\",\n\"random_seed\": null\n},\n\"learning_rate\": 0.15,\n\"max_iter\": 3,\n\"metrics\": [\n\"auc\",\n\"ks\"\n],\n\"multi_class\": \"ovr\",\n\"optimizer\": \"rmsprop\",\n\"penalty\": \"L2\",\n\"predict_param\": {\n\"threshold\": 0.5\n},\n\"sqn_param\": {\n\"memory_M\": 5,\n\"random_seed\": null,\n\"sample_size\": 5000,\n\"update_interval_L\": 3\n},\n\"stepwise_param\": {\n\"direction\": \"both\",\n\"max_step\": 10,\n\"mode\": \"hetero\",\n\"need_stepwise\": false,\n\"nvmax\": null,\n\"nvmin\": 2,\n\"role\": \"guest\",\n\"score_name\": \"AIC\"\n},\n\"tol\": 0.0001,\n\"use_first_metric_only\": false,\n\"validation_freqs\": null\n},\n\"module\": \"HeteroLR\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#output-data","title":"output-data","text":"<p>Get the component output</p> <pre><code>flow tracking output-data [options]\n</code></pre> <p>options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl -o, --output-path yes string Path to output data <p>Returns</p> parameter name type description retcode int Return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking output-data -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0 -o . /\n</code></pre> <p>Output :</p> <pre><code>{\n\"retcode\": 0,\n\"directory\": \"$FATE_PROJECT_BASE/job_202111081618357358520_hetero_lr_0_guest_9999_output_data\",\n\"retmsg\": \"Download successfully, please check $FATE_PROJECT_BASE/job_202111081618357358520_hetero_lr_0_guest_9999_output_data directory \"\n}\n</code></pre>"},{"location":"fate_flow_client/#output-data-table","title":"output-data-table","text":"<p>Get the output data table name of the component</p> <pre><code>flow tracking output-data-table [options]\n</code></pre> <p>options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking output-data-table -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>output:</p> <pre><code>{\n\"data\": [\n{\n\"data_name\": \"train\",\n\"table_name\": \"9688fa00406c11ecbd0bacde48001122\",\n\"table_namespace\": \"output_data_202111081618357358520_hetero_lr_0_0\"\n}\n],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#output-model","title":"output-model","text":"<p>Get the output model of a component task</p> <pre><code>flow tracking output-model [options]\n</code></pre> <p>options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking output-model -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"bestIteration\": -1,\n\"encryptedWeight\": {},\n\"header\": [\n\"x0\",\n\"x1\",\n\"x2\",\n\"x3\",\n\"x4\",\n\"x5\",\n\"x6\",\n\"x7\",\n\"x8\",\n\"x9\"\n],\n\"intercept\": 0.24451607054764884,\n\"isConverged\": false,\n\"iters\": 3,\n\"lossHistory\": [],\n\"needOneVsRest\": false,\n\"weight\": {\n\"x0\": 0.04639947589856569,\n\"x1\": 0.19899685467216902,\n\"x2\": -0.18133550931649306,\n\"x3\": 0.44928868756862206,\n\"x4\": 0.05285905125502288,\n\"x5\": 0.319187932844076,\n\"x6\": 0.42578983446194013,\n\"x7\": -0.025765956309895477,\n\"x8\": -0.3699194462271593,\n\"x9\": -0.1212094750908295\n}\n},\n\"meta\": {\n\"meta_data\": {\n\"alpha\": 0.01,\n\"batchSize\": \"320\",\n\"earlyStop\": \"diff\",\n\"fitIntercept\": true,\n\"learningRate\": 0.15,\n\"maxIter\": \"3\",\n\"needOneVsRest\": false,\n\"optimizer\": \"rmsprop\",\n\"partyWeight\": 0.0,\n\"penalty\": \"L2\",\n\"reEncryptBatches\": \"0\",\n\"revealStrategy\": \"\",\n\"tol\": 0.0001\n},\n\"module_name\": \"HeteroLR\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#get-summary","title":"get-summary","text":"<p>Each component allows to set some summary information for easy observation and analysis</p> <pre><code>flow tracking get-summary [options]\n</code></pre> <p>Options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking get-summary -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"best_iteration\": -1,\n\"coef\": {\n\"x0\": 0.04639947589856569,\n\"x1\": 0.19899685467216902,\n\"x2\": -0.18133550931649306,\n\"x3\": 0.44928868756862206,\n\"x4\": 0.05285905125502288,\n\"x5\": 0.319187932844076,\n\"x6\": 0.42578983446194013,\n\"x7\": -0.025765956309895477,\n\"x8\": -0.3699194462271593,\n\"x9\": -0.1212094750908295\n},\n\"intercept\": 0.24451607054764884,\n\"is_converged\": false,\n\"one_vs_rest\": false\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#tracking-source","title":"tracking-source","text":"<p>For querying the parent and source tables of a table</p> <pre><code>flow table tracking-source [options]\n</code></pre> <p>Options</p> parameter-name required type description name yes string fate table name namespace yes string fate table namespace <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": [{\"parent_table_name\": \"61210fa23c8d11ec849a5254004fdc71\", \"parent_table_namespace\": \"output_data_202111031759294631020_hetero _lr_0_0\", \"source_table_name\": \"breast_hetero_guest\", \"source_table_namespace\": \"experiment\"}],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#tracking-job","title":"tracking-job","text":"<p>For querying the usage of a particular table</p> <pre><code>flow table tracking-job [options]\n</code></pre> <p>Options</p> parameter name required type description name yes string fate table name namespace yes string fate table namespace <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": {\"count\":2, \"jobs\":[\"202111052115375327830\", \"202111031816501123160\"]},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#model","title":"Model","text":""},{"location":"fate_flow_client/#load","title":"load","text":"<p>Load a model generated by <code>deploy</code> to Fate-Serving.</p> <pre><code>flow model load -c examples/model/publish_load_model.json\nflow model load -j &lt;job_id&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> Yes Config file path job_id <code>-j</code> <code>--job-id</code> Yes Job ID <p>Example</p> <pre><code>{\n\"data\": {\n\"detail\": {\n\"guest\": {\n\"9999\": {\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n},\n\"host\": {\n\"10000\": {\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n}\n},\n\"guest\": {\n\"9999\": 0\n},\n\"host\": {\n\"10000\": 0\n}\n},\n\"jobId\": \"202111091122168817080\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#bind_1","title":"bind","text":"<p>Bind a model generated by <code>deploy</code> to Fate-Serving.</p> <pre><code>flow model bind -c examples/model/bind_model_service.json\nflow model bind -c examples/model/bind_model_service.json -j &lt;job_id&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path job_id <code>-j</code> <code>--job-id</code> Yes Job ID <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"service id is 123\"\n}\n</code></pre>"},{"location":"fate_flow_client/#import","title":"import","text":"<p>Import the model from a file or storage engine.</p> <pre><code>flow model import -c examples/model/import_model.json\nflow model import -c examples/model/restore_model.json --from-database\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path from_database <code>--from-database</code> Yes Import the model from storage engine <p>Example</p> <pre><code>{\n\"data\": {\n\"job_id\": \"202208261102212849780\",\n\"model_id\": \"arbiter-10000#guest-9999#host-10000#model\",\n\"model_version\": \"foobar\",\n\"party_id\": \"9999\",\n\"role\": \"guest\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#export","title":"export","text":"<p>Export the model to a file or storage engine.</p> <pre><code>flow model export -c examples/model/export_model.json\nflow model export -c examples/model/store_model.json --to-database\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path to_database <code>--to-database</code> Yes Export the model to storage engine <p>Example</p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://127.0.0.1:8080/index.html#/dashboard?job_id=202111091124582110490&amp;role=local&amp;party_id=0\",\n\"code\": 0,\n\"dsl_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/job_dsl.json\",\n\"job_id\": \"202111091124582110490\",\n\"logs_directory\": \"/root/Codes/FATE-Flow/logs/202111091124582110490\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"local-0#model\",\n\"model_version\": \"202111091124582110490\"\n},\n\"pipeline_dsl_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/local/0/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/train_runtime_conf.json\"\n},\n\"jobId\": \"202111091124582110490\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#migrate","title":"migrate","text":"<p>Migrate the model.</p> <pre><code>flow model migrate -c examples/model/migrate_model.json\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path <p>Example</p> <pre><code>{\n\"data\": {\n\"arbiter\": {\n\"10000\": 0\n},\n\"detail\": {\n\"arbiter\": {\n\"10000\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. The Config of model has been modified automatically. New model id is: arbiter-100#guest-99#host-100#model, model version is: 202111091127392613050. Model files can be found at '/root/Codes/FATE-Flow/temp/fate_flow/arbiter#100#arbiter-100#guest-99#host-100#model_202111091127392613050.zip'.\"\n}\n},\n\"guest\": {\n\"9999\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. The Config of model has been modified automatically. New model id is: arbiter-100#guest-99#host-100#model, model version is: 202111091127392613050. Model files can be found at '/root/Codes/FATE-Flow/temp/fate_flow/guest#99#arbiter-100#guest-99#host-100#model_202111091127392613050.zip'.\"\n}\n},\n\"host\": {\n\"10000\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. The Config of model has been modified automatically. New model id is: arbiter-100#guest-99#host-100#model, model version is: 202111091127392613050. Model files can be found at '/root/Codes/FATE-Flow/temp/fate_flow/host#100#arbiter-100#guest-99#host-100#model_202111091127392613050.zip'.\"\n}\n}\n},\n\"guest\": {\n\"9999\": 0\n},\n\"host\": {\n\"10000\": 0\n}\n},\n\"jobId\": \"202111091127392613050\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#tag-list","title":"tag-list","text":"<p>List tags of the model.</p> <pre><code>flow model tag-list -j &lt;job_id&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description job_id <code>-j</code> <code>--job_id</code> No Job ID"},{"location":"fate_flow_client/#tag-model","title":"tag-model","text":"<p>Add or remove a tag from the model.</p> <pre><code>flow model tag-model -j &lt;job_id&gt; -t &lt;tag_name&gt;\nflow model tag-model -j &lt;job_id&gt; -t &lt;tag_name&gt; --remove\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description job_id <code>-j</code> <code>--job_id</code> No Job ID tag_name <code>-t</code> <code>--tag-name</code> No Tag name remove <code>--remove</code> Yes Remove the tag"},{"location":"fate_flow_client/#deploy","title":"deploy","text":"<p>Configure predict DSL.</p> <pre><code>flow model deploy --model-id &lt;model_id&gt; --model-version &lt;model_version&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version cpn_list <code>--cpn-list</code> Yes Components list cpn_path <code>--cpn-path</code> Yes Load components list from a file dsl_path <code>--dsl-path</code> Yes Predict DSL file path cpn_step_index <code>--cpn-step-index</code> Yes Specify a checkpoint model to replace the pipeline modelUse <code>:</code> to separate component name and step indexE.g. <code>--cpn-step-index cpn_a:123</code> cpn_step_name <code>--cpn-step-name</code> Yes Specify a checkpoint model to replace the pipeline model.Use <code>:</code> to separate component name and step nameE.g. <code>--cpn-step-name cpn_b:foobar</code> <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\",\n\"data\": {\n\"model_id\": \"arbiter-9999#guest-10000#host-9999#model\",\n\"model_version\": \"202111032227378766180\",\n\"arbiter\": {\n\"party_id\": 9999\n},\n\"guest\": {\n\"party_id\": 10000\n},\n\"host\": {\n\"party_id\": 9999\n},\n\"detail\": {\n\"arbiter\": {\n\"party_id\": {\n\"retcode\": 0,\n\"retmsg\": \"deploy model of role arbiter 9999 success\"\n}\n},\n\"guest\": {\n\"party_id\": {\n\"retcode\": 0,\n\"retmsg\": \"deploy model of role guest 10000 success\"\n}\n},\n\"host\": {\n\"party_id\": {\n\"retcode\": 0,\n\"retmsg\": \"deploy model of role host 9999 success\"\n}\n}\n}\n}\n}\n</code></pre>"},{"location":"fate_flow_client/#get-predict-dsl","title":"get-predict-dsl","text":"<p>Get predict DSL of the model.</p> <pre><code>flow model get-predict-dsl --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; -o ./examples/\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version output_path <code>-o</code> <code>--output-path</code> No Output path"},{"location":"fate_flow_client/#get-predict-conf","title":"get-predict-conf","text":"<p>Get the template of predict config.</p> <pre><code>flow model get-predict-conf --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; -o ./examples/\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version output_path <code>-o</code> <code>--output-path</code> No Output path"},{"location":"fate_flow_client/#get-model-info","title":"get-model-info","text":"<p>Get model information.</p> <pre><code>flow model get-model-info --model-id &lt;model_id&gt; --model-version &lt;model_version&gt;\nflow model get-model-info --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; --detail\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version role <code>-r</code> <code>--role</code> Yes Party role party_id <code>-p</code> <code>--party-id</code> Yes Party ID detail <code>--detail</code> Yes Display detailed information"},{"location":"fate_flow_client/#homo-convert","title":"homo-convert","text":"<p>Convert trained homogenous model to the format of another ML framework.</p> <pre><code>flow model homo-convert -c examples/model/homo_convert_model.json\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path"},{"location":"fate_flow_client/#homo-deploy","title":"homo-deploy","text":"<p>Deploy trained homogenous model to a target online serving system. Currently the supported target serving system is KFServing.</p> <pre><code>flow model homo-deploy -c examples/model/homo_deploy_model.json\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path"},{"location":"fate_flow_client/#checkpoint","title":"Checkpoint","text":""},{"location":"fate_flow_client/#list_2","title":"list","text":"<p>List checkpoints.</p> <pre><code>flow checkpoint list --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; --role &lt;role&gt; --party-id &lt;party_id&gt; --component-name &lt;component_name&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version role <code>-r</code> <code>--role</code> No Party role party_id <code>-p</code> <code>--party-id</code> No Party ID component_name <code>-cpn</code> <code>--component-name</code> No Component name <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\",\n\"data\": [\n{\n\"create_time\": \"2021-11-07T02:34:54.683015\",\n\"step_index\": 0,\n\"step_name\": \"step_name\",\n\"models\": {\n\"HeteroLogisticRegressionMeta\": {\n\"buffer_name\": \"LRModelMeta\",\n\"sha1\": \"6871508f6e6228341b18031b3623f99a53a87147\"\n},\n\"HeteroLogisticRegressionParam\": {\n\"buffer_name\": \"LRModelParam\",\n\"sha1\": \"e3cb636fc93675684bff27117943f5bfa87f3029\"\n}\n}\n}\n]\n}\n</code></pre>"},{"location":"fate_flow_client/#get","title":"get","text":"<p>Get checkpoint information.</p> <pre><code>flow checkpoint get --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; --role &lt;role&gt; --party-id &lt;party_id&gt; --component-name &lt;component_name&gt; --step-index &lt;step_index&gt;\n</code></pre> <p>Example</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version role <code>-r</code> <code>--role</code> No Party role party_id <code>-p</code> <code>--party-id</code> No Party ID component_name <code>-cpn</code> <code>--component-name</code> No Component name step_index <code>--step-index</code> Yes Step index, cannot be used with <code>step_name</code> step_name <code>--step-name</code> Yes Step name, cannot be used with <code>step_index</code> <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\",\n\"data\": {\n\"create_time\": \"2021-11-07T02:34:54.683015\",\n\"step_index\": 0,\n\"step_name\": \"step_name\",\n\"models\": {\n\"HeteroLogisticRegressionMeta\": \"CgJMMhEtQxzr4jYaPxkAAAAAAADwPyIHcm1zcHJvcDD///////////8BOTMzMzMzM8M/QApKBGRpZmZYAQ==\",\n\"HeteroLogisticRegressionParam\": \"Ig0KAng3EW1qASu+uuO/Ig0KAng0EcNi7a65ReG/Ig0KAng4EbJbl4gvVea/Ig0KAng2EcZwlVZTkOu/Ig0KAngwEVpG8dCbGvG/Ig0KAng5ESJNTx5MLve/Ig0KAngzEZ88H9P8qfO/Ig0KAng1EVfWP8JJv/K/Ig0KAngxEVS0xVXoTem/Ig0KAngyEaApgW32Q/K/KSiiE8AukPs/MgJ4MDICeDEyAngyMgJ4MzICeDQyAng1MgJ4NjICeDcyAng4MgJ4OUj///////////8B\"\n}\n}\n}\n</code></pre>"},{"location":"fate_flow_client/#provider","title":"Provider","text":""},{"location":"fate_flow_client/#list_3","title":"list","text":"<p>List all current component providers and information about the components they provide</p> <pre><code>flow provider list [options]\n</code></pre> <p>Options</p> <p>Returns</p> \u53c2\u6570\u540d \u7c7b\u578b \u8bf4\u660e retcode int \u8fd4\u56de\u7801 retmsg string \u8fd4\u56de\u4fe1\u606f data dict \u8fd4\u56de\u6570\u636e <p>Example</p> <p>output:</p> <pre><code>{\n\"data\": {\n\"fate\": {\n\"1.9.0\": {\n\"class_path\": {\n\"anonymous_generator\": \"util.anonymous_generator_util.Anonymous\",\n\"data_format\": \"util.data_format_preprocess.DataFormatPreProcess\",\n\"feature_instance\": \"feature.instance.Instance\",\n\"feature_vector\": \"feature.sparse_vector.SparseVector\",\n\"hetero_model_merge\": \"protobuf.model_merge.merge_hetero_models.hetero_model_merge\",\n\"homo_model_convert\": \"protobuf.homo_model_convert.homo_model_convert\",\n\"interface\": \"components.components.Components\",\n\"model\": \"protobuf.generated\",\n\"model_migrate\": \"protobuf.model_migrate.model_migrate\"\n},\n\"components\": [\n\"heterodatasplit\",\n\"psi\",\n\"heterofastsecureboost\",\n\"heterofeaturebinning\",\n\"scorecard\",\n\"sampleweight\",\n\"homosecureboost\",\n\"onehotencoder\",\n\"secureinformationretrieval\",\n\"homoonehotencoder\",\n\"datatransform\",\n\"dataio\",\n\"heterosshelinr\",\n\"intersection\",\n\"homofeaturebinning\",\n\"secureaddexample\",\n\"union\",\n\"datastatistics\",\n\"columnexpand\",\n\"homonn\",\n\"labeltransform\",\n\"heterosecureboost\",\n\"heterofeatureselection\",\n\"heterolr\",\n\"feldmanverifiablesum\",\n\"heteropoisson\",\n\"evaluation\",\n\"federatedsample\",\n\"homodatasplit\",\n\"ftl\",\n\"localbaseline\",\n\"featurescale\",\n\"featureimputation\",\n\"heteropearson\",\n\"heterokmeans\",\n\"heteronn\",\n\"heterolinr\",\n\"spdztest\",\n\"heterosshelr\",\n\"homolr\"\n],\n\"path\": \"${FATE_PROJECT_BASE}/python/federatedml\",\n\"python\": \"\"\n},\n\"default\": {\n\"version\": \"1.9.0\"\n}\n},\n\"fate_flow\": {\n\"1.9.0\": {\n\"class_path\": {\n\"anonymous_generator\": \"util.anonymous_generator_util.Anonymous\",\n\"data_format\": \"util.data_format_preprocess.DataFormatPreProcess\",\n\"feature_instance\": \"feature.instance.Instance\",\n\"feature_vector\": \"feature.sparse_vector.SparseVector\",\n\"hetero_model_merge\": \"protobuf.model_merge.merge_hetero_models.hetero_model_merge\",\n\"homo_model_convert\": \"protobuf.homo_model_convert.homo_model_convert\",\n\"interface\": \"components.components.Components\",\n\"model\": \"protobuf.generated\",\n\"model_migrate\": \"protobuf.model_migrate.model_migrate\"\n},\n\"components\": [\n\"writer\",\n\"modelrestore\",\n\"upload\",\n\"apireader\",\n\"modelstore\",\n\"cacheloader\",\n\"modelloader\",\n\"download\",\n\"reader\"\n],\n\"path\": \"${FATE_FLOW_BASE}/python/fate_flow\",\n\"python\": \"\"\n},\n\"default\": {\n\"version\": \"1.9.0\"\n}\n}\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre> <p>Contains the <code>name</code>, <code>version number</code>, <code>codepath</code>, <code>list of provided components</code></p>"},{"location":"fate_flow_client/#register","title":"register","text":"<p>Register a component provider</p> <pre><code>flow provider register [options]\n</code></pre> <p>Options</p> \u53c2\u6570\u540d \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e -c, --conf-path \u662f string \u914d\u7f6e\u8def\u5f84 <p>Returns</p> \u53c2\u6570\u540d \u7c7b\u578b \u8bf4\u660e retcode int \u8fd4\u56de\u7801 retmsg string \u8fd4\u56de\u4fe1\u606f <p>Example</p> <pre><code>flow provider register -c $FATE_FLOW_BASE/examples/other/register_provider.json\n</code></pre> <p>conf:</p> <pre><code>{\n\"name\": \"fate\",\n\"version\": \"1.7.1\",\n\"path\": \"${FATE_FLOW_BASE}/python/component_plugins/fateb/python/federatedml\"\n}\n</code></pre> <p>output:</p> <pre><code>{\n\"data\": {\n\"flow-xxx-9380\": {\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#resource","title":"Resource","text":""},{"location":"fate_flow_client/#query_2","title":"query","text":"<p>For querying fate system resources</p> <pre><code>flow resource query\n</code></pre> <p>Options </p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": {\n\"computing_engine_resource\": {\n\"f_cores\": 32,\n\"f_create_date\": \"2021-09-21 19:32:59\",\n\"f_create_time\": 1632223979564,\n\"f_engine_config\": {\n\"cores_per_node\": 32,\n\"nodes\": 1\n},\n\"f_engine_entrance\": \"fate_on_eggroll\",\n\"f_engine_name\": \"EGGROLL\",\n\"f_engine_type\": \"computing\",\n\"f_memory\": 0,\n\"f_nodes\": 1,\n\"f_remaining_cores\": 32,\n\"f_remaining_memory\": 0,\n\"f_update_date\": \"2021-11-08 16:56:38\",\n\"f_update_time\": 1636361798812\n},\n\"use_resource_job\": []\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#return","title":"return","text":"<p>Resources for returning a job</p> <pre><code>flow resource return [options]\n</code></pre> <p>Options </p> parameter name required type description job_id yes string job_id <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": [\n{\n\"job_id\": \"202111081612427726750\",\n\"party_id\": \"8888\",\n\"resource_in_use\": true,\n\"resource_return_status\": true,\n\"role\": \"guest\"\n}\n],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#privilege","title":"Privilege","text":""},{"location":"fate_flow_client/#grant","title":"grant","text":"<p>Add privileges</p> <pre><code>flow privilege grant -c fateflow/examples/permission/grant.json\n</code></pre> <p>Options</p> parameter name required type description party_id yes string site id component no string component name, can be split by \",\" for multiple components, \"*\" for all components dataset no object list of datasets <p>sample <pre><code>{\n\"party_id\": 10000,\n\"component\": \"reader,dataio\",\n\"dataset\": [\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\"\n},\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_host\"\n}\n]\n}\n</code></pre></p> <p>return</p> parameter name type description retcode int return code retmsg string return message <p>Sample</p> <pre><code>{\n\"retcode\": 0,\n    \"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#delete_1","title":"delete","text":"<p>Delete permissions</p> <p><pre><code>flow privilege delete -c fateflow/examples/permission/delete.json\n</code></pre> Options</p> parameter name required type description party_id yes string site_id component no string component name, can be split by \",\" for multiple components, \"*\" for all components dataset no object list of datasets, \"*\" is all datasets <p>sample <pre><code>{\n\"party_id\": 10000,\n\"component\": \"reader,dataio\",\n\"dataset\": [\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\"\n},\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_host\"\n}\n]\n}\n</code></pre></p> <p>return</p> parameter name type description retcode int return code retmsg string return message <p>Sample</p> <pre><code>{\n\"retcode\": 0,\n    \"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#query_3","title":"query","text":"<p>Query permissions</p> <pre><code>flow privilege query -p 10000\n</code></pre> <p>Options</p> parameters short-format long-format required type description party_id <code>-p</code> <code>--party-id</code> yes string site id <p>returns</p> parameter name type description retcode int return-code retmsg string Return information data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"component\": [\n\"reader\",\n\"dataio\"\n],\n\"dataset\": [\n{\n\"name\": \"breast_hetero_guest\",\n\"namespace\": \"experiment\"\n},\n{\n\"name\": \"breast_hetero_host\",\n\"namespace\": \"experiment\"\n}\n]\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#tag","title":"Tag","text":""},{"location":"fate_flow_client/#create","title":"create","text":"<p>Creates a label.</p> <p>Options</p> number parameters short-format long-format required parameters parameter description 1 tag_name <code>-t</code> <code>-tag-name</code> yes tag_name 2 tag_parameter_introduction <code>-d</code> <code>--tag-desc</code> no tag_introduction <p>Example</p> <pre><code>flow tag create -t tag1 -d \"This is the parameter description of tag1.\"\nflow tag create -t tag2\n</code></pre>"},{"location":"fate_flow_client/#update","title":"update","text":"<p>Update the tag information.</p> <p>Options</p> number parameters short format long format required parameters parameter description 1 tag_name <code>-t</code> <code>--tag-name</code> yes tag_name 2 new_tag_name <code>--new-tag-name</code> no new-tag-name 3 new_tag_desc <code>--new-tag-desc</code> no new tag introduction <p>Example</p> <pre><code>flow tag update -t tag1 --new-tag-name tag2\nflow tag update -t tag1 --new-tag-desc \"This is the introduction of the new parameter.\"\n</code></pre>"},{"location":"fate_flow_client/#list_4","title":"list","text":"<p>Show the list of tags.</p> <p>options</p> number parameters short-format long-format required-parameters parameter-introduction 1 limit <code>-l</code> <code>-limit</code> no Returns a limit on the number of results (default: 10) <p>Example</p> <pre><code>flow tag list\nflow tag list -l 3\n</code></pre>"},{"location":"fate_flow_client/#query_4","title":"query","text":"<p>Retrieve tags.</p> <p>Options</p> number parameters short-format long-format required parameters parameter description 1 tag_name <code>-t</code> <code>-tag-name</code> yes tag_name 2 with_model <code>-with-model</code> no If specified, information about models with this tag will be displayed <p>Example</p> <pre><code>flow tag query -t $TAG_NAME\nflow tag query -t $TAG_NAME --with-model\n</code></pre>"},{"location":"fate_flow_client/#delete_2","title":"delete","text":"<p>Delete the tag.</p> <p>Options</p> number parameters short-format long-format required-parameters parameters introduction 1 tag_name <code>-t</code> <code>---tag-name</code> yes tag_name <p>Example</p> <pre><code>flow tag delete -t tag1\n</code></pre>"},{"location":"fate_flow_client/#server","title":"Server","text":""},{"location":"fate_flow_client/#versions","title":"versions","text":"<p>List all relevant system version numbers</p> <pre><code>flow server versions\n</code></pre> <p>Options</p> <p>None</p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow server versions\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"API\": \"v1\",\n\"CENTOS\": \"7.2\",\n\"EGGROLL\": \"2.4.0\",\n\"FATE\": \"1.7.0\",\n\"FATEBoard\": \"1.7.0\",\n\"FATEFlow\": \"1.7.0\",\n\"JDK\": \"8\",\n\"MAVEN\": \"3.6.3\",\n\"PYTHON\": \"3.6.5\",\n\"SPARK\": \"2.4.1\",\n\"UBUNTU\": \"16.04\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_client/#reload","title":"reload","text":"<p>The following configuration items will take effect again after <code>reload</code></p> <ul> <li>All configurations after # engine services in $FATE_PROJECT_BASE/conf/service_conf.yaml</li> <li>All configurations in $FATE_FLOW_BASE/python/fate_flow/job_default_config.yaml</li> </ul> <pre><code>flow server reload\n</code></pre> <p>Options</p> <p>None</p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow server reload\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"job_default_config\": {\n\"auto_retries\": 0,\n\"auto_retry_delay\": 1,\n\"default_component_provider_path\": \"component_plugins/fate/python/federatedml\",\n\"end_status_job_scheduling_time_limit\": 300000,\n\"end_status_job_scheduling_updates\": 1,\n\"federated_command_trys\": 3,\n\"federated_status_collect_type\": \"PUSH\",\n\"job_timeout\": 259200,\n\"max_cores_percent_per_job\": 1,\n\"output_data_summary_count_limit\": 100,\n\"remote_request_timeout\": 30000,\n\"task_cores\": 4,\n\"task_memory\": 0,\n\"task_parallelism\": 1,\n\"total_cores_overweight_percent\": 1,\n\"total_memory_overweight_percent\": 1,\n\"upload_max_bytes\": 4194304000\n},\n\"service_registry\": null\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_component_registry/","title":"Task Component Registry","text":""},{"location":"fate_flow_component_registry/#1-description","title":"1. Description","text":"<ul> <li>After <code>FATE Flow</code> version 1.7, it started to support multiple versions of component packages at the same time, for example, you can put both <code>fate</code> algorithm component packages of <code>1.7.0</code> and <code>1.7.1</code> versions</li> <li>We refer to the provider of the algorithm component package as the <code>component provider</code>, and the <code>name</code> and <code>version</code> uniquely identify the <code>component provider</code>.</li> <li>When submitting a job, you can specify which component package to use for this job via <code>job dsl</code>, please refer to componentprovider</li> </ul>"},{"location":"fate_flow_component_registry/#2-default-component-provider","title":"2. Default Component Provider","text":"<p>Deploying a <code>FATE</code> cluster will include a default component provider, which is usually found in the <code>${FATE_PROJECT_BASE}/python/federatedml</code> directory</p>"},{"location":"fate_flow_component_registry/#3-current-component-provider","title":"3. current component provider","text":"<p>List all current component providers and information about the components they provide</p> <pre><code>flow provider list [options]\n</code></pre> <p>Options</p> <p>Returns</p> \u53c2\u6570\u540d \u7c7b\u578b \u8bf4\u660e retcode int \u8fd4\u56de\u7801 retmsg string \u8fd4\u56de\u4fe1\u606f data dict \u8fd4\u56de\u6570\u636e <p>Example</p> <p>output:</p> <pre><code>{\n\"data\": {\n\"fate\": {\n\"1.9.0\": {\n\"class_path\": {\n\"anonymous_generator\": \"util.anonymous_generator_util.Anonymous\",\n\"data_format\": \"util.data_format_preprocess.DataFormatPreProcess\",\n\"feature_instance\": \"feature.instance.Instance\",\n\"feature_vector\": \"feature.sparse_vector.SparseVector\",\n\"hetero_model_merge\": \"protobuf.model_merge.merge_hetero_models.hetero_model_merge\",\n\"homo_model_convert\": \"protobuf.homo_model_convert.homo_model_convert\",\n\"interface\": \"components.components.Components\",\n\"model\": \"protobuf.generated\",\n\"model_migrate\": \"protobuf.model_migrate.model_migrate\"\n},\n\"components\": [\n\"heterodatasplit\",\n\"psi\",\n\"heterofastsecureboost\",\n\"heterofeaturebinning\",\n\"scorecard\",\n\"sampleweight\",\n\"homosecureboost\",\n\"onehotencoder\",\n\"secureinformationretrieval\",\n\"homoonehotencoder\",\n\"datatransform\",\n\"dataio\",\n\"heterosshelinr\",\n\"intersection\",\n\"homofeaturebinning\",\n\"secureaddexample\",\n\"union\",\n\"datastatistics\",\n\"columnexpand\",\n\"homonn\",\n\"labeltransform\",\n\"heterosecureboost\",\n\"heterofeatureselection\",\n\"heterolr\",\n\"feldmanverifiablesum\",\n\"heteropoisson\",\n\"evaluation\",\n\"federatedsample\",\n\"homodatasplit\",\n\"ftl\",\n\"localbaseline\",\n\"featurescale\",\n\"featureimputation\",\n\"heteropearson\",\n\"heterokmeans\",\n\"heteronn\",\n\"heterolinr\",\n\"spdztest\",\n\"heterosshelr\",\n\"homolr\"\n],\n\"path\": \"${FATE_PROJECT_BASE}/python/federatedml\",\n\"python\": \"\"\n},\n\"default\": {\n\"version\": \"1.9.0\"\n}\n},\n\"fate_flow\": {\n\"1.9.0\": {\n\"class_path\": {\n\"anonymous_generator\": \"util.anonymous_generator_util.Anonymous\",\n\"data_format\": \"util.data_format_preprocess.DataFormatPreProcess\",\n\"feature_instance\": \"feature.instance.Instance\",\n\"feature_vector\": \"feature.sparse_vector.SparseVector\",\n\"hetero_model_merge\": \"protobuf.model_merge.merge_hetero_models.hetero_model_merge\",\n\"homo_model_convert\": \"protobuf.homo_model_convert.homo_model_convert\",\n\"interface\": \"components.components.Components\",\n\"model\": \"protobuf.generated\",\n\"model_migrate\": \"protobuf.model_migrate.model_migrate\"\n},\n\"components\": [\n\"writer\",\n\"modelrestore\",\n\"upload\",\n\"apireader\",\n\"modelstore\",\n\"cacheloader\",\n\"modelloader\",\n\"download\",\n\"reader\"\n],\n\"path\": \"${FATE_FLOW_BASE}/python/fate_flow\",\n\"python\": \"\"\n},\n\"default\": {\n\"version\": \"1.9.0\"\n}\n}\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre> <p>Contains the <code>name</code>, <code>version number</code>, <code>codepath</code>, <code>list of provided components</code></p>"},{"location":"fate_flow_component_registry/#4-new-component-provider","title":"4. new component provider","text":"<p>Register a component provider</p> <pre><code>flow provider register [options]\n</code></pre> <p>Options</p> \u53c2\u6570\u540d \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e -c, --conf-path \u662f string \u914d\u7f6e\u8def\u5f84 <p>Returns</p> \u53c2\u6570\u540d \u7c7b\u578b \u8bf4\u660e retcode int \u8fd4\u56de\u7801 retmsg string \u8fd4\u56de\u4fe1\u606f <p>Example</p> <pre><code>flow provider register -c $FATE_FLOW_BASE/examples/other/register_provider.json\n</code></pre> <p>conf:</p> <pre><code>{\n\"name\": \"fate\",\n\"version\": \"1.7.1\",\n\"path\": \"${FATE_FLOW_BASE}/python/component_plugins/fateb/python/federatedml\"\n}\n</code></pre> <p>output:</p> <pre><code>{\n\"data\": {\n\"flow-xxx-9380\": {\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_data_access/","title":"Data Access","text":""},{"location":"fate_flow_data_access/#1-description","title":"1. Description","text":"<ul> <li> <p>The storage tables of fate are identified by table name and namespace.</p> </li> <li> <p>fate provides an upload component for users to upload data to a storage system supported by the fate compute engine.</p> </li> <li> <p>If the user's data already exists in a storage system supported by fate, the storage information can be mapped to a fate storage table by table bind.</p> </li> <li> <p>If the table bind's table storage type is not consistent with the current default engine, the reader component will automatically convert the storage type;</p> </li> </ul>"},{"location":"fate_flow_data_access/#2-data-upload","title":"2. data upload","text":"<p>Used to upload the input data for the modeling task to the storage system supported by fate</p> <pre><code>flow data upload -c ${conf_path}\n</code></pre> <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> <p>Options</p> parameter name required type description file yes string data storage path id_delimiter yes string Data separator, e.g. \",\" head no int Whether the data has a table header partition yes int Number of data partitions storage_engine no string storage engine type, default \"EGGROLL\", also support \"HDFS\", \"LOCALFS\", \"HIVE\", etc. namespace yes string table namespace table_name yes string table name storage_address no object The storage address of the corresponding storage engine is required use_local_data no int The default is 1, which means use the data from the client's machine; 0 means use the data from the fate flow service's machine. drop no int Whether to overwrite uploads extend_sid no bool Whether to add a new column for uuid id, default False auto_increasing_sid no bool Whether the new id column is self-increasing (will only work if extend_sid is True), default False <p>mete information</p> parameter name required type description input_format no string The format of the data (danse, svmlight, tag:value), used to determine delimiter no string The data separator, default \",\" tag_with_value no bool Valid for tag data format, whether to carry value tag_value_delimiter no string tag:value data separator, default \":\" with_match_id no bool Whether or not to carry match id with_match_id no object The name of the id column, effective when extend_sid is enabled, e.g., [\"email\", \"phone\"] id_range no object For tag/svmlight format data, which columns are ids exclusive_data_type no string The format of the special type data columns data_type no string Column data type, default \"float64 with_label no bool Whether to have a label, default False label_name no string The name of the label, default \"y\" label_type no string Label type, default \"int\" <p>In version 1.9.0 and later, passing in the meta parameter will generate anonymous information about the feature. Example </p> <ul> <li>eggroll</li> </ul> <pre><code>{\n\"file\": \"examples/data/breast_hetero_guest.csv\",\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partition\": 10,\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\",\n\"storage_engine\": \"EGGROLL\"\n}\n</code></pre> <ul> <li>hdfs</li> </ul> <pre><code>{\n\"file\": \"examples/data/breast_hetero_guest.csv\",\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partition\": 10,\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\",\n\"storage_engine\": \"HDFS\"\n}\n</code></pre> <ul> <li>localfs</li> </ul> <pre><code>{\n\"file\": \"examples/data/breast_hetero_guest.csv\",\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partition\": 4,\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\",\n\"storage_engine\": \"LOCALFS\"\n}\n</code></pre> <p>return parameters </p> parameter name type description jobId string job id retcode int return code retmsg string return message data object return data <p>Example </p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://xxx.xxx.xxx.xxx:8080/index.html#/dashboard?job_id=202111081218319075660&amp;role=local&amp;party_id=0\",\n        \"code\": 0,\n        \"dsl_path\": \"/data/projects/fate/jobs/202111081218319075660/job_dsl.json\",\n        \"job_id\": \"202111081218319075660\",\n        \"logs_directory\": \"/data/projects/fate/logs/202111081218319075660\",\n        \"message\": \"success\",\n        \"model_info\": {\n\"model_id\": \"local-0#model\",\n            \"model_version\": \"202111081218319075660\"\n},\n        \"namespace\": \"experiment\",\n        \"pipeline_dsl_path\": \"/data/projects/fate/jobs/202111081218319075660/pipeline_dsl.json\",\n        \"runtime_conf_on_party_path\": \"/data/projects/fate/jobs/202111081218319075660/local/0/job_runtime_on_party_conf.json\",\n        \"runtime_conf_path\":\"/data/projects/fate/jobs/202111081218319075660/job_runtime_conf.json\",\n        \"table_name\": \"breast_hetero_host\",\n        \"train_runtime_conf_path\":\"/data/projects/fate/jobs/202111081218319075660/train_runtime_conf.json\"\n},\n    \"jobId\": \"202111081218319075660\",\n    \"retcode\": 0,\n    \"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_data_access/#3-table-binding","title":"3. table binding","text":"<p>Real storage addresses can be mapped to fate storage tables via table bind</p> <pre><code>flow table bind [options]\n</code></pre> <p>options </p> parameters short format long format required type description conf_path <code>-c</code> <code>--conf-path</code> yes string configuration-path <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> parameter_name required type description name yes string fate table name namespace yes string fate table namespace engine yes string storage engine, supports \"HDFS\", \"MYSQL\", \"PATH\" yes object real storage address drop no int Overwrite previous information head no int Whether there is a data table header id_delimiter no string Data separator id_column no string id field feature_column no array feature_field <p>mete information</p> parameter name required type description input_format no string The format of the data (danse, svmlight, tag:value), used to determine delimiter no string The data separator, default \",\" tag_with_value no bool Valid for tag data format, whether to carry value tag_value_delimiter no string tag:value data separator, default \":\" with_match_id no bool Whether or not to carry match id with_match_id no object The name of the id column, effective when extend_sid is enabled, e.g., [\"email\", \"phone\"] id_range no object For tag/svmlight format data, which columns are ids exclusive_data_type no string The format of the special type data columns data_type no string Column data type, default \"float64 with_label no bool Whether to have a label, default False label_name no string The name of the label, default \"y\" label_type no string Label type, default \"int\" <p>In version 1.9.0 and later, if the meta parameter is passed in during the table bind phase, no anonymous information about the feature is generated directly.  The feature anonymization information of the original data will be updated after the data has passed through the reader component once</p> <p>Sample </p> <ul> <li>hdfs</li> </ul> <pre><code>{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\",\n\"engine\": \"HDFS\",\n\"address\": {\n\"name_node\": \"hdfs://fate-cluster\",\n\"path\": \"/data/breast_hetero_guest.csv\"\n},\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partitions\": 10\n}\n</code></pre> <ul> <li>mysql</li> </ul> <pre><code>{\n\"engine\": \"MYSQL\",\n\"address\": {\n\"user\": \"fate\",\n\"passwd\": \"fate\",\n\"host\": \"127.0.0.1\",\n\"port\": 3306,\n\"db\": \"experiment\",\n\"name\": \"breast_hetero_guest\"\n},\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\",\n\"head\": 1,\n\"id_delimiter\": \",\",\n\"partitions\": 10,\n\"id_column\": \"id\",\n\"feature_column\": \"y,x0,x1,x2,x3,x4,x5,x6,x7,x8,x9\"\n}\n</code></pre> <ul> <li>PATH</li> </ul> <p><pre><code>{\n\"namespace\": \"xxx\",\n\"name\": \"xxx\",\n\"engine\": \"PATH\",\n\"address\": {\n\"path\": \"xxx\"\n}\n}\n</code></pre> return</p> parameter name type description retcode int return code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_data_access/#4-table-information-query","title":"4. table information query","text":"<p>Query information about the fate table (real storage address, number, schema, etc.)</p> <pre><code>flow table info [options]\n</code></pre> <p>options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns | parameter name | type | description | | :------ | :----- | -------- | | retcode | int | return code | | retmsg | string | return information | | data | object | return data |</p> <p>Sample</p> <pre><code>{\n\"data\": {\n\"address\": {\n\"home\": null,\n\"name\": \"breast_hetero_guest\",\n\"namespace\": \"experiment\"\n},\n\"count\": 569,\n\"exists\": 1,\n\"namespace\": \"experiment\",\n\"partition\": 4,\n\"schema\": {\n\"header\": \"y,x0,x1,x2,x3,x4,x5,x6,x7,x8,x9\",\n\"sid\": \"id\"\n},\n\"table_name\": \"breast_hetero_guest\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_data_access/#5-delete-table-data","title":"5. Delete table data","text":"<p>You can delete table data with table delete</p> <pre><code>flow table delete [options]\n</code></pre> <p>Options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_data_access/#6-download-data","title":"6. Download data","text":"<p>Brief description: </p> <p>Used to download data from within the fate storage engine to file format data</p> <pre><code>flow data download -c ${conf_path}\n</code></pre> <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> <p>Options</p> parameter name required type description output_path yes string download_path table_name yes string fate table name namespace yes int fate table namespace <p>Example:</p> <pre><code>{\n\"output_path\": \"/data/projects/fate/breast_hetero_guest.csv\",\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\"\n}\n</code></pre> <p>return parameters </p> parameter name type description jobId string job id retcode int return code retmsg string return message data object return data <p>Example </p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://xxx.xxx.xxx.xxx:8080/index.html#/dashboard?job_id=202111081457135282090&amp;role=local&amp;party_id=0\",\n\"code\": 0,\n\"dsl_path\": \"/data/projects/fate/jobs/202111081457135282090/job_dsl.json\",\n\"job_id\": \"202111081457135282090\",\n\"logs_directory\": \"/data/projects/fate/logs/202111081457135282090\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"local-0#model\",\n\"model_version\": \"202111081457135282090\"\n},\n\"pipeline_dsl_path\": \"/data/projects/fate/jobs/202111081457135282090/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"/data/projects/fate/jobs/202111081457135282090/local/0/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\": \"/data/projects/fate/jobs/202111081457135282090/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"/data/projects/fate/jobs/202111081457135282090/train_runtime_conf.json\"\n},\n\"jobId\": \"202111081457135282090\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_data_access/#7-disable-data","title":"7.  disable data","text":"<p>Tables can be made unavailable by table disable</p> <pre><code>flow table disable [options]\n</code></pre> <p>Options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns</p> parameter name type description retcode int return code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_data_access/#8-enable-data","title":"8.  enable data","text":"<p>Tables can be made available with table enable</p> <pre><code>flow table enable [options]\n</code></pre> <p>Options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns</p> parameter name type description retcode int return code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": [{\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n}],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_data_access/#9-delete-disable-data","title":"9.  delete disable data","text":"<p>Tables that are currently unavailable can be deleted with disable-delete</p> <pre><code>flow table disable-delete </code></pre> <p>return</p> parameter name type description retcode int return-code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": [\n{\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n{\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n}\n],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_data_access/#10-writer","title":"10. Writer","text":"<p>Brief description: </p> <p>Used to download data from the fate storage engine to the external engine or to save data as a new table</p> <pre><code>flow data writer -c ${conf_path}\n</code></pre> <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> <p>Options </p> parameter name required type description table_name yes string fate table name namespace yes int fate table namespace storage_engine no string Storage type, e.g., MYSQL address no object storage_address output_namespace no string Save as a table namespace for fate output_name no string Save as fate's table name **Note: storage_engine, address are combined parameters that provide storage to the specified engine. output_namespace, output_name are also combined parameters, providing the function to save as a new table of the same engine** <p>Example:</p> <pre><code>{\n\"table_name\": \"name1\",\n\"namespace\": \"namespace1\",\n\"output_name\": \"name2\",\n\"output_namespace\": \"namespace2\"\n}\n</code></pre> <p>return</p> parameter name type description jobId string job id retcode int return code retmsg string return information data object return data <p>Example </p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://xxx.xxx.xxx.xxx:8080/index.html#/dashboard?job_id=202201121235115028490&amp;role=local&amp;party_id=0\",\n\"code\": 0,\n\"dsl_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/job_dsl.json\",\n\"job_id\": \"202201121235115028490\",\n\"logs_directory\": \"/data/projects/fate/fateflow/logs/202201121235115028490\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"local-0#model\",\n\"model_version\": \"202201121235115028490\"\n},\n\"pipeline_dsl_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/local/0/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\":\"/data/projects/fate/fateflow/jobs/202201121235115028490/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/train_runtime_conf.json\"\n},\n\"jobId\": \"202201121235115028490\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_data_access/#11-reader-component","title":"11. reader component","text":"<p>Brief description: </p> <ul> <li>The reader component is a data input component of fate;</li> <li>The reader component converts input data into data of the specified storage type;</li> </ul> <p>Parameter configuration:</p> <p>The input table of the reader is configured in the conf when submitting the job:</p> <pre><code>{\n\"role\": {\n\"guest\": {\n\"0\": {\n\"reader_0\": {\n\"table\": {\n\"name\": \"breast_hetero_guest\",\n\"namespace\": \"experiment\"\n}\n}\n}\n}\n}\n}\n</code></pre> <p>Component Output</p> <p>The output data storage engine of the component is determined by the configuration file conf/service_conf.yaml, with the following configuration items:</p> <pre><code>default_engines:\nstorage: eggroll\n</code></pre> <ul> <li>The computing engine and storage engine have certain support dependencies on each other, the list of dependencies is as follows.</li> </ul> computing_engine storage_engine standalone standalone eggroll eggroll spark hdfs(distributed), localfs(standalone) <ul> <li>The reader component's input data storage type supports: eggroll, hdfs, localfs, mysql, path, etc;</li> <li>reader component output data type is determined by default_engines.storage configuration (except for path)</li> </ul>"},{"location":"fate_flow_data_access/#12-api-reader","title":"12. api-reader","text":"<p>Brief description: </p> <ul> <li>The data input of api-reader component is id, and the data output is feature;</li> <li>request parameters can be user-defined, e.g. version number, back month, etc..</li> <li>The component will request third-party services, and the third-party services need to implement upload, query, download interfaces and register with the fate flow, which can be referred to api-reader related service registration</li> </ul> <p>Parameter configuration:</p> <p>Configure the api-reader parameter in the conf when submitting the job:</p> <p><pre><code>{\n\"role\": {\n\"guest\": {\n\"0\": { \"api_reader_0\": {\n\"server_name\": \"xxx\",\n\"parameters\": { \"version\": \"xxx\"},\n\"id_delimiter\": \",\",\n\"head\": true\n}\n}\n}\n}\n}\n</code></pre> Parameter meaning: - server_name: the name of the service to be requested - parameters: the parameters of the requested feature - id_delimiter: the data separator to be returned - head: whether the returned data contains a header or not</p>"},{"location":"fate_flow_http_api/","title":"REST API","text":""},{"location":"fate_flow_http_api/#1-description","title":"1. Description","text":""},{"location":"fate_flow_http_api/#2-error-codes","title":"2. Error codes","text":"<p><code>400 Bad Request</code> request body has both json and form</p> <p><code>401 Unauthorized</code> Missing one or more header(s)</p> <p><code>400 Invalid TIMESTAMP</code> <code>TIMESTAMP</code> could not be parsed</p> <p><code>425 TIMESTAMP is more than 60 seconds away from the server time</code> The <code>TIMESTAMP</code> in the header is more than 60 seconds away from the server time</p> <p><code>401 Unknown APP_KEY</code> header in <code>APP_KEY</code> does not match <code>http_app_key</code> in the Flow configuration file</p> <p><code>403 Forbidden</code> Signature verification failed</p>"},{"location":"fate_flow_http_api_call_demo/","title":"REST API CLIENT","text":""},{"location":"fate_flow_http_api_call_demo/#1-description","title":"1. Description","text":""},{"location":"fate_flow_http_api_call_demo/#use-python-request-fate-flow-api","title":"Use python request fate flow api","text":""},{"location":"fate_flow_http_api_call_demo/#2-data-uploaddownload","title":"2. data upload/download","text":"<pre><code>import json\nimport os\n\nimport requests\nfrom anaconda_project.internal.test.multipart import MultipartEncoder\n\nbase_url = \"http://127.0.0.1:9380/v1\"\n\n\ndef upload():\n    uri = \"/data/upload\"\n    file_name = \"./data/breast_hetero_guest.csv\"\n    with open(file_name, 'rb') as fp:\n        data = MultipartEncoder(\n            fields={'file': (os.path.basename(file_name), fp, 'application/octet-stream')}\n        )\n        config_data = {\n            \"file\": file_name,\n            \"id_delimiter\": \",\",\n            \"head\": 1,\n            \"partition\": 4,\n            \"namespace\": \"experiment\",\n            \"table_name\": \"breast_hetero_guest\"\n        }\n\n        response = requests.post(\n            url=base_url + uri,\n            data=data,\n            params=json.dumps(config_data),\n            headers={'Content-Type': data.content_type}\n        )\n        print(response.text)\n\n\ndef download():\n    uri = \"/data/download\"\n    config_data = {\n        \"output_path\": \"./download_breast_guest.csv\",\n        \"namespace\": \"experiment\",\n        \"table_name\": \"breast_hetero_guest\"\n    }\n    response = requests.post(url=base_url + uri, json=config_data)\n    print(response.text)\n\n\ndef upload_history():\n    uri = \"/data/upload/history\"\n    config_data = {\n        \"limit\": 5\n    }\n    response = requests.post(url=base_url + uri, json=config_data)\n    print(response.text)\n</code></pre>"},{"location":"fate_flow_http_api_call_demo/#3-table","title":"3. table","text":"<pre><code>import requests\n\nbase_url = \"http://127.0.0.1:9380/v1\"\n\n\ndef table_bind():\n    uri = \"/table/bind\"\n    data = {\n        \"head\": 1,\n        \"partition\": 8,\n        \"address\": {\"user\": \"fate\", \"passwd\": \"fate\", \"host\": \"127.0.0.1\", \"port\": 3306, \"db\": \"xxx\", \"name\": \"xxx\"},\n        \"id_name\": \"id\",\n        \"feature_column\": \"y,x0,x1,x2,x3,x4,x5,x6,x7,x8,x9,x10,x11,x12\",\n        \"engine\": \"MYSQL\",\n        \"id_delimiter\": \",\",\n        \"namespace\": \"wzh\",\n        \"name\": \"wzh\",\n    }\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef table_delete():\n    uri = \"/table/delete\"\n    data = {\n        \"table_name\": \"breast_hetero_guest\",\n        \"namespace\": \"experiment\"\n    }\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef table_info():\n    uri = \"/table/table_info\"\n    data = {\n        \"table_name\": \"xxx\",\n        \"namespace\": \"xxx\"\n    }\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef table_list():\n    uri = \"/table/list\"\n    data = {\"job_id\": \"202204221515021092240\", \"role\": \"guest\", \"party_id\": \"20001\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef tracking_source():\n    uri = \"/table/tracking/source\"\n    data = {\"table_name\": \"xxx\", \"namespace\": \"xxx\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef tracking_job():\n    uri = \"/table/tracking/job\"\n    data = {\"table_name\": \"xxx\", \"namespace\": \"xxx\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n</code></pre>"},{"location":"fate_flow_http_api_call_demo/#4-job","title":"4. job","text":"<pre><code>import tarfile\n\nimport requests\n\nbase_url = \"http:/127.0.0.1:9380/v1\"\n\n\ndef submit():\n    uri = \"/job/submit\"\n    data = {\n        \"dsl\": {\n            \"components\": {\n                \"reader_0\": {\n                    \"module\": \"Reader\",\n                    \"output\": {\n                        \"data\": [\n                            \"table\"\n                        ]\n                    }\n                },\n                \"dataio_0\": {\n                    \"module\": \"DataIO\",\n                    \"input\": {\n                        \"data\": {\n                            \"data\": [\n                                \"reader_0.table\"\n                            ]\n                        }\n                    },\n                    \"output\": {\n                        \"data\": [\n                            \"train\"\n                        ],\n                        \"model\": [\n                            \"dataio\"\n                        ]\n                    },\n                    \"need_deploy\": True\n                },\n                \"intersection_0\": {\n                    \"module\": \"Intersection\",\n                    \"input\": {\n                        \"data\": {\n                            \"data\": [\n                                \"dataio_0.train\"\n                            ]\n                        }\n                    },\n                    \"output\": {\n                        \"data\": [\n                            \"train\"\n                        ]\n                    }\n                },\n                \"hetero_feature_binning_0\": {\n                    \"module\": \"HeteroFeatureBinning\",\n                    \"input\": {\n                        \"data\": {\n                            \"data\": [\n                                \"intersection_0.train\"\n                            ]\n                        }\n                    },\n                    \"output\": {\n                        \"data\": [\n                            \"train\"\n                        ],\n                        \"model\": [\n                            \"hetero_feature_binning\"\n                        ]\n                    }\n                },\n                \"hetero_feature_selection_0\": {\n                    \"module\": \"HeteroFeatureSelection\",\n                    \"input\": {\n                        \"data\": {\n                            \"data\": [\n                                \"hetero_feature_binning_0.train\"\n                            ]\n                        },\n                        \"isometric_model\": [\n                            \"hetero_feature_binning_0.hetero_feature_binning\"\n                        ]\n                    },\n                    \"output\": {\n                        \"data\": [\n                            \"train\"\n                        ],\n                        \"model\": [\n                            \"selected\"\n                        ]\n                    }\n                },\n                \"hetero_lr_0\": {\n                    \"module\": \"HeteroLR\",\n                    \"input\": {\n                        \"data\": {\n                            \"train_data\": [\n                                \"hetero_feature_selection_0.train\"\n                            ]\n                        }\n                    },\n                    \"output\": {\n                        \"data\": [\n                            \"train\"\n                        ],\n                        \"model\": [\n                            \"hetero_lr\"\n                        ]\n                    }\n                },\n                \"evaluation_0\": {\n                    \"module\": \"Evaluation\",\n                    \"input\": {\n                        \"data\": {\n                            \"data\": [\n                                \"hetero_lr_0.train\"\n                            ]\n                        }\n                    },\n                    \"output\": {\n                        \"data\": [\n                            \"evaluate\"\n                        ]\n                    }\n                }\n            }\n        },\n        \"runtime_conf\": {\n            \"dsl_version\": \"2\",\n            \"initiator\": {\n                \"role\": \"guest\",\n                \"party_id\": 20001\n            },\n            \"role\": {\n                \"guest\": [\n                    20001\n                ],\n                \"host\": [\n                    10001\n                ],\n                \"arbiter\": [\n                    10001\n                ]\n            },\n            \"job_parameters\": {\n                \"common\": {\n                    \"task_parallelism\": 2,\n                    \"computing_partitions\": 8,\n                    \"task_cores\": 4,\n                    \"auto_retries\": 1\n                }\n            },\n            \"component_parameters\": {\n                \"common\": {\n                    \"intersection_0\": {\n                        \"intersect_method\": \"raw\",\n                        \"sync_intersect_ids\": True,\n                        \"only_output_key\": False\n                    },\n                    \"hetero_lr_0\": {\n                        \"penalty\": \"L2\",\n                        \"optimizer\": \"rmsprop\",\n                        \"alpha\": 0.01,\n                        \"max_iter\": 3,\n                        \"batch_size\": 320,\n                        \"learning_rate\": 0.15,\n                        \"init_param\": {\n                            \"init_method\": \"random_uniform\"\n                        }\n                    }\n                },\n                \"role\": {\n                    \"guest\": {\n                        \"0\": {\n                            \"reader_0\": {\n                                \"table\": {\n                                    \"name\": \"breast_hetero_guest\",\n                                    \"namespace\": \"experiment\"\n                                }\n                            },\n                            \"dataio_0\": {\n                                \"with_label\": True,\n                                \"label_name\": \"y\",\n                                \"label_type\": \"int\",\n                                \"output_format\": \"dense\"\n                            }\n                        }\n                    },\n                    \"host\": {\n                        \"0\": {\n                            \"reader_0\": {\n                                \"table\": {\n                                    \"name\": \"breast_hetero_host\",\n                                    \"namespace\": \"experiment\"\n                                }\n                            },\n                            \"dataio_0\": {\n                                \"with_label\": False,\n                                \"output_format\": \"dense\"\n                            },\n                            \"evaluation_0\": {\n                                \"need_run\": False\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef stop():\n    uri = \"/job/stop\"\n    data = {\"job_id\": \"202204251958539401540\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef rerun():\n    uri = \"/job/rerun\"\n    data = {\"job_id\": \"202204251958539401540\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef query():\n    uri = \"/job/query\"\n    data = {\"job_id\": \"202204251958539401540\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef list_job():\n    uri = \"/job/list/job\"\n    data = {\"limit\": 1}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef update():\n    uri = \"/job/update\"\n    data = {\"job_id\": \"202204251958539401540\", \"role\": \"guest\", \"party_id\": 20001, \"notes\": \"this is a test\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef parameter_update():\n    uri = \"/job/parameter/update\"\n    data = {\"component_parameters\": {\"common\": {\"hetero_lr_0\": {\"max_iter\": 10}}},\n            \"job_parameters\": {\"common\": {\"auto_retries\": 2}}, \"job_id\": \"202204251958539401540\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef config():\n    uri = \"/job/config\"\n    data = {\"job_id\": \"202204251958539401540\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef log_download():\n    uri = \"/job/log/download\"\n    data = {\"job_id\": \"202204251958539401540a\"}\n    download_tar_file_name = \"./test.tar.gz\"\n    res = requests.post(base_url + uri, json=data)\n    with open(download_tar_file_name, \"wb\") as fw:\n        for chunk in res.iter_content(1024):\n            if chunk:\n                fw.write(chunk)\n    tar = tarfile.open(download_tar_file_name, \"r:gz\")\n    file_names = tar.getnames()\n    for file_name in file_names:\n        tar.extract(file_name)\n    tar.close()\n\n\ndef log_path():\n    uri = \"/job/log/path\"\n    data = {\"job_id\": \"202204251958539401540\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef task_query():\n    uri = \"/job/task/query\"\n    data = {\"job_id\": \"202204251958539401540\", \"role\": \"guest\", \"party_id\": 20001}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef list_task():\n    uri = \"/job/list/task\"\n    data = {\"job_id\": \"202204251958539401540\", \"role\": \"guest\", \"party_id\": 20001}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\ndef job_clean():\n    uri = \"/job/clean\"\n    data = {\"job_id\": \"202204251958539401540\", \"role\": \"guest\", \"party_id\": 20001}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\ndef clean_queue():\n    uri = \"/job/clean/queue\"\n    res = requests.post(base_url + uri)\n    print(res.text)\n</code></pre>"},{"location":"fate_flow_http_api_call_demo/#5-tracking","title":"5. tracking","text":"<pre><code>import tarfile\n\nimport requests\n\nbase_url = \"http://127.0.0.1:9380/v1\"\n\n\ndef job_data_view():\n    uri = \"/tracking/job/data_view\"\n    data = {\"job_id\": \"202203311009181495690\", \"role\": \"guest\", \"party_id\": 20001}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef component_metric_all():\n    uri = \"/tracking/component/metric/all\"\n    data = {\"job_id\": \"202203311009181495690\", \"role\": \"guest\", \"party_id\": 20001, \"component_name\": \"HeteroSecureBoost_0\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n# {\"data\":{\"train\":{\"loss\":{\"data\":[[0,0.6076415445876732],[1,0.5374539452565573],[2,0.4778598986135903],[3,0.42733599866560723],[4,0.38433409799127843]],\"meta\":{\"Best\":0.38433409799127843,\"curve_name\":\"loss\",\"metric_type\":\"LOSS\",\"name\":\"train\",\"unit_name\":\"iters\"}}}},\"retcode\":0,\"retmsg\":\"success\"}\n\n\ndef component_metric():\n    uri = \"/tracking/component/metrics\"\n    data = {\"job_id\": \"202203311009181495690\", \"role\": \"guest\", \"party_id\": 20001, \"component_name\": \"Intersection_0\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\ndef component_metric_data():\n    uri = \"/tracking/component/metric_data\"\n    data = {\"job_id\": \"202203311009181495690\",\n            \"role\": \"guest\",\n            \"party_id\": 20001,\n            \"component_name\": \"Intersection_0\",\n            \"metric_name\": \"intersection\",\n            \"metric_namespace\": \"train\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef component_parameters():\n    uri = \"/tracking/component/parameters\"\n    data = {\"job_id\": \"202203311009181495690\",\n            \"role\": \"guest\",\n            \"party_id\": 20001,\n            \"component_name\": \"Intersection_0\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef component_output_model():\n    uri = \"/tracking/component/output/model\"\n    data = {\"job_id\": \"202203311009181495690\",\n            \"role\": \"guest\",\n            \"party_id\": 20001,\n            \"component_name\": \"Intersection_0\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef component_output_data():\n    uri = \"/tracking/component/output/data\"\n    data = {\"job_id\": \"202203311009181495690\",\n            \"role\": \"guest\",\n            \"party_id\": 20001,\n            \"component_name\": \"Intersection_0\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef component_output_data_download():\n    uri = \"/tracking/component/output/data/download\"\n    download_tar_file_name = \"data.tar.gz\"\n    data = {\"job_id\": \"202203311009181495690\",\n            \"role\": \"guest\",\n            \"party_id\": 20001,\n            \"component_name\": \"Intersection_0\"}\n    res = requests.get(base_url + uri, json=data)\n    print(res.text)\n    with open(download_tar_file_name, \"wb\") as fw:\n        for chunk in res.iter_content(1024):\n            if chunk:\n                fw.write(chunk)\n    tar = tarfile.open(download_tar_file_name, \"r:gz\")\n    file_names = tar.getnames()\n    for file_name in file_names:\n        tar.extract(file_name)\n    tar.close()\n\n\ndef component_output_data_table():\n    uri = \"/tracking/component/output/data/table\"\n    data = {\"job_id\": \"202203311009181495690\",\n            \"role\": \"guest\",\n            \"party_id\": 20001,\n            \"component_name\": \"Intersection_0a\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef component_component_summary_download():\n    uri = \"/tracking/component/summary/download\"\n    data = {\"job_id\": \"202203311009181495690\",\n            \"role\": \"guest\",\n            \"party_id\": 20001,\n            \"component_name\": \"Intersection_0\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\ndef component_list():\n    uri = \"/tracking/component/list\"\n    data = {\"job_id\": \"202203311009181495690\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\ncomponent_list()\n</code></pre>"},{"location":"fate_flow_http_api_call_demo/#6-resource","title":"6. resource","text":"<pre><code>import requests\n\nbase_url = \"http://127.0.0.1:9380/v1\"\n\n\ndef resource_query():\n    uri = \"/resource/query\"\n    data = {\"engine_name\": \"EGGROLL\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n\n\ndef resource_return():\n    uri = \"/resource/return\"\n    data = {\"job_id\": \"202204261616175720130\"}\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\nresource_return()\n</code></pre>"},{"location":"fate_flow_http_api_call_demo/#7-permission","title":"7. permission","text":"<pre><code>import requests\n\nbase_url = \"http://127.0.0.1:9380/v1\"\n\n\ndef grant_privilege():\n    uri = \"/permission/grant/privilege\"\n    data = {\n        \"src_role\": \"guest\",\n        \"src_party_id\": \"9999\",\n        \"privilege_role\": \"all\",\n        \"privilege_component\": \"all\",\n        \"privilege_command\": \"all\"\n    }\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n# grant_privilege()\n\ndef delete_privilege():\n    uri = \"/permission/delete/privilege\"\n    data = {\n        \"src_role\": \"guest\",\n        \"src_party_id\": \"9999\",\n        \"privilege_role\": \"guest\",\n        \"privilege_component\": \"dataio\",\n        \"privilege_command\": \"create\"\n    }\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\n# delete_privilege()\n\n\ndef query_privilege():\n    uri = \"/permission/query/privilege\"\n    data = {\n        \"src_role\": \"guest\",\n        \"src_party_id\": \"9999\"\n    }\n    res = requests.post(base_url + uri, json=data)\n    print(res.text)\n\nquery_privilege()\n</code></pre>"},{"location":"fate_flow_job_scheduling/","title":"Multi-Party Job&amp;Task Scheduling","text":""},{"location":"fate_flow_job_scheduling/#1-description","title":"1. Description","text":"<p>Mainly describes how to submit a federated learning job using <code>FATE Flow</code> and observe the use of</p>"},{"location":"fate_flow_job_scheduling/#2-job-submission","title":"2. Job submission","text":"<ul> <li>Build a federated learning job and submit it to the scheduling system for execution</li> <li>Two configuration files are required: job dsl and job conf</li> <li>job dsl configures the running components: list, input-output relationships</li> <li>job conf configures the component execution parameters, system operation parameters</li> </ul> <p>Build a federated learning job with two configuration files: job dsl and job conf, and submit it to the scheduler for execution</p> <pre><code>flow job submit [options]\n</code></pre> <p>Options</p> parameter name required type description -d, --dsl-path yes string path to job dsl -c, --conf-path yes string job conf's path <p>Returns</p> parameter name type description retcode int return code retmsg string return message jobId string Job ID data dict return data data.dsl_path string The path to the actual running dsl configuration generated by the system based on the submitted dsl content data.runtime_conf_on_party_path string The system-generated path to the actual running conf configuration for each party based on the submitted conf content data.dsl_path string The system-generated path to the actual running conf configuration for each party based on the submitted conf content data.board_url string fateboard view address data.model_info dict Model identification information <p>Example</p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://127.0.0.1:8080/index.html#/dashboard?job_id=202111061608424372620&amp;role=guest&amp;party_id=9999\",\n\"code\": 0,\n\"dsl_path\": \"$FATE_PROJECT_BASE/jobs/202111061608424372620/job_dsl.json\",\n\"job_id\": \"202111061608424372620\",\n\"logs_directory\": \"$FATE_PROJECT_BASE/logs/202111061608424372620\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"arbiter-10000#guest-9999#host-10000#model\",\n\"model_version\": \"202111061608424372620\"\n},\n\"pipeline_dsl_path\": \"$FATE_PROJECT_BASE/jobs/202111061608424372620/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"$FATE_FATE_PROJECT_BASE/jobs/202111061608424372620/guest/9999/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\":\"$FATE_PROJECT_BASE/jobs/202111061608424372620/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"$FATE_PROJECT_BASE/jobs/202111061608424372620/train_runtime_conf.json\"\n},\n\"jobId\": \"202111061608424372620\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_job_scheduling/#3-job-dsl-configuration-description","title":"3. Job DSL configuration description","text":"<p>The configuration file of DSL is in json format, in fact, the whole configuration file is a json object (dict).</p>"},{"location":"fate_flow_job_scheduling/#31-component-list","title":"3.1 Component List","text":"<p>Description The first level of this dict is <code>components</code>, which indicates the modules that will be used by this job. Example</p> <pre><code>{\n\"components\" : {\n...\n}\n}\n</code></pre> <p>Each individual module is defined under \"components\", e.g.</p> <pre><code>\"data_transform_0\": {\n\"module\": \"DataTransform\",\n\"input\": {\n\"data\": {\n\"data\": [\n\"reader_0.train_data\"\n]\n}\n},\n\"output\": {\n\"data\": [\"train\"],\n\"model\": [\"model\"]\n}\n}\n</code></pre> <p>All data needs to be fetched from the data store via the Reader module, note that this module only has the output <code>output</code></p> <pre><code>\"reader_0\": {\n\"module\": \"Reader\",\n\"output\": {\n\"data\": [\"train\"]\n}\n}\n</code></pre>"},{"location":"fate_flow_job_scheduling/#32-modules","title":"3.2 Modules","text":"<p>Description Used to specify the components to be used, all optional module names refer to. Example</p> <pre><code>\"hetero_feature_binning_1\": {\n\"module\": \"HeteroFeatureBinning\",\n...\n}\n</code></pre>"},{"location":"fate_flow_job_scheduling/#33-inputs","title":"3.3 Inputs","text":"<p>Implications Upstream inputs, divided into two input types, data and model.</p>"},{"location":"fate_flow_job_scheduling/#data-input","title":"data input","text":"<p>Description Upstream data input, divided into three input types.</p> <pre><code>&gt; 1. data: generally used in the data-transform module, feature_engineering module or\n&gt; evaluation module.\n&gt; 2. train_data: Generally used in homo_lr, hetero_lr and secure_boost\n&gt; modules. If the train_data field is present, then the task will be recognized as a fit task\n&gt; validate_data: If the train_data\n&gt; field is present, then the field is optional. If you choose to keep this field, the data pointed to will be used as the\n&gt; validation set\n&gt; 4. test_data: Used as prediction data, if provided, along with model input.\n</code></pre>"},{"location":"fate_flow_job_scheduling/#model_input","title":"model_input","text":"<p>Description Upstream model input, divided into two input types.     1. model: Used for model input of the same type of component. For example, hetero_binning_0 will fit the model, and then         hetero_binning_1 will use the output of hetero_binning_0 for predict or         transform. code example.</p> <p><pre><code>        \"hetero_feature_binning_1\": {\n\"module\": \"HeteroFeatureBinning\",\n\"input\": {\n\"data\": {\n\"data\": [\n\"data_transform_1.validate_data\"\n]\n},\n\"model\": [\n\"hetero_feature_binning_0.fit_model\"\n]\n},\n\"output\": {\n\"data\": [\"validate_data\" ],\n\"model\": [\"eval_model\"]\n}\n}\n</code></pre>     2. isometric_model: Used to specify the model input of the inherited upstream component. For example, the upstream component of feature selection is         feature binning, it will use the information of feature binning as the feature         Code example. <pre><code>        \"hetero_feature_selection_0\": {\n\"module\": \"HeteroFeatureSelection\",\n\"input\": {\n\"data\": {\n\"data\": [\n\"hetero_feature_binning_0.train\"\n]\n},\n\"isometric_model\": [\n\"hetero_feature_binning_0.output_model\"\n]\n},\n\"output\": {\n\"data\": [ \"train\" ],\n\"model\": [\"output_model\"]\n}\n}\n</code></pre></p>"},{"location":"fate_flow_job_scheduling/#34-output","title":"3.4 Output","text":"<p>Description Output, like input, is divided into data and model output</p>"},{"location":"fate_flow_job_scheduling/#data-output","title":"data output","text":"<p>Description Data output, divided into four output types.</p> <ol> <li>data: General module data output</li> <li>train_data: only for Data Split</li> <li>validate_data: Only for Data Split</li> <li>test_data: Data Split only</li> </ol>"},{"location":"fate_flow_job_scheduling/#model-output","title":"Model Output","text":"<p>Description Model output, using model only</p>"},{"location":"fate_flow_job_scheduling/#35-component-providers","title":"3.5 Component Providers","text":"<p>Since FATE-Flow version 1.7.0, the same FATE-Flow system supports loading multiple component providers, i.e. providers, which provide several components, and the source provider of the component can be configured when submitting a job Since FATE-Flow version 1.9.0, the parameters of the provider need to be configured in job conf, as follows</p> <p>Description Specify the provider, support global specification and individual component specification; if not specified, the default provider: <code>fate@$FATE_VERSION</code></p> <p>Format <code>provider_name@$provider_version</code></p> <p>Advanced You can register a new provider through the component registration CLI, currently supported providers: fate and fate_sql, please refer to FATE Flow Component Center</p> <p>Example</p> <pre><code>{\n\"dsl_version\": \"2\",\n\"initiator\": {},\n\"role\": {},\n\"job_parameters\": {},\n\"component_parameters\": {},\n\"provider\": {\n\"common\": {\n\"hetero_feature_binning_0\": \"fate@1.8.0\"\n},\n\"role\": {\n\"guest\": {\n\"0\": {\n\"data_transform_0\": \"fate@1.9.0\"\n}\n},\n\"host\": {\n\"0\": {\n\"data_transform_0\": \"fate@1.9.0\"\n}\n}\n}\n}\n}\n</code></pre>"},{"location":"fate_flow_job_scheduling/#4-job-conf-configuration-description","title":"4. Job Conf Configuration Description","text":"<p>Job Conf is used to set the information of each participant, the parameters of the job and the parameters of each component. The contents include the following.</p>"},{"location":"fate_flow_job_scheduling/#41-dsl-version","title":"4.1 DSL Version","text":"<p>Description Configure the version, the default is not 1, it is recommended to configure 2 Example <pre><code>\"dsl_version\": \"2\"\n</code></pre></p>"},{"location":"fate_flow_job_scheduling/#42-job-participants","title":"4.2 Job participants","text":""},{"location":"fate_flow_job_scheduling/#initiating-party","title":"initiating party","text":"<p>Description The role and party_id of the assignment initiator. Example <pre><code>\"initiator\": {\n\"role\": \"guest\",\n\"party_id\": 9999\n}\n</code></pre></p>"},{"location":"fate_flow_job_scheduling/#all-participants","title":"All participants","text":"<p>Description Information about each participant. Description In the role field, each element represents a role and the party_id that assumes that role. party_id for each role     The party_id of each role is in the form of a list, since a task may involve multiple parties in the same role. Example</p> <pre><code>\"role\": {\n\"guest\": [9999],\n\"host\": [10000],\n\"arbiter\": [10000]\n}\n</code></pre>"},{"location":"fate_flow_job_scheduling/#43-system-operation-parameters","title":"4.3 System operation parameters","text":"<p>Description     Configure the main system parameters for job runtime</p>"},{"location":"fate_flow_job_scheduling/#parameter-application-scope-policy-setting","title":"Parameter application scope policy setting","text":"<p>**Apply to all participants, use the common scope identifier **Apply to only one participant, use the role scope identifier, use (role:)party_index to locate the specified participant, direct</p> <pre><code>\"common\": {\n}\n\n\"role\": {\n\"guest\": {\n\"0\": {\n}\n}\n}\n</code></pre> <p>The parameters under common are applied to all participants, and the parameters under role-guest-0 configuration are applied to the participants under the subscript 0 of the guest role. Note that the current version of the system operation parameters are not strictly tested for application to only one participant, so it is recommended to use common as a preference.</p>"},{"location":"fate_flow_job_scheduling/#supported-system-parameters","title":"Supported system parameters","text":"Configuration Default Supported Description job_type train train, predict task_cores task_cores 4 positive_integer total_cpu_cores_applied_to_job task_parallelism 1 positive_integer task_parallelism computing_partitions number of cpu cores allocated to task positive integer number of partitions in the data table at computation time eggroll_run none processors_per_node, etc. eggroll computing engine related configuration parameters, generally do not need to be configured, from task_cores automatically calculated, if configured, task_cores parameters do not take effect spark_run none num-executors, executor-cores, etc. spark compute engine related configuration parameters, generally do not need to be configured, automatically calculated by task_cores, if configured, task_cores parameters do not take effect rabbitmq_run None queue, exchange, etc. Configuration parameters for rabbitmq to create queue, exchange, etc., which are generally not required and take the system defaults. pulsar_run none producer, consumer, etc. The configuration parameters for pulsar to create producer and consumer. federated_status_collect_type PUSH PUSH, PULL Multi-party run status collection mode, PUSH means that each participant actively reports to the initiator, PULL means that the initiator periodically pulls from each participant. timeout 259200 (3 days) positive integer task_timeout,unit_second audo_retries 3 positive integer maximum number of retries per task failure model_id - - The model id to be filled in for prediction tasks. model_version - - Model version, required for prediction tasks <ol> <li>there is a certain support dependency between the computation engine and the storage engine</li> <li>developers can implement their own adapted engines, and configure the engines in runtime config</li> </ol>"},{"location":"fate_flow_job_scheduling/#reference-configuration","title":"reference configuration","text":"<ol> <li>no need to pay attention to the compute engine, take the system default cpu allocation compute policy when the configuration</li> </ol> <pre><code>\"job_parameters\": {\n\"common\": {\n\"job_type\": \"train\",\n\"task_cores\": 6,\n\"task_parallelism\": 2,\n\"computing_partitions\": 8,\n\"timeout\": 36000\n}\n}\n</code></pre> <ol> <li>use eggroll as the computing engine, take the configuration when specifying cpu and other parameters directly</li> </ol> <pre><code>\"job_parameters\": {\n\"common\": {\n\"job_type\": \"train\",\n\"eggroll_run\": {\n\"eggroll.session.processors.per.node\": 2\n},\n\"task_parallelism\": 2,\n\"computing_partitions\": 8,\n\"timeout\": 36000,\n}\n}\n</code></pre> <ol> <li>use spark as the computing engine, rabbitmq as the federation engine, take the configuration when specifying the cpu and other parameters directly</li> </ol> <pre><code>\"job_parameters\": {\n\"common\": {\n\"job_type\": \"train\",\n\"spark_run\": {\n\"num-executors\": 1,\n\"executor-cores\": 2\n},\n\"task_parallelism\": 2,\n\"computing_partitions\": 8,\n\"timeout\": 36000,\n\"rabbitmq_run\": {\n\"queue\": {\n\"durable\": true\n},\n\"connection\": {\n\"heartbeat\": 10000\n}\n}\n}\n}\n</code></pre> <ol> <li>use spark as the computing engine and pulsar as the federation engine</li> </ol> <p><pre><code>\"job_parameters\": {\n\"common\": {\n\"spark_run\": {\n\"num-executors\": 1,\n\"executor-cores\": 2\n},\n}\n}\n</code></pre> For more advanced resource-related configuration, please refer to Resource Management</p>"},{"location":"fate_flow_job_scheduling/#43-component-operation-parameters","title":"4.3 Component operation parameters","text":""},{"location":"fate_flow_job_scheduling/#parameter-application-scope-policy-setting_1","title":"Parameter application scope policy setting","text":"<ul> <li>Apply to all participants, use common scope identifier</li> <li>Apply to only one participant, use the role scope identifier, use (role:)party_index to locate the specified participant, directly specified parameters have higher priority than common parameters</li> </ul> <pre><code>\"commom\": {\n}\n\n\"role\": {\n\"guest\": {\n\"0\": {\n}\n}\n}\n</code></pre> <p>where the parameters under the common configuration are applied to all participants, and the parameters under the role-guest-0 configuration indicate that they are applied to the participants under the subscript 0 of the guest role Note that the current version of the component runtime parameter already supports two application scope policies</p>"},{"location":"fate_flow_job_scheduling/#reference-configuration_1","title":"Reference Configuration","text":"<ul> <li>For the <code>intersection_0</code> and <code>hetero_lr_0</code> components, the runtime parameters are placed under the common scope and are applied to all participants</li> <li>The operational parameters of <code>reader_0</code> and <code>data_transform_0</code> components are configured specific to each participant, because usually the input parameters are not consistent across participants, so usually these two components are set by participant</li> <li>The above component names are defined in the DSL configuration file</li> </ul> <pre><code>\"component_parameters\": {\n\"common\": {\n\"intersection_0\": {\n\"intersect_method\": \"raw\",\n\"sync_intersect_ids\": true,\n\"only_output_key\": false\n},\n\"hetero_lr_0\": {\n\"penalty\": \"L2\",\n\"optimizer\": \"rmsprop\",\n\"alpha\": 0.01,\n\"max_iter\": 3,\n\"batch_size\": 320,\n\"learning_rate\": 0.15,\n\"init_param\": {\n\"init_method\": \"random_uniform\"\n}\n}\n},\n\"role\": {\n\"guest\": {\n\"0\": {\n\"reader_0\": {\n\"table\": {\"name\": \"breast_hetero_guest\", \"namespace\": \"experiment\"}\n},\n\"data_transform_0\":{\n\"with_label\": true,\n\"label_name\": \"y\",\n\"label_type\": \"int\",\n\"output_format\": \"dense\"\n}\n}\n},\n\"host\": {\n\"0\": {\n\"reader_0\": {\n\"table\": {\"name\": \"breast_hetero_host\", \"namespace\": \"experiment\"}\n},\n\"data_transform_0\":{\n\"with_label\": false,\n\"output_format\": \"dense\"\n}\n}\n}\n}\n}\n</code></pre>"},{"location":"fate_flow_job_scheduling/#5-multi-host-configuration","title":"5. Multi-Host Configuration","text":"<p>Multi-Host task should list all host information under role</p> <p>Example:</p> <pre><code>\"role\": {\n\"guest\": [\n10000\n],\n\"host\": [\n10000, 10001, 10002\n],\n\"arbiter\": [\n10000\n]\n}\n</code></pre> <p>The different configurations for each host should be listed separately under their respective corresponding modules</p> <p>Example:</p> <pre><code>\"component_parameters\": {\n\"role\": {\n\"host\": {\n\"0\": {\n\"reader_0\": {\n\"table\":\n{\n\"name\": \"hetero_breast_host_0\",\n\"namespace\": \"hetero_breast_host\"\n}\n}\n},\n\"1\": {\n\"reader_0\": {\n\"table\":\n{\n\"name\": \"hetero_breast_host_1\",\n\"namespace\": \"hetero_breast_host\"\n}\n}\n},\n\"2\": {\n\"reader_0\": {\n\"table\":\n{\n\"name\": \"hetero_breast_host_2\",\n\"namespace\": \"hetero_breast_host\"\n}\n}\n}\n}\n}\n}\n</code></pre>"},{"location":"fate_flow_job_scheduling/#6-predictive-task-configuration","title":"6. Predictive Task Configuration","text":""},{"location":"fate_flow_job_scheduling/#61-description","title":"6.1 Description","text":"<p>DSL V2 does not automatically generate prediction dsl for the training task. Users need to deploy the modules in the required model using <code>Flow Client</code> first. For detailed command description, please refer to fate_flow_client</p> <pre><code>flow model deploy --model-id $model_id --model-version $model_version --cpn-list ...\n</code></pre> <p>Optionally, the user can add new modules to the prediction dsl, such as <code>Evaluation</code></p>"},{"location":"fate_flow_job_scheduling/#62-sample","title":"6.2 Sample","text":"<p>Training dsl.</p> <pre><code>\"components\": {\n\"reader_0\": {\n\"module\": \"Reader\",\n\"output\": {\n\"data\": [\n\"data\"\n]\n}\n},\n\"data_transform_0\": {\n\"module\": \"DataTransform\",\n\"input\": {\n\"data\": {\n\"data\": [\n\"reader_0.data\"\n]\n}\n},\n\"output\": {\n\"data\": [\n\"data\"\n],\n\"model\": [\n\"model\"\n]\n}\n},\n\"intersection_0\": {\n\"module\": \"Intersection\",\n\"input\": {\n\"data\": {\n\"data\": [\n\"data_transform_0.data\"\n]\n}\n},\n\"output\": {\n\"data\":[\n\"data\"\n]\n}\n},\n\"hetero_nn_0\": {\n\"module\": \"HeteroNN\",\n\"input\": {\n\"data\": {\n\"train_data\": [\n\"intersection_0.data\"\n]\n}\n},\n\"output\": {\n\"data\": [\n\"data\"\n],\n\"model\": [\n\"model\"\n]\n}\n}\n}\n</code></pre> <p>Prediction dsl:</p> <pre><code>\"components\": {\n\"reader_0\": {\n\"module\": \"Reader\",\n\"output\": {\n\"data\": [\n\"data\"\n]\n}\n},\n\"data_transform_0\": {\n\"module\": \"DataTransform\",\n\"input\": {\n\"data\": {\n\"data\": [\n\"reader_0.data\"\n]\n}\n},\n\"output\": {\n\"data\": [\n\"data\"\n],\n\"model\": [\n\"model\"\n]\n}\n},\n\"intersection_0\": {\n\"module\": \"Intersection\",\n\"input\": {\n\"data\": {\n\"data\": [\n\"data_transform_0.data\"\n]\n}\n},\n\"output\": {\n\"data\":[\n\"data\"\n]\n}\n},\n\"hetero_nn_0\": {\n\"module\": \"HeteroNN\",\n\"input\": {\n\"data\": {\n\"train_data\": [\n\"intersection_0.data\"\n]\n}\n},\n\"output\": {\n\"data\": [\n\"data\"\n],\n\"model\": [\n\"model\"\n]\n}\n},\n\"evaluation_0\": {\n\"module\": \"Evaluation\",\n\"input\": {\n\"data\": {\n\"data\": [\n\"hetero_nn_0.data\"\n]\n}\n},\n\"output\": {\n\"data\": [\n\"data\"\n]\n}\n}\n}\n</code></pre>"},{"location":"fate_flow_job_scheduling/#7-job-reruns","title":"7. Job reruns","text":"<p>In <code>1.5.0</code>, we started to support re-running a job, but only failed jobs are supported. Version <code>1.7.0</code> supports rerunning of successful jobs, and you can specify which component to rerun from, the specified component and its downstream components will be rerun, but other components will not be rerun</p> <p>Rerun a job</p> <pre><code>flow job rerun [options]\n</code></pre> <p>Options</p> <p>| parameter name | required | type | description | | :------------- | :------- | :--- | ----------- |------- | | -j, --job-id | yes | string | job id path | | --cpn, --component-name | no | string | Specifies which component to rerun from, unspecified components will not be executed if they have no upstream dependencies on the specified component; if not specified, the entire job will be rerun | | --force | no | bool | The job will be rerun even if it succeeds; if not specified, the job will be skipped if it succeeds |</p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message jobId string Job ID data dict return data <p>Example</p> <pre><code>flow job rerun -j 202111031100369723120\n</code></pre> <pre><code>flow job rerun -j 202111031100369723120 -cpn hetero_lr_0\n</code></pre> <pre><code>flow job rerun -j 202111031100369723120 -cpn hetero_lr_0 --force </code></pre>"},{"location":"fate_flow_job_scheduling/#8-job-parameter-update","title":"8. Job parameter update","text":"<p>In the actual production modeling process, it is necessary to constantly debug the component parameters and rerun, but not all components need to be adjusted and rerun at this time, so after <code>1.7.0</code> version support to modify a component parameter update, and with the <code>rerun</code> command on-demand rerun</p> <p>Update the job parameters</p> <pre><code>flow job parameter-update [options]\n</code></pre> <p>Options</p> parameter-name required type description -j, --job-id yes string job id path -c, --conf-path yes string The contents of the job conf that needs to be updated, no need to fill in parameters that don't need to be updated <p>Returns</p> parameter name type description retcode int return code retmsg string return message jobId string Job ID data dict Returns the updated job conf <p>Example</p> <p>Assuming that the job is updated with some of the execution parameters of the hetero_lr_0 component, the configuration file is as follows. <pre><code>{\n\"job_parameters\": {\n},\n  \"component_parameters\": {\n\"common\": {\n\"hetero_lr_0\": {\n\"alpha\": 0.02,\n        \"max_iter\": 5\n}\n}\n}\n}\n</code></pre></p> <p>Execution of the following command takes effect.</p> <pre><code>flow job parameter-update -j 202111061957421943730 -c examples/other/update_parameters.json\n</code></pre> <p>Execute the following command to rerun.</p> <pre><code>flow job rerun -j 202111061957421943730 -cpn hetero_lr_0 --force </code></pre>"},{"location":"fate_flow_job_scheduling/#9-job-scheduling-policy","title":"9. Job scheduling policy","text":"<ul> <li>Queuing by commit time</li> <li>Currently, only FIFO policy is supported, i.e. the scheduler will only scan the first job each time, if the first job is successful in requesting resources, it will start and get out of the queue, if the request fails, it will wait for the next round of scheduling.</li> </ul>"},{"location":"fate_flow_job_scheduling/#10-dependency-distribution","title":"10. dependency distribution","text":"<p>Brief description: </p> <ul> <li>Support for distributing fate and python dependencies from client nodes;</li> <li>The work node does not need to deploy fate;</li> <li>Only fate on spark supports distribution mode in current version;</li> </ul> <p>Related parameters configuration:</p> <p>conf/service_conf.yaml:</p> <pre><code>dependent_distribution: true\n</code></pre> <p>fate_flow/settings.py</p> <pre><code>FATE_FLOW_UPDATE_CHECK = False\n</code></pre> <p>Description:</p> <ul> <li> <p>dependent_distribution: dependent distribution switch;, off by default; when off, you need to deploy fate on each work node, and also fill in the configuration of spark in spark-env.sh to configure PYSPARK_DRIVER_PYTHON and PYSPARK_PYTHON.</p> </li> <li> <p>FATE_FLOW_UPDATE_CHECK: Dependency check switch, turned off by default; it will automatically check if the fate code has changed every time a task is submitted; if it has changed, the fate code dependency will be re-uploaded;</p> </li> </ul>"},{"location":"fate_flow_job_scheduling/#11-more-commands","title":"11. More commands","text":"<p>Please refer to Job CLI and Task CLI</p>"},{"location":"fate_flow_model_migration/","title":"Inter-cluster Model Migration","text":"<p>The model migration function makes it possible to copy the model file to a cluster with a different <code>party_id</code> and still have it available.</p> <ol> <li>the cluster of any of the model generation participants is redeployed and the <code>party_id</code> of the cluster is changed after the deployment, e.g. the source participant is <code>arbiter-10000#guest-9999#host-10000</code>, changed to <code>arbiter-10000#guest-99#host-10000</code></li> <li>Any one or more of the participants will copy the model file from the source cluster to the target cluster, which needs to be used in the target cluster</li> </ol> <p>Basics. 1. In the above two scenarios, the participant <code>party_id</code> of the model changes, such as <code>arbiter-10000#guest-9999#host-10000</code> -&gt; <code>arbiter-10000#guest-99#host-10000</code>, or <code>arbiter-10000#guest -9999#host-10000</code> -&gt; <code>arbiter-100#guest-99#host-100</code> 2. the model's participant <code>party_id</code> changes, so <code>model_id</code> and the model file involving <code>party_id</code> need to be changed 3. The overall process has three steps: copy and transfer the original model file, execute the model migration task on the original model file, and import the new model generated by the model migration task. 4. where execute model migration task on the original model file is actually a temporary copy of the original model file at the execution, and then modify <code>model_id</code> and the contents of the model file involving <code>party_id</code> according to the configuration, in order to adapt to the new participant <code>party_id</code>. 5. All the above steps need to be performed on all new participants, even if the <code>party_id</code> of one of the target participants has not changed. 6. the new participant cluster version needs to be greater than or equal to <code>1.5.1</code>.</p> <p>The migration process is as follows.</p>"},{"location":"fate_flow_model_migration/#transfer-the-model-file","title":"Transfer the model file","text":"<p>Please package and transfer the model files (including the directory named by model id) generated by the machine where the source participant fate flow service is located to the machine where the target participant fate flow is located, and please transfer the model files to a fixed directory as follows.</p> <pre><code>$FATE_PROJECT_BASE/model_local_cache\n</code></pre> <p>Instructions: 1. just transfer the folder, if you do the transfer by compressing and packing, please extract the model files to the directory where the model is located after the transfer. 2. Please transfer the model files one by one according to the source participants.</p>"},{"location":"fate_flow_model_migration/#preparation-work-before-migration","title":"Preparation work before migration","text":""},{"location":"fate_flow_model_migration/#instructions","title":"Instructions","text":"<ol> <li>refer to fate flow client to install the client fate-client which supports model migration, only fate 1.5.1 and above are supported.</li> </ol>"},{"location":"fate_flow_model_migration/#execute-the-migration-task","title":"Execute the migration task","text":""},{"location":"fate_flow_model_migration/#description","title":"Description","text":"<ol> <li> <p>Execute the migration task by replacing the source model file with <code>model_id</code>, <code>model_version</code> and the contents of the model involving <code>role</code> and <code>party_id</code> according to the migration task configuration file</p> </li> <li> <p>The cluster submitting the task must complete the above migration preparation</p> </li> </ol>"},{"location":"fate_flow_model_migration/#1-modify-the-configuration-file","title":"1. Modify the configuration file","text":"<p>Modify the configuration file of the migration task in the new participant (machine) according to the actual situation, as follows for the migration task example configuration file migrate_model.json</p> <pre><code>{\n\"job_parameters\": {\n\"federated_mode\": \"SINGLE\"\n},\n\"role\": {\n\"guest\": [9999],\n\"arbiter\": [10000],\n\"host\": [10000]\n},\n\"migrate_initiator\": {\n\"role\": \"guest\",\n\"party_id\": 99\n},\n\"migrate_role\": {\n\"guest\": [99],\n\"arbiter\": [100],\n\"host\": [100]\n},\n\"execute_party\": {\n\"guest\": [9999],\n\"arbiter\": [10000],\n\"host\": [10000]\n},\n\"model_id\": \"arbiter-10000#guest-9999#host-10000#model\",\n\"model_version\": \"202006171904247702041\",\n\"unify_model_version\": \"202901_0001\"\n}\n</code></pre> <p>Please save the above configuration content to a location in the server for modification.</p> <p>The following are explanatory notes for the parameters in this configuration.</p> <ol> <li><code>job_parameters</code>: The <code>federated_mode</code> in this parameter has two optional parameters, which are <code>MULTIPLE</code> and <code>SINGLE</code>. If set to <code>SINGLE</code>, the migration job will be executed only in the party that submitted the migration job, then the job needs to be submitted in all new participants separately; if set to <code>MULTIPLE</code>, the job will be distributed to the participants specified in <code>execute_party</code> to execute the job, only the new The task will be distributed to the participant specified in <code>execute_party</code>, and only needs to be submitted in the new participant as <code>migrate_initiator</code>.</li> <li><code>role</code>: This parameter fills in the <code>role</code> of the participant that generated the original model and its corresponding <code>party_id</code> information.</li> <li><code>migrate_initiator</code>: This parameter is used to specify the task initiator information of the migrated model, and the initiator's <code>role</code> and <code>party_id</code> should be specified respectively.</li> <li><code>migrate_role</code>: This parameter is used to specify the <code>role</code> and <code>party_id</code> information of the migrated model.</li> <li><code>execute_party</code>: This parameter is used to specify the <code>role</code> and <code>party_id</code> information of the <code>party_id</code> that needs to execute the migration, which is the source cluster <code>party_id</code>.</li> <li><code>model_id</code>: This parameter is used to specify the <code>model_id</code> of the original model to be migrated.</li> <li><code>model_version</code>: This parameter is used to specify the <code>model_version</code> of the original model that needs to be migrated.</li> <li><code>unify_model_version</code>: This parameter is not required, it is used to specify the <code>model_version</code> of the new model. If this parameter is not provided, the new model will take the <code>job_id</code> of the migrated job as its new <code>model_version</code>.</li> </ol> <p>Examples of the above configuration files are. 1. the source model has <code>guest: 9999, host: 10000, arbiter: 10000,</code> migrate the model to have <code>guest: 99, host: 100, arbiter: 100</code> as participants, and <code>guest: 99</code> as the new initiator 2. <code>federated_mode: SINGLE</code> means that each migration task will be executed only in the cluster where the task is submitted, then the task needs to be submitted in 99 and 100 respectively. 3. for example, if the task is executed at 99, then <code>execute_party</code> is configured as <code>\"guest\": [9999]</code>. 4. For example, if you execute at 100, then <code>execute_party</code> is configured as <code>\"arbiter\": [10000], \"host\": [10000]</code></p>"},{"location":"fate_flow_model_migration/#2-submit-migration-tasks-separate-operations-in-all-target-clusters","title":"2. Submit migration tasks (separate operations in all target clusters)","text":"<p>Migration tasks need to be committed using fate-client. A sample execution command is as follows.</p> <pre><code>flow model migrate -c $FATE_FLOW_BASE/examples/model/migrate_model.json\n</code></pre>"},{"location":"fate_flow_model_migration/#3-task-execution-results","title":"3. Task execution results","text":"<p>The following is the content of the configuration file for the actual migration task.</p> <pre><code>{\n\"job_parameters\": {\n\"federated_mode\": \"SINGLE\"\n},\n\"role\": {\n\"guest\": [9999],\n\"host\": [10000]\n},\n\"migrate_initiator\": {\n\"role\": \"guest\",\n\"party_id\": 99\n},\n\"migrate_role\": {\n\"guest\": [99],\n\"host\": [100]\n},\n\"execute_party\": {\n\"guest\": [9999],\n\"host\": [10000]\n},\n\"model_id\": \"guest-9999#host-10000#model\",\n\"model_version\": \"202010291539339602784\",\n\"unify_model_version\": \"fate_migration\"\n}\n</code></pre> <p>What this task achieves is to migrate the model with <code>model_id</code> of <code>guest-9999#host-10000#model</code> and <code>model_version</code> of <code>202010291539339602784</code> from a cluster with <code>party_id</code> of 9999 (guest) and 10000 (host) to a new model that fits the <code>party_id</code> of 99 (guest) and 100 (host) clusters</p> <p>The following is the result of a successful migration.</p> <pre><code>{\n\"data\": {\n\"detail\": {\n\"guest\": {\n\"9999\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. the configuration of model has been modified automatically. new model id is: guest-99#host-100#model, Model files can be found at '/data/projects/fate/temp/fate_flow/guest#99#guest-99#host-100#model_fate_migration.zip'.zip. migration.zip'.\"\n}\n},\n\"host\": {\n\"10000\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. The configuration of model has been modified automatically, Model files can be found at '/data/projects/fate/temp/fate_flow/host#100#guest-99#host-100#model_fate_migration.zip'.zip. migration.zip'.\"\n}\n}\n},\n\"guest\": {\n\"9999\": 0\n},\n\"host\": {\n\"10000\": 0\n}\n},\n\"jobId\": \"202010292152299793981\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre> <p>After the task is successfully executed, a copy of the migrated model zip file is generated in each of the executor's machines, and the path to this file can be obtained in the returned results. For example, the path of the post-migration model file for 9999 (guest) is: <code>/data/projects/fate/temp/fate_flow/guest#99#guest-99#host-100#model_fate_migration.zip</code> and for 10000 (host) The model file path is: <code>/data/projects/fate/temp/fate_flow/host#100#guest-99#host-100#model_fate_migration.zip</code>. The new <code>model_id</code> can be obtained from the return as well as the <code>model_version</code>.</p>"},{"location":"fate_flow_model_migration/#4-transferring-files-and-importing-separate-operation-in-all-target-clusters","title":"4. Transferring files and importing (separate operation in all target clusters)","text":"<p>After the migration task is successful, please manually transfer the newly generated model zip file to the fate flow machine of the target cluster. For example, the new model zip file generated by 9999 (guest) in point 3 needs to be transferred to the 99 (guest) machine. The zip file can be placed anywhere on the corresponding machine. Next, you need to configure the model import task, see import_model.json for the configuration file examples/import_model.json) (this configuration file is included in the zip file, please modify it according to the actual situation, do not use it directly).</p> <p>The following is an example of the configuration file for importing the migrated model in guest (99).</p> <pre><code>{\n\"role\": \"guest\",\n\"party_id\": 99,\n\"model_id\": \"guest-99#host-100#model\",\n\"model_version\": \"202010292152299793981\",\n\"file\": \"/data/projects/fate/python/temp/guest#99#guest-99#host-100#202010292152299793981.zip\"\n}\n</code></pre> <p>Please fill in the role <code>role</code>, the current party <code>party_id</code>, the new <code>model_id</code> and <code>model_version</code> of the migrated model, and the path to the zip file of the migrated model according to the actual situation.</p> <p>The following is a sample command to submit an imported model using fate-client.</p> <pre><code>flow model import -c $FATE_FLOW_BASE/examples/model/import_model.json\n</code></pre> <p>The import is considered successful when it returns the following.</p> <pre><code>{\n\"data\": {\n\"job_id\": \"202208261102212849780\",\n\"model_id\": \"arbiter-10000#guest-9999#host-10000#model\",\n\"model_version\": \"foobar\",\n\"party_id\": \"9999\",\n\"role\": \"guest\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre> <p>The migration task is now complete and the user can submit the task with the new <code>model_id</code> and <code>model_version</code> to perform prediction tasks with the migrated model.</p>"},{"location":"fate_flow_model_registry/","title":"Federated Model Registry","text":""},{"location":"fate_flow_model_registry/#1-description","title":"1. Description","text":"<p>Models trained by FATE are automatically saved locally and recorded in the FATE-Flow database. models saved after each component run are called Pipeline models, and models saved at regular intervals while the component is running are called Checkpoint models. checkpoint models can also be used for retrying after a component run is unexpectedly interrupted The Checkpoint model can also be used for \"breakpoints\" when a component is retrying after an unexpected interruption.</p> <p>Checkpoint model support has been added since 1.7.0 and is not saved by default. To enable it, add the callback <code>ModelCheckpoint</code> to the DSL.</p>"},{"location":"fate_flow_model_registry/#local-disk-storage","title":"Local disk storage","text":"<ul> <li> <p>Pipeline models are stored in <code>model_local_cache/&lt;party_model_id&gt;/&lt;model_version&gt;/variables/data/&lt;component_name&gt;/&lt;model_alias&gt;</code>.</p> </li> <li> <p>Checkpoint models are stored in <code>model_local_cache/&lt;party_model_id&gt;/&lt;model_version&gt;/checkpoint/&lt;component_name&gt;/&lt;step_index&gt;#&lt;step_name&gt;</code>.</p> </li> </ul>"},{"location":"fate_flow_model_registry/#remote-storage-engine","title":"Remote storage engine","text":"<p>Local disk is not reliable, so there is a risk of losing models. FATE-Flow supports exporting models to specified storage engines, importing from specified storage engines, and pushing models to engine storage when publishing models automatically.</p> <p>The storage engine supports Tencent Cloud Object Storage, MySQL and Redis, please refer to Storage Engine Configuration</p>"},{"location":"fate_flow_model_registry/#2-model","title":"2. Model","text":""},{"location":"fate_flow_model_registry/#load","title":"load","text":"<p>Load a model generated by <code>deploy</code> to Fate-Serving.</p> <pre><code>flow model load -c examples/model/publish_load_model.json\nflow model load -j &lt;job_id&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> Yes Config file path job_id <code>-j</code> <code>--job-id</code> Yes Job ID <p>Example</p> <pre><code>{\n\"data\": {\n\"detail\": {\n\"guest\": {\n\"9999\": {\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n},\n\"host\": {\n\"10000\": {\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n}\n},\n\"guest\": {\n\"9999\": 0\n},\n\"host\": {\n\"10000\": 0\n}\n},\n\"jobId\": \"202111091122168817080\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_model_registry/#bind","title":"bind","text":"<p>Bind a model generated by <code>deploy</code> to Fate-Serving.</p> <pre><code>flow model bind -c examples/model/bind_model_service.json\nflow model bind -c examples/model/bind_model_service.json -j &lt;job_id&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path job_id <code>-j</code> <code>--job-id</code> Yes Job ID <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"service id is 123\"\n}\n</code></pre>"},{"location":"fate_flow_model_registry/#import","title":"import","text":"<p>Import the model from a file or storage engine.</p> <pre><code>flow model import -c examples/model/import_model.json\nflow model import -c examples/model/restore_model.json --from-database\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path from_database <code>--from-database</code> Yes Import the model from storage engine <p>Example</p> <pre><code>{\n\"data\": {\n\"job_id\": \"202208261102212849780\",\n\"model_id\": \"arbiter-10000#guest-9999#host-10000#model\",\n\"model_version\": \"foobar\",\n\"party_id\": \"9999\",\n\"role\": \"guest\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_model_registry/#export","title":"export","text":"<p>Export the model to a file or storage engine.</p> <pre><code>flow model export -c examples/model/export_model.json\nflow model export -c examples/model/store_model.json --to-database\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path to_database <code>--to-database</code> Yes Export the model to storage engine <p>Example</p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://127.0.0.1:8080/index.html#/dashboard?job_id=202111091124582110490&amp;role=local&amp;party_id=0\",\n\"code\": 0,\n\"dsl_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/job_dsl.json\",\n\"job_id\": \"202111091124582110490\",\n\"logs_directory\": \"/root/Codes/FATE-Flow/logs/202111091124582110490\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"local-0#model\",\n\"model_version\": \"202111091124582110490\"\n},\n\"pipeline_dsl_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/local/0/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/train_runtime_conf.json\"\n},\n\"jobId\": \"202111091124582110490\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_model_registry/#migrate","title":"migrate","text":"<p>Migrate the model.</p> <pre><code>flow model migrate -c examples/model/migrate_model.json\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path <p>Example</p> <pre><code>{\n\"data\": {\n\"arbiter\": {\n\"10000\": 0\n},\n\"detail\": {\n\"arbiter\": {\n\"10000\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. The Config of model has been modified automatically. New model id is: arbiter-100#guest-99#host-100#model, model version is: 202111091127392613050. Model files can be found at '/root/Codes/FATE-Flow/temp/fate_flow/arbiter#100#arbiter-100#guest-99#host-100#model_202111091127392613050.zip'.\"\n}\n},\n\"guest\": {\n\"9999\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. The Config of model has been modified automatically. New model id is: arbiter-100#guest-99#host-100#model, model version is: 202111091127392613050. Model files can be found at '/root/Codes/FATE-Flow/temp/fate_flow/guest#99#arbiter-100#guest-99#host-100#model_202111091127392613050.zip'.\"\n}\n},\n\"host\": {\n\"10000\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. The Config of model has been modified automatically. New model id is: arbiter-100#guest-99#host-100#model, model version is: 202111091127392613050. Model files can be found at '/root/Codes/FATE-Flow/temp/fate_flow/host#100#arbiter-100#guest-99#host-100#model_202111091127392613050.zip'.\"\n}\n}\n},\n\"guest\": {\n\"9999\": 0\n},\n\"host\": {\n\"10000\": 0\n}\n},\n\"jobId\": \"202111091127392613050\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_model_registry/#tag-list","title":"tag-list","text":"<p>List tags of the model.</p> <pre><code>flow model tag-list -j &lt;job_id&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description job_id <code>-j</code> <code>--job_id</code> No Job ID"},{"location":"fate_flow_model_registry/#tag-model","title":"tag-model","text":"<p>Add or remove a tag from the model.</p> <pre><code>flow model tag-model -j &lt;job_id&gt; -t &lt;tag_name&gt;\nflow model tag-model -j &lt;job_id&gt; -t &lt;tag_name&gt; --remove\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description job_id <code>-j</code> <code>--job_id</code> No Job ID tag_name <code>-t</code> <code>--tag-name</code> No Tag name remove <code>--remove</code> Yes Remove the tag"},{"location":"fate_flow_model_registry/#deploy","title":"deploy","text":"<p>Configure predict DSL.</p> <pre><code>flow model deploy --model-id &lt;model_id&gt; --model-version &lt;model_version&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version cpn_list <code>--cpn-list</code> Yes Components list cpn_path <code>--cpn-path</code> Yes Load components list from a file dsl_path <code>--dsl-path</code> Yes Predict DSL file path cpn_step_index <code>--cpn-step-index</code> Yes Specify a checkpoint model to replace the pipeline modelUse <code>:</code> to separate component name and step indexE.g. <code>--cpn-step-index cpn_a:123</code> cpn_step_name <code>--cpn-step-name</code> Yes Specify a checkpoint model to replace the pipeline model.Use <code>:</code> to separate component name and step nameE.g. <code>--cpn-step-name cpn_b:foobar</code> <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\",\n\"data\": {\n\"model_id\": \"arbiter-9999#guest-10000#host-9999#model\",\n\"model_version\": \"202111032227378766180\",\n\"arbiter\": {\n\"party_id\": 9999\n},\n\"guest\": {\n\"party_id\": 10000\n},\n\"host\": {\n\"party_id\": 9999\n},\n\"detail\": {\n\"arbiter\": {\n\"party_id\": {\n\"retcode\": 0,\n\"retmsg\": \"deploy model of role arbiter 9999 success\"\n}\n},\n\"guest\": {\n\"party_id\": {\n\"retcode\": 0,\n\"retmsg\": \"deploy model of role guest 10000 success\"\n}\n},\n\"host\": {\n\"party_id\": {\n\"retcode\": 0,\n\"retmsg\": \"deploy model of role host 9999 success\"\n}\n}\n}\n}\n}\n</code></pre>"},{"location":"fate_flow_model_registry/#get-predict-dsl","title":"get-predict-dsl","text":"<p>Get predict DSL of the model.</p> <pre><code>flow model get-predict-dsl --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; -o ./examples/\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version output_path <code>-o</code> <code>--output-path</code> No Output path"},{"location":"fate_flow_model_registry/#get-predict-conf","title":"get-predict-conf","text":"<p>Get the template of predict config.</p> <pre><code>flow model get-predict-conf --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; -o ./examples/\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version output_path <code>-o</code> <code>--output-path</code> No Output path"},{"location":"fate_flow_model_registry/#get-model-info","title":"get-model-info","text":"<p>Get model information.</p> <pre><code>flow model get-model-info --model-id &lt;model_id&gt; --model-version &lt;model_version&gt;\nflow model get-model-info --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; --detail\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version role <code>-r</code> <code>--role</code> Yes Party role party_id <code>-p</code> <code>--party-id</code> Yes Party ID detail <code>--detail</code> Yes Display detailed information"},{"location":"fate_flow_model_registry/#homo-convert","title":"homo-convert","text":"<p>Convert trained homogenous model to the format of another ML framework.</p> <pre><code>flow model homo-convert -c examples/model/homo_convert_model.json\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path"},{"location":"fate_flow_model_registry/#homo-deploy","title":"homo-deploy","text":"<p>Deploy trained homogenous model to a target online serving system. Currently the supported target serving system is KFServing.</p> <pre><code>flow model homo-deploy -c examples/model/homo_deploy_model.json\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path"},{"location":"fate_flow_model_registry/#3-checkpoint","title":"3. Checkpoint","text":""},{"location":"fate_flow_model_registry/#list","title":"list","text":"<p>List checkpoints.</p> <pre><code>flow checkpoint list --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; --role &lt;role&gt; --party-id &lt;party_id&gt; --component-name &lt;component_name&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version role <code>-r</code> <code>--role</code> No Party role party_id <code>-p</code> <code>--party-id</code> No Party ID component_name <code>-cpn</code> <code>--component-name</code> No Component name <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\",\n\"data\": [\n{\n\"create_time\": \"2021-11-07T02:34:54.683015\",\n\"step_index\": 0,\n\"step_name\": \"step_name\",\n\"models\": {\n\"HeteroLogisticRegressionMeta\": {\n\"buffer_name\": \"LRModelMeta\",\n\"sha1\": \"6871508f6e6228341b18031b3623f99a53a87147\"\n},\n\"HeteroLogisticRegressionParam\": {\n\"buffer_name\": \"LRModelParam\",\n\"sha1\": \"e3cb636fc93675684bff27117943f5bfa87f3029\"\n}\n}\n}\n]\n}\n</code></pre>"},{"location":"fate_flow_model_registry/#get","title":"get","text":"<p>Get checkpoint information.</p> <pre><code>flow checkpoint get --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; --role &lt;role&gt; --party-id &lt;party_id&gt; --component-name &lt;component_name&gt; --step-index &lt;step_index&gt;\n</code></pre> <p>Example</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version role <code>-r</code> <code>--role</code> No Party role party_id <code>-p</code> <code>--party-id</code> No Party ID component_name <code>-cpn</code> <code>--component-name</code> No Component name step_index <code>--step-index</code> Yes Step index, cannot be used with <code>step_name</code> step_name <code>--step-name</code> Yes Step name, cannot be used with <code>step_index</code> <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\",\n\"data\": {\n\"create_time\": \"2021-11-07T02:34:54.683015\",\n\"step_index\": 0,\n\"step_name\": \"step_name\",\n\"models\": {\n\"HeteroLogisticRegressionMeta\": \"CgJMMhEtQxzr4jYaPxkAAAAAAADwPyIHcm1zcHJvcDD///////////8BOTMzMzMzM8M/QApKBGRpZmZYAQ==\",\n\"HeteroLogisticRegressionParam\": \"Ig0KAng3EW1qASu+uuO/Ig0KAng0EcNi7a65ReG/Ig0KAng4EbJbl4gvVea/Ig0KAng2EcZwlVZTkOu/Ig0KAngwEVpG8dCbGvG/Ig0KAng5ESJNTx5MLve/Ig0KAngzEZ88H9P8qfO/Ig0KAng1EVfWP8JJv/K/Ig0KAngxEVS0xVXoTem/Ig0KAngyEaApgW32Q/K/KSiiE8AukPs/MgJ4MDICeDEyAngyMgJ4MzICeDQyAng1MgJ4NjICeDcyAng4MgJ4OUj///////////8B\"\n}\n}\n}\n</code></pre>"},{"location":"fate_flow_model_registry/#4-storage-engine-configuration","title":"4. Storage engine configuration","text":""},{"location":"fate_flow_model_registry/#enable_model_store","title":"<code>enable_model_store</code>","text":"<p>This option affects API <code>/model/load</code>.</p> <p>Automatic upload models to the model store if it exists locally but does not exist in the model storage, or download models from the model store if it does not exist locally but does not exist in the model storage.</p> <p>This option does not affect API <code>/model/store</code> or <code>/model/restore</code>.</p>"},{"location":"fate_flow_model_registry/#model_store_address","title":"<code>model_store_address</code>","text":"<p>This config defines which storage engine to use.</p>"},{"location":"fate_flow_model_registry/#tencent-cloud-object-storage","title":"Tencent Cloud Object Storage","text":"<pre><code>storage: tencent_cos\n# get these configs from Tencent Cloud console\nRegion:\nSecretId:\nSecretKey:\nBucket:\n</code></pre>"},{"location":"fate_flow_model_registry/#mysql","title":"MySQL","text":"<pre><code>storage: mysql\ndatabase: fate_model\nuser: fate\npassword: fate\nhost: 127.0.0.1\nport: 3306\n# other optional configs send to the engine\nmax_connections: 10\nstale_timeout: 10\n</code></pre>"},{"location":"fate_flow_model_registry/#redis","title":"Redis","text":"<pre><code>storage: redis\nhost: 127.0.0.1\nport: 6379\ndb: 0\npassword:\n# the expiry time of keys, in seconds. defaults None (no expiry time)\nex:\n</code></pre>"},{"location":"fate_flow_monitoring/","title":"Real-Time Monitoring","text":""},{"location":"fate_flow_monitoring/#1-description","title":"1. Description","text":"<p>Mainly introduces <code>FATE Flow</code> to monitor job running status, Worker execution status, etc., in real time to ensure final consistency</p>"},{"location":"fate_flow_permission_management/","title":"Fate flow permission management","text":""},{"location":"fate_flow_permission_management/#multi-party-cooperation-rights-management","title":"Multi-party cooperation rights management","text":""},{"location":"fate_flow_permission_management/#1-description","title":"1. Description","text":"<ul> <li> <p>fateflow permission authentication supports both flow's own authentication and third-party authentication</p> </li> <li> <p>Authentication configuration: <code>$FATE_BASE/conf/service_conf.yaml</code>.</p> </li> </ul> <p><pre><code>hook_module:\npermission: fate_flow.hook.flow.permission\nhook_server_name:\npermission:\nswitch: false\ncomponent: false\ndataset: false\n</code></pre>   The permission hooks support both \"fate_flow.hook.flow.permission\" and \"fate_flow.hook.api.permission\".</p>"},{"location":"fate_flow_permission_management/#2-permission-authentication","title":"2. Permission authentication","text":""},{"location":"fate_flow_permission_management/#21-flow-permission-authentication","title":"2.1 flow permission authentication","text":""},{"location":"fate_flow_permission_management/#211-authentication-scheme","title":"2.1.1 Authentication scheme","text":"<ul> <li>The flow permission authentication scheme uses the casbin permission control framework and supports both component and dataset permissions.</li> <li>The configuration is as follows. <pre><code>  hook_module:\npermission: fate_flow.hook.flow.permission\npermission:\nswitch: true\ncomponent: true\ndataset: true\n</code></pre></li> </ul>"},{"location":"fate_flow_permission_management/#212-authorization","title":"2.1.2 Authorization","text":"<p>Add privileges</p> <pre><code>flow privilege grant -c fateflow/examples/permission/grant.json\n</code></pre> <p>Options</p> parameter name required type description party_id yes string site id component no string component name, can be split by \",\" for multiple components, \"*\" for all components dataset no object list of datasets <p>sample <pre><code>{\n\"party_id\": 10000,\n\"component\": \"reader,dataio\",\n\"dataset\": [\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\"\n},\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_host\"\n}\n]\n}\n</code></pre></p> <p>return</p> parameter name type description retcode int return code retmsg string return message <p>Sample</p> <pre><code>{\n\"retcode\": 0,\n    \"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_permission_management/#213-revoke-privileges","title":"2.1.3 Revoke privileges","text":"<p>Delete permissions</p> <p><pre><code>flow privilege delete -c fateflow/examples/permission/delete.json\n</code></pre> Options</p> parameter name required type description party_id yes string site_id component no string component name, can be split by \",\" for multiple components, \"*\" for all components dataset no object list of datasets, \"*\" is all datasets <p>sample <pre><code>{\n\"party_id\": 10000,\n\"component\": \"reader,dataio\",\n\"dataset\": [\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\"\n},\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_host\"\n}\n]\n}\n</code></pre></p> <p>return</p> parameter name type description retcode int return code retmsg string return message <p>Sample</p> <pre><code>{\n\"retcode\": 0,\n    \"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_permission_management/#214-permission-query","title":"2.1.4 Permission query","text":"<p>Query permissions</p> <pre><code>flow privilege query -p 10000\n</code></pre> <p>Options</p> parameters short-format long-format required type description party_id <code>-p</code> <code>--party-id</code> yes string site id <p>returns</p> parameter name type description retcode int return-code retmsg string Return information data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"component\": [\n\"reader\",\n\"dataio\"\n],\n\"dataset\": [\n{\n\"name\": \"breast_hetero_guest\",\n\"namespace\": \"experiment\"\n},\n{\n\"name\": \"breast_hetero_host\",\n\"namespace\": \"experiment\"\n}\n]\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_permission_management/#22-third-party-interface-privilege-authentication","title":"2.2 Third-party interface privilege authentication","text":"<ul> <li>Third party services need to authenticate to the flow privilege interface, refer to privilege authentication service registration</li> <li>If the authentication fails, flow will directly return the authentication failure to the partner.</li> </ul>"},{"location":"fate_flow_resource_management/","title":"Multi-Party Resource Coordination","text":""},{"location":"fate_flow_resource_management/#1-description","title":"1. Description","text":"<p>Resources refer to the basic engine resources, mainly CPU resources and memory resources of the compute engine, CPU resources and network resources of the transport engine, currently only the management of CPU resources of the compute engine is supported</p>"},{"location":"fate_flow_resource_management/#2-total-resource-allocation","title":"2. Total resource allocation","text":"<ul> <li>The current version does not automatically get the resource size of the base engine, so you configure it through the configuration file <code>$FATE_PROJECT_BASE/conf/service_conf.yaml</code>, that is, the resource size of the current engine allocated to the FATE cluster</li> <li><code>FATE Flow Server</code> gets all the base engine information from the configuration file and registers it in the database table <code>t_engine_registry</code> when it starts.</li> <li><code>FATE Flow Server</code> has been started and the resource configuration can be modified by restarting <code>FATE Flow Server</code> or by reloading the configuration using the command: <code>flow server reload</code>.</li> <li><code>total_cores</code> = <code>nodes</code> * <code>cores_per_node</code></li> </ul> <p>Example</p> <p>fate_on_standalone: is for executing a standalone engine on the same machine as <code>FATE Flow Server</code>, generally used for fast experiments, <code>nodes</code> is generally set to 1, <code>cores_per_node</code> is generally the number of CPU cores of the machine, also can be moderately over-provisioned</p> <pre><code>fate_on_standalone:\nstandalone:\ncores_per_node: 20\nnodes: 1\n</code></pre> <p>fate_on_eggroll: configured based on the actual deployment of <code>EggRoll</code> cluster, <code>nodes</code> denotes the number of <code>node manager</code> machines, <code>cores_per_node</code> denotes the average number of CPU cores per <code>node manager</code> machine</p> <pre><code>fate_on_eggroll:\nclustermanager:\ncores_per_node: 16\nnodes: 1\nrollsite:\nhost: 127.0.0.1\nport: 9370\n</code></pre> <p>fate_on_spark: configured based on the resources allocated to the <code>FATE</code> cluster in the <code>Spark</code> cluster, <code>nodes</code> indicates the number of <code>Spark</code> nodes, <code>cores_per_node</code> indicates the average number of CPU cores per node allocated to the <code>FATE</code> cluster</p> <pre><code>fate_on_spark:\nspark:\n# default use SPARK_HOME environment variable\nhome:\ncores_per_node: 20\nnodes: 2\n</code></pre> <p>Note: Please make sure that the <code>Spark</code> cluster allocates the corresponding amount of resources to the <code>FATE</code> cluster, if the <code>Spark</code> cluster allocates less resources than the resources configured in <code>FATE</code> here, then it will be possible to submit the <code>FATE</code> job, but when <code>FATE Flow</code> submits the task to the <code>Spark</code> cluster, the task will not actually execute because the <code>Spark</code> cluster has insufficient resources. Insufficient resources, the task is not actually executed</p>"},{"location":"fate_flow_resource_management/#3-job-request-resource-configuration","title":"3. Job request resource configuration","text":"<p>We generally use <code>task_cores`'' and</code>task_parallelism`' to configure job request resources, such as</p> <pre><code>{\n\"job_parameters\": {\n\"common\": {\n\"job_type\": \"train\",\n\"task_cores\": 6,\n\"task_parallelism\": 2,\n\"computing_partitions\": 8,\n\"timeout\": 36000\n}\n}\n}\n</code></pre> <p>The total resources requested by the job are <code>task_cores</code> * <code>task_parallelism</code>. When creating a job, <code>FATE Flow</code> will distribute the job to each <code>party</code> based on the above configuration, running role, and the engine used by the party (via <code>$FATE_PROJECT_BASE/conf/service_conf .yaml#default_engines</code>), the actual parameters will be calculated as follows</p>"},{"location":"fate_flow_resource_management/#4-the-process-of-calculating-the-actual-parameter-adaptation-for-resource-requests","title":"4. The process of calculating the actual parameter adaptation for resource requests","text":"<ul> <li>Calculate <code>request_task_cores</code>:</li> <li>guest, host.<ul> <li><code>request_task_cores</code> = <code>task_cores</code></li> </ul> </li> <li> <p>arbiter, considering that the actual operation consumes very few resources: `request_task_cores</p> <ul> <li><code>request_task_cores</code> = 1</li> </ul> </li> <li> <p>Further calculate <code>task_cores_per_node</code>.</p> </li> <li> <p><code>task_cores_per_node\"</code> = max(1, <code>request_task_cores</code> / <code>task_nodes</code>)</p> </li> <li> <p>If <code>eggroll_run</code> or <code>spark_run</code> configuration resource is used in the above <code>job_parameters</code>, then the <code>task_cores</code> configuration is invalid; calculate <code>task_cores_per_node</code>.</p> <ul> <li><code>task_cores_per_node\"</code> = eggroll_run[\"eggroll.session.processors.per.node\"]</li> <li><code>task_cores_per_node\"</code> = spark_run[\"executor-cores\"]</li> </ul> </li> <li> <p>The parameter to convert to the adaptation engine (which will be presented to the compute engine for recognition when running the task).</p> </li> <li>fate_on_standalone/fate_on_eggroll:<ul> <li>eggroll_run[\"eggroll.session.processors.per.node\"] = <code>task_cores_per_node</code></li> </ul> </li> <li> <p>fate_on_spark:</p> <ul> <li>spark_run[\"num-executors\"] = <code>task_nodes</code></li> <li>spark_run[\"executor-cores\"] = <code>task_cores_per_node</code></li> </ul> </li> <li> <p>The final calculation can be seen in the job's <code>job_runtime_conf_on_party.json</code>, typically in <code>$FATE_PROJECT_BASE/jobs/$job_id/$role/$party_id/job_runtime_on_party_conf.json</code></p> </li> </ul>"},{"location":"fate_flow_resource_management/#5-resource-scheduling-policy","title":"5. Resource Scheduling Policy","text":"<ul> <li><code>total_cores</code> see total_resource_allocation</li> <li><code>apply_cores</code> see job_request_resource_configuration, <code>apply_cores</code> = <code>task_nodes</code> * <code>task_cores_per_node</code> * <code>task_parallelism</code></li> <li>If all participants apply for resources successfully (total_cores - apply_cores) &gt; 0, then the job applies for resources successfully</li> <li>If not all participants apply for resources successfully, then send a resource rollback command to the participants who have applied successfully, and the job fails to apply for resources</li> </ul>"},{"location":"fate_flow_resource_management/#6-related-commands","title":"6. Related commands","text":""},{"location":"fate_flow_resource_management/#query","title":"query","text":"<p>For querying fate system resources</p> <pre><code>flow resource query\n</code></pre> <p>Options </p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": {\n\"computing_engine_resource\": {\n\"f_cores\": 32,\n\"f_create_date\": \"2021-09-21 19:32:59\",\n\"f_create_time\": 1632223979564,\n\"f_engine_config\": {\n\"cores_per_node\": 32,\n\"nodes\": 1\n},\n\"f_engine_entrance\": \"fate_on_eggroll\",\n\"f_engine_name\": \"EGGROLL\",\n\"f_engine_type\": \"computing\",\n\"f_memory\": 0,\n\"f_nodes\": 1,\n\"f_remaining_cores\": 32,\n\"f_remaining_memory\": 0,\n\"f_update_date\": \"2021-11-08 16:56:38\",\n\"f_update_time\": 1636361798812\n},\n\"use_resource_job\": []\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_resource_management/#return","title":"return","text":"<p>Resources for returning a job</p> <pre><code>flow resource return [options]\n</code></pre> <p>Options </p> parameter name required type description job_id yes string job_id <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": [\n{\n\"job_id\": \"202111081612427726750\",\n\"party_id\": \"8888\",\n\"resource_in_use\": true,\n\"resource_return_status\": true,\n\"role\": \"guest\"\n}\n],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_server_operation/","title":"Server Operation","text":""},{"location":"fate_flow_server_operation/#1-description","title":"1. Description","text":"<p>Starting from version <code>1.7.0</code>, we provide some maintenance functions for <code>FATE Flow Server</code>, which will be further enhanced in future versions.</p>"},{"location":"fate_flow_server_operation/#2-view-version-information","title":"2. View version information","text":"<p>List all relevant system version numbers</p> <pre><code>flow server versions\n</code></pre> <p>Options</p> <p>None</p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow server versions\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"API\": \"v1\",\n\"CENTOS\": \"7.2\",\n\"EGGROLL\": \"2.4.0\",\n\"FATE\": \"1.7.0\",\n\"FATEBoard\": \"1.7.0\",\n\"FATEFlow\": \"1.7.0\",\n\"JDK\": \"8\",\n\"MAVEN\": \"3.6.3\",\n\"PYTHON\": \"3.6.5\",\n\"SPARK\": \"2.4.1\",\n\"UBUNTU\": \"16.04\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_server_operation/#3-reload-the-configuration-file","title":"3. Reload the configuration file","text":"<p>The following configuration items will take effect again after <code>reload</code></p> <ul> <li>All configurations after # engine services in $FATE_PROJECT_BASE/conf/service_conf.yaml</li> <li>All configurations in $FATE_FLOW_BASE/python/fate_flow/job_default_config.yaml</li> </ul> <pre><code>flow server reload\n</code></pre> <p>Options</p> <p>None</p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow server reload\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"job_default_config\": {\n\"auto_retries\": 0,\n\"auto_retry_delay\": 1,\n\"default_component_provider_path\": \"component_plugins/fate/python/federatedml\",\n\"end_status_job_scheduling_time_limit\": 300000,\n\"end_status_job_scheduling_updates\": 1,\n\"federated_command_trys\": 3,\n\"federated_status_collect_type\": \"PUSH\",\n\"job_timeout\": 259200,\n\"max_cores_percent_per_job\": 1,\n\"output_data_summary_count_limit\": 100,\n\"remote_request_timeout\": 30000,\n\"task_cores\": 4,\n\"task_memory\": 0,\n\"task_parallelism\": 1,\n\"total_cores_overweight_percent\": 1,\n\"total_memory_overweight_percent\": 1,\n\"upload_max_bytes\": 4194304000\n},\n\"service_registry\": null\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_service_registry/","title":"Service Registry","text":""},{"location":"fate_flow_service_registry/#1-description","title":"1. Description","text":""},{"location":"fate_flow_service_registry/#11-model-registry","title":"1.1 Model Registry","text":"<p>FATE-Flow interacts with FATE-Serving through Apache ZooKeeper. If <code>use_registry</code> is enabled in the configuration, Flow registers model download URLs with ZooKeeper when it starts, and Serving can get the models through these URLs.</p> <p>Likewise, Serving registers its own address with ZooKeeper, which Flow will fetch to communicate with. If <code>use_registry</code> is not enabled, Flow will try to communicate with the set <code>servings</code> address in the configuration file.</p>"},{"location":"fate_flow_service_registry/#12-high-availability","title":"1.2 High Availability","text":"<p>FATE-Flow implements automatic discovery of multiple nodes in the same party by registering its own IP and port with Apache ZooKeeper.</p>"},{"location":"fate_flow_service_registry/#2-configuring-the-zookeeper-service","title":"2. Configuring the ZooKeeper service","text":"<pre><code>zookeeper:\nhosts:\n- 127.0.0.1:2181\nuse_acl: false\nuser: fate\npassword: fate\n</code></pre>"},{"location":"fate_flow_service_registry/#3-znode","title":"3. ZNode","text":"<ul> <li> <p>FATE-Flow Model Registry: <code>/FATE-SERVICES/flow/online/transfer/providers</code></p> </li> <li> <p>FATE-Flow High Availability: <code>/FATE-COMPONENTS/fate-flow</code></p> </li> <li> <p>FATE-Serving: <code>/FATE-SERVICES/serving/online/publishLoad/providers</code></p> </li> </ul>"},{"location":"fate_flow_tracking/","title":"Data Flow Tracking","text":""},{"location":"fate_flow_tracking/#1-description","title":"1. Description","text":""},{"location":"fate_flow_tracking/#2-task-output-indicators","title":"2. Task output indicators","text":""},{"location":"fate_flow_tracking/#21-list-of-metrics","title":"2.1 List of metrics","text":"<p>Get a list of all metrics names generated by a component task</p> <pre><code>flow tracking metrics [options]\n</code></pre> <p>Options</p> parameter name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data <p>Example</p> <pre><code>flow tracking metrics -j 202111081618357358520 -r guest -p 9999 -cpn evaluation_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"train\": [\n\"hetero_lr_0\",\n\"hetero_lr_0_ks_fpr\",\n\"hetero_lr_0_ks_tpr\",\n\"hetero_lr_0_lift\",\n\"hetero_lr_0_gain\",\n\"hetero_lr_0_accuracy\",\n\"hetero_lr_0_precision\",\n\"hetero_lr_0_recall\",\n\"hetero_lr_0_roc\",\n\"hetero_lr_0_confusion_mat\",\n\"hetero_lr_0_f1_score\",\n\"hetero_lr_0_quantile_pr\"\n]\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_tracking/#22-all-metrics","title":"2.2 All metrics","text":"<p>Get all the output metrics for a component task</p> <pre><code>flow tracking metric-all [options]\n</code></pre> <p>Options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking metric-all -j 202111081618357358520 -r guest -p 9999 -cpn evaluation_0\n</code></pre> <p>Output (limited space, only some of the metric data is shown and some values are omitted in the middle of the array type data):</p> <pre><code>{\n\"data\": {\n\"train\": {\n\"hetero_lr_0\": {\n\"data\": [\n[\n\"auc\",\n0.293893\n],\n[\n\"ks\",\n0.0\n]\n],\n\"meta\": {\n\"metric_type\": \"EVALUATION_SUMMARY\",\n\"name\": \"hetero_lr_0\"\n}\n},\n\"hetero_lr_0_accuracy\": {\n\"data\": [\n[\n0.0,\n0.372583\n],\n[\n0.99,\n0.616872\n]\n],\n\"meta\": {\n\"curve_name\": \"hetero_lr_0\",\n\"metric_type\": \"ACCURACY_EVALUATION\",\n\"name\": \"hetero_lr_0_accuracy\",\n\"thresholds\": [\n0.999471,\n0.002577\n]\n}\n},\n\"hetero_lr_0_confusion_mat\": {\n\"data\": [],\n\"meta\": {\n\"fn\": [\n357,\n0\n],\n\"fp\": [\n0,\n212\n],\n\"metric_type\": \"CONFUSION_MAT\",\n\"name\": \"hetero_lr_0_confusion_mat\",\n\"thresholds\": [\n0.999471,\n0.0\n],\n\"tn\": [\n212,\n0\n],\n\"tp\": [\n0,\n357\n]\n}\n}\n}\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_tracking/#3-task-run-parameters","title":"3. Task run parameters","text":"<p>After the job is submitted, the system resolves the actual component task parameters based on the component_parameters in the job conf combined with the system default component parameters</p> <pre><code>flow tracking parameters [options]\n</code></pre> <p>Options</p> parameter_name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking parameters -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"ComponentParam\": {\n\"_feeded_deprecated_params\": [],\n\"_is_raw_conf\": false,\n\"_name\": \"HeteroLR#hetero_lr_0\",\n\"_user_feeded_params\": [\n\"batch_size\",\n\"penalty\",\n\"max_iter\",\n\"learning_rate\",\n\"init_param\",\n\"optimizer\",\n\"init_param.init_method\",\n\"alpha\"\n],\n\"alpha\": 0.01,\n\"batch_size\": 320,\n\"callback_param\": {\n\"callbacks\": [],\n\"early_stopping_rounds\": null,\n\"metrics\": [],\n\"save_freq\": 1,\n\"use_first_metric_only\": false,\n\"validation_freqs\": null\n},\n\"cv_param\": {\n\"history_value_type\": \"score\",\n\"mode\": \"hetero\",\n\"n_splits\": 5,\n\"need_cv\": false,\n\"output_fold_history\": true,\n\"random_seed\": 1,\n\"role\": \"guest\",\n\"shuffle\": true\n},\n\"decay\": 1,\n\"decay_sqrt\": true,\n\"early_stop\": \"diff\",\n\"early_stopping_rounds\": null,\n\"encrypt_param\": {\n\"key_length\": 1024,\n\"method\": \"Paillier\"\n},\n\"encrypted_mode_calculator_param\": {\n\"mode\": \"strict\",\n\"re_encrypted_rate\": 1\n},\n\"floating_point_precision\": 23,\n\"init_param\": {\n\"fit_intercept\": true,\n\"init_const\": 1,\n\"init_method\": \"random_uniform\",\n\"random_seed\": null\n},\n\"learning_rate\": 0.15,\n\"max_iter\": 3,\n\"metrics\": [\n\"auc\",\n\"ks\"\n],\n\"multi_class\": \"ovr\",\n\"optimizer\": \"rmsprop\",\n\"penalty\": \"L2\",\n\"predict_param\": {\n\"threshold\": 0.5\n},\n\"sqn_param\": {\n\"memory_M\": 5,\n\"random_seed\": null,\n\"sample_size\": 5000,\n\"update_interval_L\": 3\n},\n\"stepwise_param\": {\n\"direction\": \"both\",\n\"max_step\": 10,\n\"mode\": \"hetero\",\n\"need_stepwise\": false,\n\"nvmax\": null,\n\"nvmin\": 2,\n\"role\": \"guest\",\n\"score_name\": \"AIC\"\n},\n\"tol\": 0.0001,\n\"use_first_metric_only\": false,\n\"validation_freqs\": null\n},\n\"module\": \"HeteroLR\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_tracking/#4-task-output-data","title":"4. Task output data","text":""},{"location":"fate_flow_tracking/#41-download-output-data","title":"4.1 Download output data","text":"<p>Get the component output</p> <pre><code>flow tracking output-data [options]\n</code></pre> <p>options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl -o, --output-path yes string Path to output data <p>Returns</p> parameter name type description retcode int Return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking output-data -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0 -o . /\n</code></pre> <p>Output :</p> <pre><code>{\n\"retcode\": 0,\n\"directory\": \"$FATE_PROJECT_BASE/job_202111081618357358520_hetero_lr_0_guest_9999_output_data\",\n\"retmsg\": \"Download successfully, please check $FATE_PROJECT_BASE/job_202111081618357358520_hetero_lr_0_guest_9999_output_data directory \"\n}\n</code></pre>"},{"location":"fate_flow_tracking/#42-get-the-name-of-the-data-table-where-the-output-data-is-stored","title":"4.2 Get the name of the data table where the output data is stored","text":"<p>Get the output data table name of the component</p> <pre><code>flow tracking output-data-table [options]\n</code></pre> <p>options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking output-data-table -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>output:</p> <pre><code>{\n\"data\": [\n{\n\"data_name\": \"train\",\n\"table_name\": \"9688fa00406c11ecbd0bacde48001122\",\n\"table_namespace\": \"output_data_202111081618357358520_hetero_lr_0_0\"\n}\n],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_tracking/#5-task-output-model","title":"5. Task output model","text":"<p>Get the output model of a component task</p> <pre><code>flow tracking output-model [options]\n</code></pre> <p>options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking output-model -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"bestIteration\": -1,\n\"encryptedWeight\": {},\n\"header\": [\n\"x0\",\n\"x1\",\n\"x2\",\n\"x3\",\n\"x4\",\n\"x5\",\n\"x6\",\n\"x7\",\n\"x8\",\n\"x9\"\n],\n\"intercept\": 0.24451607054764884,\n\"isConverged\": false,\n\"iters\": 3,\n\"lossHistory\": [],\n\"needOneVsRest\": false,\n\"weight\": {\n\"x0\": 0.04639947589856569,\n\"x1\": 0.19899685467216902,\n\"x2\": -0.18133550931649306,\n\"x3\": 0.44928868756862206,\n\"x4\": 0.05285905125502288,\n\"x5\": 0.319187932844076,\n\"x6\": 0.42578983446194013,\n\"x7\": -0.025765956309895477,\n\"x8\": -0.3699194462271593,\n\"x9\": -0.1212094750908295\n}\n},\n\"meta\": {\n\"meta_data\": {\n\"alpha\": 0.01,\n\"batchSize\": \"320\",\n\"earlyStop\": \"diff\",\n\"fitIntercept\": true,\n\"learningRate\": 0.15,\n\"maxIter\": \"3\",\n\"needOneVsRest\": false,\n\"optimizer\": \"rmsprop\",\n\"partyWeight\": 0.0,\n\"penalty\": \"L2\",\n\"reEncryptBatches\": \"0\",\n\"revealStrategy\": \"\",\n\"tol\": 0.0001\n},\n\"module_name\": \"HeteroLR\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_tracking/#6-task-output-summary","title":"6. Task output summary","text":"<p>Each component allows to set some summary information for easy observation and analysis</p> <pre><code>flow tracking get-summary [options]\n</code></pre> <p>Options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking get-summary -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"best_iteration\": -1,\n\"coef\": {\n\"x0\": 0.04639947589856569,\n\"x1\": 0.19899685467216902,\n\"x2\": -0.18133550931649306,\n\"x3\": 0.44928868756862206,\n\"x4\": 0.05285905125502288,\n\"x5\": 0.319187932844076,\n\"x6\": 0.42578983446194013,\n\"x7\": -0.025765956309895477,\n\"x8\": -0.3699194462271593,\n\"x9\": -0.1212094750908295\n},\n\"intercept\": 0.24451607054764884,\n\"is_converged\": false,\n\"one_vs_rest\": false\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_tracking/#7-dataset-usage-tracking","title":"7. Dataset usage tracking","text":"<p>Tracing source datasets and their derived datasets, such as component task output datasets</p>"},{"location":"fate_flow_tracking/#71-source-table-query","title":"7.1 Source table query","text":"<p>For querying the parent and source tables of a table</p> <pre><code>flow table tracking-source [options]\n</code></pre> <p>Options</p> parameter-name required type description name yes string fate table name namespace yes string fate table namespace <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": [{\"parent_table_name\": \"61210fa23c8d11ec849a5254004fdc71\", \"parent_table_namespace\": \"output_data_202111031759294631020_hetero _lr_0_0\", \"source_table_name\": \"breast_hetero_guest\", \"source_table_namespace\": \"experiment\"}],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_tracking/#72-querying-with-table-tasks","title":"7.2 Querying with table tasks","text":"<p>For querying the usage of a particular table</p> <pre><code>flow table tracking-job [options]\n</code></pre> <p>Options</p> parameter name required type description name yes string fate table name namespace yes string fate table namespace <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": {\"count\":2, \"jobs\":[\"202111052115375327830\", \"202111031816501123160\"]},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"fate_flow_tracking/#8-developing-the-api","title":"8. Developing the API","text":""},{"location":"system_operational/","title":"System Operation","text":""},{"location":"system_operational/#1-description","title":"1. Description","text":""},{"location":"system_operational/#2-log-cleaning","title":"2. Log cleaning","text":""},{"location":"system_operational/#21-job-logs-n14-days","title":"2.1 Job logs (N=14 days)","text":"<ul> <li>Machine: the machine where fate flow is located</li> <li>Directory: ${FATE_PROJECT_BASE}/fateflow/logs/</li> <li>Rule: directory starts with $jobid, clean up the data before $jobid is N days</li> <li>Reference command.</li> </ul> <pre><code>rm -rf ${FATE_PROJECT_BASE}/fateflow/logs/20200417*\n</code></pre>"},{"location":"system_operational/#22-eggroll-session-logs-n14-days","title":"2.2 EggRoll Session logs (N=14 days)","text":"<ul> <li>Machine: eggroll node</li> <li>Directory: ${FATE_PROJECT_BASE}/eggroll/logs/</li> <li>Rule: directory starts with $jobid, clean up data before $jobid is N days</li> <li>Reference command.</li> </ul> <pre><code>rm -rf ${FATE_PROJECT_BASE}/eggroll/logs/20200417*\n</code></pre>"},{"location":"system_operational/#23-fateflow-system-logs-n14-days","title":"2.3 fateflow system logs (N=14 days)","text":"<ul> <li>Machine: fate flow machine</li> <li>Directory: ${FATE_PROJECT_BASE}/logs/fate_flow/</li> <li>Rule: Log file ends with yyyy-dd-mm, clean up data before N days</li> <li>Archive: log file ends with yyyy-dd-mm, archive to keep 180 days of logs</li> <li>Reference command.</li> </ul> <pre><code>rm -rf ${FATE_PROJECT_BASE}/logs/fate_flow/fate_flow_stat.log.2020-12-15\n</code></pre>"},{"location":"system_operational/#24-eggroll-system-logs-n14-days","title":"2.4 EggRoll system logs (N=14 days)","text":"<ul> <li>Machine: eggroll deployment machine</li> <li>Directory: ${FATE_PROJECT_BASE}/eggroll/logs/eggroll</li> <li>Rule: directory is yyyy/mm/dd, clean up data before N days</li> <li>Archive: directory is yyyy/mm/dd, archive the logs retained for 180 days</li> <li>Reference command.</li> </ul> <pre><code>rm -rf ${FATE_PROJECT_BASE}/eggroll/logs/2020/12/15/\n</code></pre>"},{"location":"system_operational/#3-data-cleanup","title":"3. Data cleanup","text":""},{"location":"system_operational/#31-calculate-temporary-data-n2-days","title":"3.1 Calculate temporary data (N=2 days)","text":"<ul> <li>Machine: eggroll node</li> <li>Directory: ${FATE_PROJECT_BASE}/eggroll/data/IN_MEMORY</li> <li>Rule: namespace starts with $jobid, clean up data before $jobid is N days</li> <li>Reference command.</li> </ul> <pre><code>rm -rf ${FATE_PROJECT_BASE}/eggroll/data/IN_MEMORY/20200417*\n</code></pre>"},{"location":"system_operational/#32-component-output-data-n14-days","title":"3.2 Component output data (N=14 days)","text":"<ul> <li>Machine: eggroll node</li> <li>Directory: ${FATE_PROJECT_BASE}/eggroll/data/LMDB</li> <li>Rule: namespace starts with output_data_$jobid, clean up $jobid for data before N days</li> <li>Reference command.</li> </ul> <pre><code>rm -rf ${FATE_PROJECT_BASE}/eggroll/data/LMDB/output_data_20200417*\n</code></pre>"},{"location":"third_party_service_registry/","title":"Third party service registry","text":""},{"location":"third_party_service_registry/#third-party-service-registration-center","title":"Third party service registration center","text":""},{"location":"third_party_service_registry/#1-description","title":"1. Description","text":"<ul> <li>fateflow supports third-party services for registration for callback scenarios</li> <li>All interfaces need to register the service address first, then register the interface</li> </ul>"},{"location":"third_party_service_registry/#2-registration","title":"2. Registration","text":""},{"location":"third_party_service_registry/#21-server-registration","title":"2.1 Server registration","text":"<ul> <li>uri: <code>/v1/server/&lt;server_name&gt;/register</code></li> <li>Method: POST</li> <li>Request Parameters</li> </ul> parameter name required type description host yes string service ip address port yes int service port <ul> <li>Return parameters</li> </ul> parameter name type description retcode int return code retmsg string return message"},{"location":"third_party_service_registry/#22-service-registration","title":"2.2 Service Registration","text":"<ul> <li>uri: <code>/v1/service/registry</code></li> <li>Method: POST</li> <li>Request Parameters </li> </ul> parameter name required type description server_name yes string The name of the registered server service_name yes string service name uri yes string service uri method no string Request method, default \"POST\" protocol no string default \"http\" <ul> <li>Return parameters</li> </ul> parameter name type description retcode int return code retmsg string Return information"},{"location":"third_party_service_registry/#3-interface-parameter-details","title":"3 Interface parameter details","text":""},{"location":"third_party_service_registry/#31-apireader","title":"3.1 ApiReader","text":"<p>The ApiReader component requires third-party services to register three interfaces: upload, query, download, which are used to request feature data for offline ids.</p>"},{"location":"third_party_service_registry/#311-upload","title":"3.1.1 upload","text":"<ul> <li>Description: upload interface passes the id to the third-party service</li> <li>Interface registration: refer to service registration, where the service_name parameter is \"upload\".</li> <li>Request parameters</li> <li>headers: {\"Content-Type\": \"application/octet-stream\"}</li> <li>params: </li> </ul> parameter_name required type description requestBody yes string json string containing feature filtering parameters - body: data stream <ul> <li> <p>Example request (python).</p> <p><pre><code>with open(id_path, \"w\") as f:\n    data = MultipartEncoder(\n        fields={'file': (id_path, f, 'application/octet-stream')}\n    )\n    upload_registry_info = service_info.get(\"upload\")\n    response = getattr(requests, upload_registry_info.f_method.lower(), None)(\n        url=upload_registry_info.f_url,\n        params={\"requestBody\": json.dumps({\"stat_month\": \"202201\", \"version\": \"v1\"})},\n        data=data,\n        headers={'Content-Type': \"application/octet-stream\"}\n    )\n</code></pre> - The interface returns:</p> </li> </ul> parameter name type description code int return code message string Returns the message data object Returns the jobId parameter for asynchronous status queries"},{"location":"third_party_service_registry/#312-query","title":"3.1.2 query","text":"<ul> <li>Description: query interface is used to query the progress of a task.</li> <li>Interface registration: refer to Service Registration, where the service_name parameter is \"query\".</li> <li>Request parameters</li> <li>body</li> </ul> parameter_name mandatory type description jobId yes string The jobId returned by upload <ul> <li>interface returns:</li> </ul> parameter name type description code int Return code message string Return message status string Task status"},{"location":"third_party_service_registry/#313-download","title":"3.1.3 download","text":"<ul> <li>Description: query interface for querying the progress of the task</li> <li>Interface registration: refer to Service Registration, where the service_name parameter is \"download\".</li> <li>Request parameters</li> <li>params</li> </ul> parameter_name mandatory type description requestBody is string json string containing \"jobId\" <ul> <li>Interface Return: Feature data stream</li> </ul>"},{"location":"third_party_service_registry/#32-authentication","title":"3.2 Authentication","text":""},{"location":"third_party_service_registry/#321-client-authentication-client_authentication","title":"3.2.1 Client authentication (client_authentication)","text":"<ul> <li>Description: Client authentication is used to authenticate client requests</li> <li>Interface Registration: Refer to Service Registration, where the service_name parameter is \"client_authentication\".</li> <li>Request parameters.</li> <li>body</li> </ul> parameter_name required type description full_path yes string request path headers yes string request headers form no object request body <ul> <li>Interface Return: </li> </ul> parameter name type description code int return code msg string return message"},{"location":"third_party_service_registry/#322-site-authentication","title":"3.2.2 Site Authentication","text":""},{"location":"third_party_service_registry/#3221-signature","title":"3.2.2.1 signature","text":"<ul> <li>Description: Before requesting another site, fate flow will call the signature interface to get the signature and put it in the request header</li> <li>Interface registration: Refer to Service Registration, where the service_name parameter is \"signature\".</li> <li>Request parameters.</li> <li>body</li> </ul> parameter_name mandatory type description party_id yes string site id body yes object request body <ul> <li>Interface Return: </li> </ul> parameter name type description code int return code site_signature string signature"},{"location":"third_party_service_registry/#3222-site_authentication","title":"3.2.2.2 site_authentication","text":"<ul> <li>Description: Used to authenticate requests from other fate sites.</li> <li>Interface registration: refer to Service Registration, where the service_name parameter is \"site_authentication\".</li> <li>Request parameters.</li> <li>body</li> </ul> parameter_name required type description src_party_id yes string Requesting party site id site_signature yes string signature body yes object request body <ul> <li>Interface Return: </li> </ul> parameter name type description code int return code msg string return message"},{"location":"third_party_service_registry/#33-permission","title":"3.3 permission","text":"<ul> <li>Description: Authentication of requests from other sites</li> <li>Interface registration: refer to service registration, where the service_name parameter is \"permission\".</li> <li>Request parameters</li> <li>body</li> </ul> parameter_name mandatory type description src_role yes string Requesting party role src_party_id yes string Requesting party partyid initiator no object initiator information roles no object All participant information component_list yes object Component list dataset_list yes object dataset_list run_time_conf no object job conf dsl no object job dsl component_parameters no object component_parameters <ul> <li>interface returns: </li> </ul> parameter_name type description code int return_code msg string return message"},{"location":"cli/checkpoint/","title":"Checkpoint","text":""},{"location":"cli/checkpoint/#checkpoint","title":"Checkpoint","text":""},{"location":"cli/checkpoint/#list","title":"list","text":"<p>List checkpoints.</p> <pre><code>flow checkpoint list --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; --role &lt;role&gt; --party-id &lt;party_id&gt; --component-name &lt;component_name&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version role <code>-r</code> <code>--role</code> No Party role party_id <code>-p</code> <code>--party-id</code> No Party ID component_name <code>-cpn</code> <code>--component-name</code> No Component name <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\",\n\"data\": [\n{\n\"create_time\": \"2021-11-07T02:34:54.683015\",\n\"step_index\": 0,\n\"step_name\": \"step_name\",\n\"models\": {\n\"HeteroLogisticRegressionMeta\": {\n\"buffer_name\": \"LRModelMeta\",\n\"sha1\": \"6871508f6e6228341b18031b3623f99a53a87147\"\n},\n\"HeteroLogisticRegressionParam\": {\n\"buffer_name\": \"LRModelParam\",\n\"sha1\": \"e3cb636fc93675684bff27117943f5bfa87f3029\"\n}\n}\n}\n]\n}\n</code></pre>"},{"location":"cli/checkpoint/#get","title":"get","text":"<p>Get checkpoint information.</p> <pre><code>flow checkpoint get --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; --role &lt;role&gt; --party-id &lt;party_id&gt; --component-name &lt;component_name&gt; --step-index &lt;step_index&gt;\n</code></pre> <p>Example</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version role <code>-r</code> <code>--role</code> No Party role party_id <code>-p</code> <code>--party-id</code> No Party ID component_name <code>-cpn</code> <code>--component-name</code> No Component name step_index <code>--step-index</code> Yes Step index, cannot be used with <code>step_name</code> step_name <code>--step-name</code> Yes Step name, cannot be used with <code>step_index</code> <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\",\n\"data\": {\n\"create_time\": \"2021-11-07T02:34:54.683015\",\n\"step_index\": 0,\n\"step_name\": \"step_name\",\n\"models\": {\n\"HeteroLogisticRegressionMeta\": \"CgJMMhEtQxzr4jYaPxkAAAAAAADwPyIHcm1zcHJvcDD///////////8BOTMzMzMzM8M/QApKBGRpZmZYAQ==\",\n\"HeteroLogisticRegressionParam\": \"Ig0KAng3EW1qASu+uuO/Ig0KAng0EcNi7a65ReG/Ig0KAng4EbJbl4gvVea/Ig0KAng2EcZwlVZTkOu/Ig0KAngwEVpG8dCbGvG/Ig0KAng5ESJNTx5MLve/Ig0KAngzEZ88H9P8qfO/Ig0KAng1EVfWP8JJv/K/Ig0KAngxEVS0xVXoTem/Ig0KAngyEaApgW32Q/K/KSiiE8AukPs/MgJ4MDICeDEyAngyMgJ4MzICeDQyAng1MgJ4NjICeDcyAng4MgJ4OUj///////////8B\"\n}\n}\n}\n</code></pre>"},{"location":"cli/data/","title":"Data","text":""},{"location":"cli/data/#data","title":"Data","text":""},{"location":"cli/data/#upload","title":"upload","text":"<p>Used to upload the input data for the modeling task to the storage system supported by fate</p> <pre><code>flow data upload -c ${conf_path}\n</code></pre> <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> <p>Options</p> parameter name required type description file yes string data storage path id_delimiter yes string Data separator, e.g. \",\" head no int Whether the data has a table header partition yes int Number of data partitions storage_engine no string storage engine type, default \"EGGROLL\", also support \"HDFS\", \"LOCALFS\", \"HIVE\", etc. namespace yes string table namespace table_name yes string table name storage_address no object The storage address of the corresponding storage engine is required use_local_data no int The default is 1, which means use the data from the client's machine; 0 means use the data from the fate flow service's machine. drop no int Whether to overwrite uploads extend_sid no bool Whether to add a new column for uuid id, default False auto_increasing_sid no bool Whether the new id column is self-increasing (will only work if extend_sid is True), default False <p>mete information</p> parameter name required type description input_format no string The format of the data (danse, svmlight, tag:value), used to determine delimiter no string The data separator, default \",\" tag_with_value no bool Valid for tag data format, whether to carry value tag_value_delimiter no string tag:value data separator, default \":\" with_match_id no bool Whether or not to carry match id with_match_id no object The name of the id column, effective when extend_sid is enabled, e.g., [\"email\", \"phone\"] id_range no object For tag/svmlight format data, which columns are ids exclusive_data_type no string The format of the special type data columns data_type no string Column data type, default \"float64 with_label no bool Whether to have a label, default False label_name no string The name of the label, default \"y\" label_type no string Label type, default \"int\" <p>In version 1.9.0 and later, passing in the meta parameter will generate anonymous information about the feature. Example </p> <ul> <li>eggroll</li> </ul> <pre><code>{\n\"file\": \"examples/data/breast_hetero_guest.csv\",\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partition\": 10,\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\",\n\"storage_engine\": \"EGGROLL\"\n}\n</code></pre> <ul> <li>hdfs</li> </ul> <pre><code>{\n\"file\": \"examples/data/breast_hetero_guest.csv\",\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partition\": 10,\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\",\n\"storage_engine\": \"HDFS\"\n}\n</code></pre> <ul> <li>localfs</li> </ul> <pre><code>{\n\"file\": \"examples/data/breast_hetero_guest.csv\",\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partition\": 4,\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\",\n\"storage_engine\": \"LOCALFS\"\n}\n</code></pre> <p>return parameters </p> parameter name type description jobId string job id retcode int return code retmsg string return message data object return data <p>Example </p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://xxx.xxx.xxx.xxx:8080/index.html#/dashboard?job_id=202111081218319075660&amp;role=local&amp;party_id=0\",\n        \"code\": 0,\n        \"dsl_path\": \"/data/projects/fate/jobs/202111081218319075660/job_dsl.json\",\n        \"job_id\": \"202111081218319075660\",\n        \"logs_directory\": \"/data/projects/fate/logs/202111081218319075660\",\n        \"message\": \"success\",\n        \"model_info\": {\n\"model_id\": \"local-0#model\",\n            \"model_version\": \"202111081218319075660\"\n},\n        \"namespace\": \"experiment\",\n        \"pipeline_dsl_path\": \"/data/projects/fate/jobs/202111081218319075660/pipeline_dsl.json\",\n        \"runtime_conf_on_party_path\": \"/data/projects/fate/jobs/202111081218319075660/local/0/job_runtime_on_party_conf.json\",\n        \"runtime_conf_path\":\"/data/projects/fate/jobs/202111081218319075660/job_runtime_conf.json\",\n        \"table_name\": \"breast_hetero_host\",\n        \"train_runtime_conf_path\":\"/data/projects/fate/jobs/202111081218319075660/train_runtime_conf.json\"\n},\n    \"jobId\": \"202111081218319075660\",\n    \"retcode\": 0,\n    \"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/data/#upload-history","title":"upload-history","text":"<p>Used to query upload table history.</p> <pre><code>flow data upload-history -l 20\nflow data upload-history --job-id $JOB_ID\n</code></pre> <p>Options</p> parameter name required type description -l --limit no int Number of records to return. (default: 10) -j --job_id no string Job ID"},{"location":"cli/data/#download","title":"download","text":"<p>Brief description: </p> <p>Used to download data from within the fate storage engine to file format data</p> <pre><code>flow data download -c ${conf_path}\n</code></pre> <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> <p>Options</p> parameter name required type description output_path yes string download_path table_name yes string fate table name namespace yes int fate table namespace <p>Example:</p> <pre><code>{\n\"output_path\": \"/data/projects/fate/breast_hetero_guest.csv\",\n\"namespace\": \"experiment\",\n\"table_name\": \"breast_hetero_guest\"\n}\n</code></pre> <p>return parameters </p> parameter name type description jobId string job id retcode int return code retmsg string return message data object return data <p>Example </p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://xxx.xxx.xxx.xxx:8080/index.html#/dashboard?job_id=202111081457135282090&amp;role=local&amp;party_id=0\",\n\"code\": 0,\n\"dsl_path\": \"/data/projects/fate/jobs/202111081457135282090/job_dsl.json\",\n\"job_id\": \"202111081457135282090\",\n\"logs_directory\": \"/data/projects/fate/logs/202111081457135282090\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"local-0#model\",\n\"model_version\": \"202111081457135282090\"\n},\n\"pipeline_dsl_path\": \"/data/projects/fate/jobs/202111081457135282090/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"/data/projects/fate/jobs/202111081457135282090/local/0/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\": \"/data/projects/fate/jobs/202111081457135282090/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"/data/projects/fate/jobs/202111081457135282090/train_runtime_conf.json\"\n},\n\"jobId\": \"202111081457135282090\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/data/#writer","title":"writer","text":"<p>Brief description: </p> <p>Used to download data from the fate storage engine to the external engine or to save data as a new table</p> <pre><code>flow data writer -c ${conf_path}\n</code></pre> <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> <p>Options </p> parameter name required type description table_name yes string fate table name namespace yes int fate table namespace storage_engine no string Storage type, e.g., MYSQL address no object storage_address output_namespace no string Save as a table namespace for fate output_name no string Save as fate's table name **Note: storage_engine, address are combined parameters that provide storage to the specified engine. output_namespace, output_name are also combined parameters, providing the function to save as a new table of the same engine** <p>Example:</p> <pre><code>{\n\"table_name\": \"name1\",\n\"namespace\": \"namespace1\",\n\"output_name\": \"name2\",\n\"output_namespace\": \"namespace2\"\n}\n</code></pre> <p>return</p> parameter name type description jobId string job id retcode int return code retmsg string return information data object return data <p>Example </p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://xxx.xxx.xxx.xxx:8080/index.html#/dashboard?job_id=202201121235115028490&amp;role=local&amp;party_id=0\",\n\"code\": 0,\n\"dsl_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/job_dsl.json\",\n\"job_id\": \"202201121235115028490\",\n\"logs_directory\": \"/data/projects/fate/fateflow/logs/202201121235115028490\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"local-0#model\",\n\"model_version\": \"202201121235115028490\"\n},\n\"pipeline_dsl_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/local/0/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\":\"/data/projects/fate/fateflow/jobs/202201121235115028490/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"/data/projects/fate/fateflow/jobs/202201121235115028490/train_runtime_conf.json\"\n},\n\"jobId\": \"202201121235115028490\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/job/","title":"Job","text":""},{"location":"cli/job/#job","title":"Job","text":""},{"location":"cli/job/#submit","title":"submit","text":"<p>Build a federated learning job with two configuration files: job dsl and job conf, and submit it to the scheduler for execution</p> <pre><code>flow job submit [options]\n</code></pre> <p>Options</p> parameter name required type description -d, --dsl-path yes string path to job dsl -c, --conf-path yes string job conf's path <p>Returns</p> parameter name type description retcode int return code retmsg string return message jobId string Job ID data dict return data data.dsl_path string The path to the actual running dsl configuration generated by the system based on the submitted dsl content data.runtime_conf_on_party_path string The system-generated path to the actual running conf configuration for each party based on the submitted conf content data.dsl_path string The system-generated path to the actual running conf configuration for each party based on the submitted conf content data.board_url string fateboard view address data.model_info dict Model identification information <p>Example</p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://127.0.0.1:8080/index.html#/dashboard?job_id=202111061608424372620&amp;role=guest&amp;party_id=9999\",\n\"code\": 0,\n\"dsl_path\": \"$FATE_PROJECT_BASE/jobs/202111061608424372620/job_dsl.json\",\n\"job_id\": \"202111061608424372620\",\n\"logs_directory\": \"$FATE_PROJECT_BASE/logs/202111061608424372620\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"arbiter-10000#guest-9999#host-10000#model\",\n\"model_version\": \"202111061608424372620\"\n},\n\"pipeline_dsl_path\": \"$FATE_PROJECT_BASE/jobs/202111061608424372620/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"$FATE_FATE_PROJECT_BASE/jobs/202111061608424372620/guest/9999/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\":\"$FATE_PROJECT_BASE/jobs/202111061608424372620/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"$FATE_PROJECT_BASE/jobs/202111061608424372620/train_runtime_conf.json\"\n},\n\"jobId\": \"202111061608424372620\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/job/#rerun","title":"rerun","text":"<p>Rerun a job</p> <pre><code>flow job rerun [options]\n</code></pre> <p>Options</p> <p>| parameter name | required | type | description | | :------------- | :------- | :--- | ----------- |------- | | -j, --job-id | yes | string | job id path | | --cpn, --component-name | no | string | Specifies which component to rerun from, unspecified components will not be executed if they have no upstream dependencies on the specified component; if not specified, the entire job will be rerun | | --force | no | bool | The job will be rerun even if it succeeds; if not specified, the job will be skipped if it succeeds |</p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message jobId string Job ID data dict return data <p>Example</p> <pre><code>flow job rerun -j 202111031100369723120\n</code></pre> <pre><code>flow job rerun -j 202111031100369723120 -cpn hetero_lr_0\n</code></pre> <pre><code>flow job rerun -j 202111031100369723120 -cpn hetero_lr_0 --force </code></pre>"},{"location":"cli/job/#parameter-update","title":"parameter-update","text":"<p>Update the job parameters</p> <pre><code>flow job parameter-update [options]\n</code></pre> <p>Options</p> parameter-name required type description -j, --job-id yes string job id path -c, --conf-path yes string The contents of the job conf that needs to be updated, no need to fill in parameters that don't need to be updated <p>Returns</p> parameter name type description retcode int return code retmsg string return message jobId string Job ID data dict Returns the updated job conf <p>Example</p> <p>Assuming that the job is updated with some of the execution parameters of the hetero_lr_0 component, the configuration file is as follows. <pre><code>{\n\"job_parameters\": {\n},\n  \"component_parameters\": {\n\"common\": {\n\"hetero_lr_0\": {\n\"alpha\": 0.02,\n        \"max_iter\": 5\n}\n}\n}\n}\n</code></pre></p> <p>Execution of the following command takes effect.</p> <pre><code>flow job parameter-update -j 202111061957421943730 -c examples/other/update_parameters.json\n</code></pre> <p>Execute the following command to rerun.</p> <pre><code>flow job rerun -j 202111061957421943730 -cpn hetero_lr_0 --force </code></pre>"},{"location":"cli/job/#stop","title":"stop","text":"<p>Cancels or terminates the specified job</p> <p>Options</p> number parameters short format long format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> yes Job ID <p>Example</p> <pre><code>flow job stop -j $JOB_ID\n</code></pre>"},{"location":"cli/job/#query","title":"query","text":"<p>Retrieve task information. Options</p> number parameters short-format long-format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> no Job ID 2 role <code>-r</code> <code>--role</code> no role 3 party_id <code>-p</code> <code>--party_id</code> no Party ID 4 status <code>-s</code> <code>--status</code> No Task status <p>Example</p> <pre><code>flow job query -r guest -p 9999 -s complete\nflow job query -j $JOB_ID\n</code></pre>"},{"location":"cli/job/#view","title":"view","text":"<p>Retrieve the job data view. Options</p> number parameters short-format long-format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> yes Job ID 2 role <code>-r</code> <code>--role</code> no role 3 party_id <code>-p</code> <code>--party_id</code> no Party ID 4 status <code>-s</code> <code>--status</code> No Task status <p>Example</p> <pre><code>flow job view -j $JOB_ID -s complete\n</code></pre>"},{"location":"cli/job/#config","title":"config","text":"<p>Download the configuration file for the specified job to the specified directory.</p> <p>Options</p> number parameters short-format long-format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> yes Job ID 2 role <code>-r</code> <code>--role</code> yes role 3 party_id <code>-p</code> <code>--party_id</code> yes Party ID 4 output_path <code>-o</code> <code>--output-path</code> yes output directory <p>Example</p> <pre><code>flow job config -j $JOB_ID -r host -p 10000 --output-path . /examples/\n</code></pre>"},{"location":"cli/job/#log","title":"log","text":"<p>Download the log file of the specified job to the specified directory. Options</p> number parameters short-format long-format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> yes Job ID 2 output_path <code>-o</code> <code>--output-path</code> yes output directory <p>Example</p> <pre><code>flow job log -j JOB_ID --output-path . /examples/\n</code></pre>"},{"location":"cli/job/#list","title":"list","text":"<p>Show the list of jobs. Options</p> number parameters short-format long-format required parameters parameter description 1 limit <code>-l</code> <code>-limit</code> no Returns the number limit (default: 10) <p>Example</p> <pre><code>flow job list\nflow job list -l 30\n</code></pre>"},{"location":"cli/job/#dsl","title":"dsl","text":"<p>Predictive DSL file generator. Options</p> number parameters short-format long-format required parameters parameter description 1 cpn_list <code>-cpn-list</code> No List of user-specified component names 2 cpn_path <code>-cpn-path</code> No User-specified path to a file with a list of component names 3 train_dsl_path <code>-train-dsl-path</code> yes path to the training dsl file 4 output_path <code>-o</code> <code>--output-path</code> no output directory path <p>Example</p> <pre><code>flow job dsl --cpn-path fate_flow/examples/component_list.txt --train-dsl-path fate_flow/examples/test_hetero_lr_job_dsl.json\n\nflow job dsl --cpn-path fate_flow/examples/component_list.txt --train-dsl-path fate_flow/examples/test_hetero_lr_job_dsl.json -o fate_flow /examples/\n\nflow job dsl --cpn-list \"dataio_0, hetero_feature_binning_0, hetero_feature_selection_0, evaluation_0\" --train-dsl-path fate_flow/examples/ test_hetero_lr_job_dsl.json -o fate_flow/examples/\n\nflow job dsl --cpn-list [dataio_0,hetero_feature_binning_0,hetero_feature_selection_0,evaluation_0] --train-dsl-path fate_flow/examples/ test_hetero_lr_job_dsl.json -o fate_flow/examples/\n</code></pre>"},{"location":"cli/key/","title":"Key","text":""},{"location":"cli/key/#key","title":"Key","text":""},{"location":"cli/key/#query","title":"query","text":"<p>Query the public key information of our or partner's fate site</p> <p><pre><code>flow key query -p 9999\n</code></pre> Options </p> parameters short-format long-format required type description party_id <code>-p</code> <code>--party-id</code> yes string site id <p>returns</p> parameter name type description retcode int return-code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": \"-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzxgbxa3cfhvwbu0AFfY/\\ nkm7uFZ17J0EEDgaIWlrLakds7XboU5iOT0eReQp/KG3R0fVM9rBtdj8NcBcArtZ9\\n2242Atls3jiuza/MPPo9XACnedGW7O+ VAfvVmq2sdmKZMX5l7krEXYN645UZAd8b\\nhIh+xf0qGW6IgxyKvqF13VxxB7OMUzUwyY/ZcN2rW1urfdXsCNoQ1cFl3KaarkHl\\nn/ gBMcCDvACXoKysFnFE7L4E7CGglYaDBJrfIyti+sbSVNxUDx2at2VXqj/PohTa\\nkBKfrgK7sT85gz1sc9uRwhwF4nOY7izq367S7t/W8BJ75gWsr+lhhiIfE19RBbBQ\\n /wIDAQAB\\n-----END PUBLIC KEY-----\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/key/#save","title":"save","text":"<p>Used to save other fate site public key information, that is, for cooperation with other sites</p> <pre><code>flow key save -c fateflow/examples/key/save_public_key.json\n</code></pre> <p>Options </p> parameters short format long format required type description conf_path <code>-c</code> <code>-conf-path</code> yes string configuration-path <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> parameter name required type description party_id yes string site id key yes string site public key <p>return</p> parameter name type description retcode int return code retmsg string return message <p>Sample</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/key/#delete","title":"delete","text":"<p>Delete the partner site public key, i.e. cancel the partnership</p> <pre><code>flow key delete -p 9999\n</code></pre> <p>Options </p> parameters short-format long-format required type description party_id <code>-p</code> <code>--party-id</code> yes string site id <p>returns</p> parameter name type description retcode int return-code retmsg string return message <p>Sample</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/model/","title":"Model","text":""},{"location":"cli/model/#model","title":"Model","text":""},{"location":"cli/model/#load","title":"load","text":"<p>Load a model generated by <code>deploy</code> to Fate-Serving.</p> <pre><code>flow model load -c examples/model/publish_load_model.json\nflow model load -j &lt;job_id&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> Yes Config file path job_id <code>-j</code> <code>--job-id</code> Yes Job ID <p>Example</p> <pre><code>{\n\"data\": {\n\"detail\": {\n\"guest\": {\n\"9999\": {\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n},\n\"host\": {\n\"10000\": {\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n}\n},\n\"guest\": {\n\"9999\": 0\n},\n\"host\": {\n\"10000\": 0\n}\n},\n\"jobId\": \"202111091122168817080\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/model/#bind","title":"bind","text":"<p>Bind a model generated by <code>deploy</code> to Fate-Serving.</p> <pre><code>flow model bind -c examples/model/bind_model_service.json\nflow model bind -c examples/model/bind_model_service.json -j &lt;job_id&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path job_id <code>-j</code> <code>--job-id</code> Yes Job ID <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"service id is 123\"\n}\n</code></pre>"},{"location":"cli/model/#import","title":"import","text":"<p>Import the model from a file or storage engine.</p> <pre><code>flow model import -c examples/model/import_model.json\nflow model import -c examples/model/restore_model.json --from-database\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path from_database <code>--from-database</code> Yes Import the model from storage engine <p>Example</p> <pre><code>{\n\"data\": {\n\"job_id\": \"202208261102212849780\",\n\"model_id\": \"arbiter-10000#guest-9999#host-10000#model\",\n\"model_version\": \"foobar\",\n\"party_id\": \"9999\",\n\"role\": \"guest\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/model/#export","title":"export","text":"<p>Export the model to a file or storage engine.</p> <pre><code>flow model export -c examples/model/export_model.json\nflow model export -c examples/model/store_model.json --to-database\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path to_database <code>--to-database</code> Yes Export the model to storage engine <p>Example</p> <pre><code>{\n\"data\": {\n\"board_url\": \"http://127.0.0.1:8080/index.html#/dashboard?job_id=202111091124582110490&amp;role=local&amp;party_id=0\",\n\"code\": 0,\n\"dsl_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/job_dsl.json\",\n\"job_id\": \"202111091124582110490\",\n\"logs_directory\": \"/root/Codes/FATE-Flow/logs/202111091124582110490\",\n\"message\": \"success\",\n\"model_info\": {\n\"model_id\": \"local-0#model\",\n\"model_version\": \"202111091124582110490\"\n},\n\"pipeline_dsl_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/pipeline_dsl.json\",\n\"runtime_conf_on_party_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/local/0/job_runtime_on_party_conf.json\",\n\"runtime_conf_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/job_runtime_conf.json\",\n\"train_runtime_conf_path\": \"/root/Codes/FATE-Flow/jobs/202111091124582110490/train_runtime_conf.json\"\n},\n\"jobId\": \"202111091124582110490\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/model/#migrate","title":"migrate","text":"<p>Migrate the model.</p> <pre><code>flow model migrate -c examples/model/migrate_model.json\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path <p>Example</p> <pre><code>{\n\"data\": {\n\"arbiter\": {\n\"10000\": 0\n},\n\"detail\": {\n\"arbiter\": {\n\"10000\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. The Config of model has been modified automatically. New model id is: arbiter-100#guest-99#host-100#model, model version is: 202111091127392613050. Model files can be found at '/root/Codes/FATE-Flow/temp/fate_flow/arbiter#100#arbiter-100#guest-99#host-100#model_202111091127392613050.zip'.\"\n}\n},\n\"guest\": {\n\"9999\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. The Config of model has been modified automatically. New model id is: arbiter-100#guest-99#host-100#model, model version is: 202111091127392613050. Model files can be found at '/root/Codes/FATE-Flow/temp/fate_flow/guest#99#arbiter-100#guest-99#host-100#model_202111091127392613050.zip'.\"\n}\n},\n\"host\": {\n\"10000\": {\n\"retcode\": 0,\n\"retmsg\": \"Migrating model successfully. The Config of model has been modified automatically. New model id is: arbiter-100#guest-99#host-100#model, model version is: 202111091127392613050. Model files can be found at '/root/Codes/FATE-Flow/temp/fate_flow/host#100#arbiter-100#guest-99#host-100#model_202111091127392613050.zip'.\"\n}\n}\n},\n\"guest\": {\n\"9999\": 0\n},\n\"host\": {\n\"10000\": 0\n}\n},\n\"jobId\": \"202111091127392613050\",\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/model/#tag-list","title":"tag-list","text":"<p>List tags of the model.</p> <pre><code>flow model tag-list -j &lt;job_id&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description job_id <code>-j</code> <code>--job_id</code> No Job ID"},{"location":"cli/model/#tag-model","title":"tag-model","text":"<p>Add or remove a tag from the model.</p> <pre><code>flow model tag-model -j &lt;job_id&gt; -t &lt;tag_name&gt;\nflow model tag-model -j &lt;job_id&gt; -t &lt;tag_name&gt; --remove\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description job_id <code>-j</code> <code>--job_id</code> No Job ID tag_name <code>-t</code> <code>--tag-name</code> No Tag name remove <code>--remove</code> Yes Remove the tag"},{"location":"cli/model/#deploy","title":"deploy","text":"<p>Configure predict DSL.</p> <pre><code>flow model deploy --model-id &lt;model_id&gt; --model-version &lt;model_version&gt;\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version cpn_list <code>--cpn-list</code> Yes Components list cpn_path <code>--cpn-path</code> Yes Load components list from a file dsl_path <code>--dsl-path</code> Yes Predict DSL file path cpn_step_index <code>--cpn-step-index</code> Yes Specify a checkpoint model to replace the pipeline modelUse <code>:</code> to separate component name and step indexE.g. <code>--cpn-step-index cpn_a:123</code> cpn_step_name <code>--cpn-step-name</code> Yes Specify a checkpoint model to replace the pipeline model.Use <code>:</code> to separate component name and step nameE.g. <code>--cpn-step-name cpn_b:foobar</code> <p>Example</p> <pre><code>{\n\"retcode\": 0,\n\"retmsg\": \"success\",\n\"data\": {\n\"model_id\": \"arbiter-9999#guest-10000#host-9999#model\",\n\"model_version\": \"202111032227378766180\",\n\"arbiter\": {\n\"party_id\": 9999\n},\n\"guest\": {\n\"party_id\": 10000\n},\n\"host\": {\n\"party_id\": 9999\n},\n\"detail\": {\n\"arbiter\": {\n\"party_id\": {\n\"retcode\": 0,\n\"retmsg\": \"deploy model of role arbiter 9999 success\"\n}\n},\n\"guest\": {\n\"party_id\": {\n\"retcode\": 0,\n\"retmsg\": \"deploy model of role guest 10000 success\"\n}\n},\n\"host\": {\n\"party_id\": {\n\"retcode\": 0,\n\"retmsg\": \"deploy model of role host 9999 success\"\n}\n}\n}\n}\n}\n</code></pre>"},{"location":"cli/model/#get-predict-dsl","title":"get-predict-dsl","text":"<p>Get predict DSL of the model.</p> <pre><code>flow model get-predict-dsl --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; -o ./examples/\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version output_path <code>-o</code> <code>--output-path</code> No Output path"},{"location":"cli/model/#get-predict-conf","title":"get-predict-conf","text":"<p>Get the template of predict config.</p> <pre><code>flow model get-predict-conf --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; -o ./examples/\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version output_path <code>-o</code> <code>--output-path</code> No Output path"},{"location":"cli/model/#get-model-info","title":"get-model-info","text":"<p>Get model information.</p> <pre><code>flow model get-model-info --model-id &lt;model_id&gt; --model-version &lt;model_version&gt;\nflow model get-model-info --model-id &lt;model_id&gt; --model-version &lt;model_version&gt; --detail\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description model_id <code>--model-id</code> No Model ID model_version <code>--model-version</code> No Model version role <code>-r</code> <code>--role</code> Yes Party role party_id <code>-p</code> <code>--party-id</code> Yes Party ID detail <code>--detail</code> Yes Display detailed information"},{"location":"cli/model/#homo-convert","title":"homo-convert","text":"<p>Convert trained homogenous model to the format of another ML framework.</p> <pre><code>flow model homo-convert -c examples/model/homo_convert_model.json\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path"},{"location":"cli/model/#homo-deploy","title":"homo-deploy","text":"<p>Deploy trained homogenous model to a target online serving system. Currently the supported target serving system is KFServing.</p> <pre><code>flow model homo-deploy -c examples/model/homo_deploy_model.json\n</code></pre> <p>Options</p> Parameter Short Flag Long Flag Optional Description conf_path <code>-c</code> <code>--conf-path</code> No Config file path"},{"location":"cli/privilege/","title":"Privilege","text":""},{"location":"cli/privilege/#privilege","title":"Privilege","text":""},{"location":"cli/privilege/#grant","title":"grant","text":"<p>Add privileges</p> <pre><code>flow privilege grant -c fateflow/examples/permission/grant.json\n</code></pre> <p>Options</p> parameter name required type description party_id yes string site id component no string component name, can be split by \",\" for multiple components, \"*\" for all components dataset no object list of datasets <p>sample <pre><code>{\n\"party_id\": 10000,\n\"component\": \"reader,dataio\",\n\"dataset\": [\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\"\n},\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_host\"\n}\n]\n}\n</code></pre></p> <p>return</p> parameter name type description retcode int return code retmsg string return message <p>Sample</p> <pre><code>{\n\"retcode\": 0,\n    \"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/privilege/#delete","title":"delete","text":"<p>Delete permissions</p> <p><pre><code>flow privilege delete -c fateflow/examples/permission/delete.json\n</code></pre> Options</p> parameter name required type description party_id yes string site_id component no string component name, can be split by \",\" for multiple components, \"*\" for all components dataset no object list of datasets, \"*\" is all datasets <p>sample <pre><code>{\n\"party_id\": 10000,\n\"component\": \"reader,dataio\",\n\"dataset\": [\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\"\n},\n{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_host\"\n}\n]\n}\n</code></pre></p> <p>return</p> parameter name type description retcode int return code retmsg string return message <p>Sample</p> <pre><code>{\n\"retcode\": 0,\n    \"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/privilege/#query","title":"query","text":"<p>Query permissions</p> <pre><code>flow privilege query -p 10000\n</code></pre> <p>Options</p> parameters short-format long-format required type description party_id <code>-p</code> <code>--party-id</code> yes string site id <p>returns</p> parameter name type description retcode int return-code retmsg string Return information data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"component\": [\n\"reader\",\n\"dataio\"\n],\n\"dataset\": [\n{\n\"name\": \"breast_hetero_guest\",\n\"namespace\": \"experiment\"\n},\n{\n\"name\": \"breast_hetero_host\",\n\"namespace\": \"experiment\"\n}\n]\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/provider/","title":"Provider","text":""},{"location":"cli/provider/#provider","title":"Provider","text":""},{"location":"cli/provider/#list","title":"list","text":"<p>List all current component providers and information about the components they provide</p> <pre><code>flow provider list [options]\n</code></pre> <p>Options</p> <p>Returns</p> \u53c2\u6570\u540d \u7c7b\u578b \u8bf4\u660e retcode int \u8fd4\u56de\u7801 retmsg string \u8fd4\u56de\u4fe1\u606f data dict \u8fd4\u56de\u6570\u636e <p>Example</p> <p>output:</p> <pre><code>{\n\"data\": {\n\"fate\": {\n\"1.9.0\": {\n\"class_path\": {\n\"anonymous_generator\": \"util.anonymous_generator_util.Anonymous\",\n\"data_format\": \"util.data_format_preprocess.DataFormatPreProcess\",\n\"feature_instance\": \"feature.instance.Instance\",\n\"feature_vector\": \"feature.sparse_vector.SparseVector\",\n\"hetero_model_merge\": \"protobuf.model_merge.merge_hetero_models.hetero_model_merge\",\n\"homo_model_convert\": \"protobuf.homo_model_convert.homo_model_convert\",\n\"interface\": \"components.components.Components\",\n\"model\": \"protobuf.generated\",\n\"model_migrate\": \"protobuf.model_migrate.model_migrate\"\n},\n\"components\": [\n\"heterodatasplit\",\n\"psi\",\n\"heterofastsecureboost\",\n\"heterofeaturebinning\",\n\"scorecard\",\n\"sampleweight\",\n\"homosecureboost\",\n\"onehotencoder\",\n\"secureinformationretrieval\",\n\"homoonehotencoder\",\n\"datatransform\",\n\"dataio\",\n\"heterosshelinr\",\n\"intersection\",\n\"homofeaturebinning\",\n\"secureaddexample\",\n\"union\",\n\"datastatistics\",\n\"columnexpand\",\n\"homonn\",\n\"labeltransform\",\n\"heterosecureboost\",\n\"heterofeatureselection\",\n\"heterolr\",\n\"feldmanverifiablesum\",\n\"heteropoisson\",\n\"evaluation\",\n\"federatedsample\",\n\"homodatasplit\",\n\"ftl\",\n\"localbaseline\",\n\"featurescale\",\n\"featureimputation\",\n\"heteropearson\",\n\"heterokmeans\",\n\"heteronn\",\n\"heterolinr\",\n\"spdztest\",\n\"heterosshelr\",\n\"homolr\"\n],\n\"path\": \"${FATE_PROJECT_BASE}/python/federatedml\",\n\"python\": \"\"\n},\n\"default\": {\n\"version\": \"1.9.0\"\n}\n},\n\"fate_flow\": {\n\"1.9.0\": {\n\"class_path\": {\n\"anonymous_generator\": \"util.anonymous_generator_util.Anonymous\",\n\"data_format\": \"util.data_format_preprocess.DataFormatPreProcess\",\n\"feature_instance\": \"feature.instance.Instance\",\n\"feature_vector\": \"feature.sparse_vector.SparseVector\",\n\"hetero_model_merge\": \"protobuf.model_merge.merge_hetero_models.hetero_model_merge\",\n\"homo_model_convert\": \"protobuf.homo_model_convert.homo_model_convert\",\n\"interface\": \"components.components.Components\",\n\"model\": \"protobuf.generated\",\n\"model_migrate\": \"protobuf.model_migrate.model_migrate\"\n},\n\"components\": [\n\"writer\",\n\"modelrestore\",\n\"upload\",\n\"apireader\",\n\"modelstore\",\n\"cacheloader\",\n\"modelloader\",\n\"download\",\n\"reader\"\n],\n\"path\": \"${FATE_FLOW_BASE}/python/fate_flow\",\n\"python\": \"\"\n},\n\"default\": {\n\"version\": \"1.9.0\"\n}\n}\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre> <p>Contains the <code>name</code>, <code>version number</code>, <code>codepath</code>, <code>list of provided components</code></p>"},{"location":"cli/provider/#register","title":"register","text":"<p>Register a component provider</p> <pre><code>flow provider register [options]\n</code></pre> <p>Options</p> \u53c2\u6570\u540d \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e -c, --conf-path \u662f string \u914d\u7f6e\u8def\u5f84 <p>Returns</p> \u53c2\u6570\u540d \u7c7b\u578b \u8bf4\u660e retcode int \u8fd4\u56de\u7801 retmsg string \u8fd4\u56de\u4fe1\u606f <p>Example</p> <pre><code>flow provider register -c $FATE_FLOW_BASE/examples/other/register_provider.json\n</code></pre> <p>conf:</p> <pre><code>{\n\"name\": \"fate\",\n\"version\": \"1.7.1\",\n\"path\": \"${FATE_FLOW_BASE}/python/component_plugins/fateb/python/federatedml\"\n}\n</code></pre> <p>output:</p> <pre><code>{\n\"data\": {\n\"flow-xxx-9380\": {\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/resource/","title":"Resource","text":""},{"location":"cli/resource/#resource","title":"Resource","text":""},{"location":"cli/resource/#query","title":"query","text":"<p>For querying fate system resources</p> <pre><code>flow resource query\n</code></pre> <p>Options </p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": {\n\"computing_engine_resource\": {\n\"f_cores\": 32,\n\"f_create_date\": \"2021-09-21 19:32:59\",\n\"f_create_time\": 1632223979564,\n\"f_engine_config\": {\n\"cores_per_node\": 32,\n\"nodes\": 1\n},\n\"f_engine_entrance\": \"fate_on_eggroll\",\n\"f_engine_name\": \"EGGROLL\",\n\"f_engine_type\": \"computing\",\n\"f_memory\": 0,\n\"f_nodes\": 1,\n\"f_remaining_cores\": 32,\n\"f_remaining_memory\": 0,\n\"f_update_date\": \"2021-11-08 16:56:38\",\n\"f_update_time\": 1636361798812\n},\n\"use_resource_job\": []\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/resource/#return","title":"return","text":"<p>Resources for returning a job</p> <pre><code>flow resource return [options]\n</code></pre> <p>Options </p> parameter name required type description job_id yes string job_id <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": [\n{\n\"job_id\": \"202111081612427726750\",\n\"party_id\": \"8888\",\n\"resource_in_use\": true,\n\"resource_return_status\": true,\n\"role\": \"guest\"\n}\n],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/server/","title":"Server","text":""},{"location":"cli/server/#server","title":"Server","text":""},{"location":"cli/server/#versions","title":"versions","text":"<p>List all relevant system version numbers</p> <pre><code>flow server versions\n</code></pre> <p>Options</p> <p>None</p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow server versions\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"API\": \"v1\",\n\"CENTOS\": \"7.2\",\n\"EGGROLL\": \"2.4.0\",\n\"FATE\": \"1.7.0\",\n\"FATEBoard\": \"1.7.0\",\n\"FATEFlow\": \"1.7.0\",\n\"JDK\": \"8\",\n\"MAVEN\": \"3.6.3\",\n\"PYTHON\": \"3.6.5\",\n\"SPARK\": \"2.4.1\",\n\"UBUNTU\": \"16.04\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/server/#reload","title":"reload","text":"<p>The following configuration items will take effect again after <code>reload</code></p> <ul> <li>All configurations after # engine services in $FATE_PROJECT_BASE/conf/service_conf.yaml</li> <li>All configurations in $FATE_FLOW_BASE/python/fate_flow/job_default_config.yaml</li> </ul> <pre><code>flow server reload\n</code></pre> <p>Options</p> <p>None</p> <p>Returns</p> parameter name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow server reload\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"job_default_config\": {\n\"auto_retries\": 0,\n\"auto_retry_delay\": 1,\n\"default_component_provider_path\": \"component_plugins/fate/python/federatedml\",\n\"end_status_job_scheduling_time_limit\": 300000,\n\"end_status_job_scheduling_updates\": 1,\n\"federated_command_trys\": 3,\n\"federated_status_collect_type\": \"PUSH\",\n\"job_timeout\": 259200,\n\"max_cores_percent_per_job\": 1,\n\"output_data_summary_count_limit\": 100,\n\"remote_request_timeout\": 30000,\n\"task_cores\": 4,\n\"task_memory\": 0,\n\"task_parallelism\": 1,\n\"total_cores_overweight_percent\": 1,\n\"total_memory_overweight_percent\": 1,\n\"upload_max_bytes\": 4194304000\n},\n\"service_registry\": null\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/table/","title":"Table","text":""},{"location":"cli/table/#table","title":"Table","text":""},{"location":"cli/table/#info","title":"info","text":"<p>Query information about the fate table (real storage address, number, schema, etc.)</p> <pre><code>flow table info [options]\n</code></pre> <p>options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns | parameter name | type | description | | :------ | :----- | -------- | | retcode | int | return code | | retmsg | string | return information | | data | object | return data |</p> <p>Sample</p> <pre><code>{\n\"data\": {\n\"address\": {\n\"home\": null,\n\"name\": \"breast_hetero_guest\",\n\"namespace\": \"experiment\"\n},\n\"count\": 569,\n\"exists\": 1,\n\"namespace\": \"experiment\",\n\"partition\": 4,\n\"schema\": {\n\"header\": \"y,x0,x1,x2,x3,x4,x5,x6,x7,x8,x9\",\n\"sid\": \"id\"\n},\n\"table_name\": \"breast_hetero_guest\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/table/#delete","title":"delete","text":"<p>You can delete table data with table delete</p> <pre><code>flow table delete [options]\n</code></pre> <p>Options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/table/#bind","title":"bind","text":"<p>Real storage addresses can be mapped to fate storage tables via table bind</p> <pre><code>flow table bind [options]\n</code></pre> <p>options </p> parameters short format long format required type description conf_path <code>-c</code> <code>--conf-path</code> yes string configuration-path <p>Note: conf_path is the parameter path, the specific parameters are as follows</p> parameter_name required type description name yes string fate table name namespace yes string fate table namespace engine yes string storage engine, supports \"HDFS\", \"MYSQL\", \"PATH\" yes object real storage address drop no int Overwrite previous information head no int Whether there is a data table header id_delimiter no string Data separator id_column no string id field feature_column no array feature_field <p>mete information</p> parameter name required type description input_format no string The format of the data (danse, svmlight, tag:value), used to determine delimiter no string The data separator, default \",\" tag_with_value no bool Valid for tag data format, whether to carry value tag_value_delimiter no string tag:value data separator, default \":\" with_match_id no bool Whether or not to carry match id with_match_id no object The name of the id column, effective when extend_sid is enabled, e.g., [\"email\", \"phone\"] id_range no object For tag/svmlight format data, which columns are ids exclusive_data_type no string The format of the special type data columns data_type no string Column data type, default \"float64 with_label no bool Whether to have a label, default False label_name no string The name of the label, default \"y\" label_type no string Label type, default \"int\" <p>In version 1.9.0 and later, if the meta parameter is passed in during the table bind phase, no anonymous information about the feature is generated directly.  The feature anonymization information of the original data will be updated after the data has passed through the reader component once</p> <p>Sample </p> <ul> <li>hdfs</li> </ul> <pre><code>{\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\",\n\"engine\": \"HDFS\",\n\"address\": {\n\"name_node\": \"hdfs://fate-cluster\",\n\"path\": \"/data/breast_hetero_guest.csv\"\n},\n\"id_delimiter\": \",\",\n\"head\": 1,\n\"partitions\": 10\n}\n</code></pre> <ul> <li>mysql</li> </ul> <pre><code>{\n\"engine\": \"MYSQL\",\n\"address\": {\n\"user\": \"fate\",\n\"passwd\": \"fate\",\n\"host\": \"127.0.0.1\",\n\"port\": 3306,\n\"db\": \"experiment\",\n\"name\": \"breast_hetero_guest\"\n},\n\"namespace\": \"experiment\",\n\"name\": \"breast_hetero_guest\",\n\"head\": 1,\n\"id_delimiter\": \",\",\n\"partitions\": 10,\n\"id_column\": \"id\",\n\"feature_column\": \"y,x0,x1,x2,x3,x4,x5,x6,x7,x8,x9\"\n}\n</code></pre> <ul> <li>PATH</li> </ul> <p><pre><code>{\n\"namespace\": \"xxx\",\n\"name\": \"xxx\",\n\"engine\": \"PATH\",\n\"address\": {\n\"path\": \"xxx\"\n}\n}\n</code></pre> return</p> parameter name type description retcode int return code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/table/#disable","title":"disable","text":"<p>Tables can be made unavailable by table disable</p> <pre><code>flow table disable [options]\n</code></pre> <p>Options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns</p> parameter name type description retcode int return code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": {\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/table/#enable","title":"enable","text":"<p>Tables can be made available with table enable</p> <pre><code>flow table enable [options]\n</code></pre> <p>Options </p> parameters short-format long-format required type description table_name <code>-t</code> <code>--table-name</code> yes string fate table name namespace <code>-n</code> <code>--namespace</code> yes string fate table namespace <p>returns</p> parameter name type description retcode int return code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": [{\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n}],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/table/#disable-delete","title":"disable-delete","text":"<p>Tables that are currently unavailable can be deleted with disable-delete</p> <pre><code>flow table disable-delete </code></pre> <p>return</p> parameter name type description retcode int return-code retmsg string return information data object return data <p>Sample</p> <pre><code>{\n\"data\": [\n{\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n},\n{\n\"namespace\": \"xxx\",\n\"table_name\": \"xxx\"\n}\n],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/tag/","title":"Tag","text":""},{"location":"cli/tag/#tag","title":"Tag","text":""},{"location":"cli/tag/#create","title":"create","text":"<p>Creates a label.</p> <p>Options</p> number parameters short-format long-format required parameters parameter description 1 tag_name <code>-t</code> <code>-tag-name</code> yes tag_name 2 tag_parameter_introduction <code>-d</code> <code>--tag-desc</code> no tag_introduction <p>Example</p> <pre><code>flow tag create -t tag1 -d \"This is the parameter description of tag1.\"\nflow tag create -t tag2\n</code></pre>"},{"location":"cli/tag/#update","title":"update","text":"<p>Update the tag information.</p> <p>Options</p> number parameters short format long format required parameters parameter description 1 tag_name <code>-t</code> <code>--tag-name</code> yes tag_name 2 new_tag_name <code>--new-tag-name</code> no new-tag-name 3 new_tag_desc <code>--new-tag-desc</code> no new tag introduction <p>Example</p> <pre><code>flow tag update -t tag1 --new-tag-name tag2\nflow tag update -t tag1 --new-tag-desc \"This is the introduction of the new parameter.\"\n</code></pre>"},{"location":"cli/tag/#list","title":"list","text":"<p>Show the list of tags.</p> <p>options</p> number parameters short-format long-format required-parameters parameter-introduction 1 limit <code>-l</code> <code>-limit</code> no Returns a limit on the number of results (default: 10) <p>Example</p> <pre><code>flow tag list\nflow tag list -l 3\n</code></pre>"},{"location":"cli/tag/#query","title":"query","text":"<p>Retrieve tags.</p> <p>Options</p> number parameters short-format long-format required parameters parameter description 1 tag_name <code>-t</code> <code>-tag-name</code> yes tag_name 2 with_model <code>-with-model</code> no If specified, information about models with this tag will be displayed <p>Example</p> <pre><code>flow tag query -t $TAG_NAME\nflow tag query -t $TAG_NAME --with-model\n</code></pre>"},{"location":"cli/tag/#delete","title":"delete","text":"<p>Delete the tag.</p> <p>Options</p> number parameters short-format long-format required-parameters parameters introduction 1 tag_name <code>-t</code> <code>---tag-name</code> yes tag_name <p>Example</p> <pre><code>flow tag delete -t tag1\n</code></pre>"},{"location":"cli/task/","title":"Task","text":""},{"location":"cli/task/#task","title":"Task","text":""},{"location":"cli/task/#query","title":"query","text":"<p>Retrieve Task information</p> <p>Options</p> number parameters short format long format required parameters parameter description 1 job_id <code>-j</code> <code>--job_id</code> no Job ID 2 role <code>-r</code> <code>--role</code> no role 3 party_id <code>-p</code> <code>--party_id</code> no Party ID 4 component_name <code>-cpn</code> <code>--component_name</code> no component_name 5 status <code>-s</code> <code>--status</code> No Task status <p>Example</p> <pre><code>flow task query -j $JOB_ID -p 9999 -r guest\nflow task query -cpn hetero_feature_binning_0 -s complete\n</code></pre>"},{"location":"cli/task/#list","title":"list","text":"<p>Show the list of Tasks. Options</p> number parameters short format long format required parameters parameter description 1 limit <code>-l</code> <code>-limit</code> no Returns a limit on the number of results (default: 10) <p>Example</p> <pre><code>flow task list\nflow task list -l 25\n</code></pre>"},{"location":"cli/tracking/","title":"Tracking","text":""},{"location":"cli/tracking/#tracking","title":"Tracking","text":""},{"location":"cli/tracking/#metrics","title":"metrics","text":"<p>Get a list of all metrics names generated by a component task</p> <pre><code>flow tracking metrics [options]\n</code></pre> <p>Options</p> parameter name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data <p>Example</p> <pre><code>flow tracking metrics -j 202111081618357358520 -r guest -p 9999 -cpn evaluation_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"train\": [\n\"hetero_lr_0\",\n\"hetero_lr_0_ks_fpr\",\n\"hetero_lr_0_ks_tpr\",\n\"hetero_lr_0_lift\",\n\"hetero_lr_0_gain\",\n\"hetero_lr_0_accuracy\",\n\"hetero_lr_0_precision\",\n\"hetero_lr_0_recall\",\n\"hetero_lr_0_roc\",\n\"hetero_lr_0_confusion_mat\",\n\"hetero_lr_0_f1_score\",\n\"hetero_lr_0_quantile_pr\"\n]\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/tracking/#metric-all","title":"metric-all","text":"<p>Get all the output metrics for a component task</p> <pre><code>flow tracking metric-all [options]\n</code></pre> <p>Options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking metric-all -j 202111081618357358520 -r guest -p 9999 -cpn evaluation_0\n</code></pre> <p>Output (limited space, only some of the metric data is shown and some values are omitted in the middle of the array type data):</p> <pre><code>{\n\"data\": {\n\"train\": {\n\"hetero_lr_0\": {\n\"data\": [\n[\n\"auc\",\n0.293893\n],\n[\n\"ks\",\n0.0\n]\n],\n\"meta\": {\n\"metric_type\": \"EVALUATION_SUMMARY\",\n\"name\": \"hetero_lr_0\"\n}\n},\n\"hetero_lr_0_accuracy\": {\n\"data\": [\n[\n0.0,\n0.372583\n],\n[\n0.99,\n0.616872\n]\n],\n\"meta\": {\n\"curve_name\": \"hetero_lr_0\",\n\"metric_type\": \"ACCURACY_EVALUATION\",\n\"name\": \"hetero_lr_0_accuracy\",\n\"thresholds\": [\n0.999471,\n0.002577\n]\n}\n},\n\"hetero_lr_0_confusion_mat\": {\n\"data\": [],\n\"meta\": {\n\"fn\": [\n357,\n0\n],\n\"fp\": [\n0,\n212\n],\n\"metric_type\": \"CONFUSION_MAT\",\n\"name\": \"hetero_lr_0_confusion_mat\",\n\"thresholds\": [\n0.999471,\n0.0\n],\n\"tn\": [\n212,\n0\n],\n\"tp\": [\n0,\n357\n]\n}\n}\n}\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/tracking/#parameters","title":"parameters","text":"<p>After the job is submitted, the system resolves the actual component task parameters based on the component_parameters in the job conf combined with the system default component parameters</p> <pre><code>flow tracking parameters [options]\n</code></pre> <p>Options</p> parameter_name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking parameters -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"ComponentParam\": {\n\"_feeded_deprecated_params\": [],\n\"_is_raw_conf\": false,\n\"_name\": \"HeteroLR#hetero_lr_0\",\n\"_user_feeded_params\": [\n\"batch_size\",\n\"penalty\",\n\"max_iter\",\n\"learning_rate\",\n\"init_param\",\n\"optimizer\",\n\"init_param.init_method\",\n\"alpha\"\n],\n\"alpha\": 0.01,\n\"batch_size\": 320,\n\"callback_param\": {\n\"callbacks\": [],\n\"early_stopping_rounds\": null,\n\"metrics\": [],\n\"save_freq\": 1,\n\"use_first_metric_only\": false,\n\"validation_freqs\": null\n},\n\"cv_param\": {\n\"history_value_type\": \"score\",\n\"mode\": \"hetero\",\n\"n_splits\": 5,\n\"need_cv\": false,\n\"output_fold_history\": true,\n\"random_seed\": 1,\n\"role\": \"guest\",\n\"shuffle\": true\n},\n\"decay\": 1,\n\"decay_sqrt\": true,\n\"early_stop\": \"diff\",\n\"early_stopping_rounds\": null,\n\"encrypt_param\": {\n\"key_length\": 1024,\n\"method\": \"Paillier\"\n},\n\"encrypted_mode_calculator_param\": {\n\"mode\": \"strict\",\n\"re_encrypted_rate\": 1\n},\n\"floating_point_precision\": 23,\n\"init_param\": {\n\"fit_intercept\": true,\n\"init_const\": 1,\n\"init_method\": \"random_uniform\",\n\"random_seed\": null\n},\n\"learning_rate\": 0.15,\n\"max_iter\": 3,\n\"metrics\": [\n\"auc\",\n\"ks\"\n],\n\"multi_class\": \"ovr\",\n\"optimizer\": \"rmsprop\",\n\"penalty\": \"L2\",\n\"predict_param\": {\n\"threshold\": 0.5\n},\n\"sqn_param\": {\n\"memory_M\": 5,\n\"random_seed\": null,\n\"sample_size\": 5000,\n\"update_interval_L\": 3\n},\n\"stepwise_param\": {\n\"direction\": \"both\",\n\"max_step\": 10,\n\"mode\": \"hetero\",\n\"need_stepwise\": false,\n\"nvmax\": null,\n\"nvmin\": 2,\n\"role\": \"guest\",\n\"score_name\": \"AIC\"\n},\n\"tol\": 0.0001,\n\"use_first_metric_only\": false,\n\"validation_freqs\": null\n},\n\"module\": \"HeteroLR\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/tracking/#output-data","title":"output-data","text":"<p>Get the component output</p> <pre><code>flow tracking output-data [options]\n</code></pre> <p>options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl -o, --output-path yes string Path to output data <p>Returns</p> parameter name type description retcode int Return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking output-data -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0 -o . /\n</code></pre> <p>Output :</p> <pre><code>{\n\"retcode\": 0,\n\"directory\": \"$FATE_PROJECT_BASE/job_202111081618357358520_hetero_lr_0_guest_9999_output_data\",\n\"retmsg\": \"Download successfully, please check $FATE_PROJECT_BASE/job_202111081618357358520_hetero_lr_0_guest_9999_output_data directory \"\n}\n</code></pre>"},{"location":"cli/tracking/#output-data-table","title":"output-data-table","text":"<p>Get the output data table name of the component</p> <pre><code>flow tracking output-data-table [options]\n</code></pre> <p>options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking output-data-table -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>output:</p> <pre><code>{\n\"data\": [\n{\n\"data_name\": \"train\",\n\"table_name\": \"9688fa00406c11ecbd0bacde48001122\",\n\"table_namespace\": \"output_data_202111081618357358520_hetero_lr_0_0\"\n}\n],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/tracking/#output-model","title":"output-model","text":"<p>Get the output model of a component task</p> <pre><code>flow tracking output-model [options]\n</code></pre> <p>options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter-name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking output-model -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"bestIteration\": -1,\n\"encryptedWeight\": {},\n\"header\": [\n\"x0\",\n\"x1\",\n\"x2\",\n\"x3\",\n\"x4\",\n\"x5\",\n\"x6\",\n\"x7\",\n\"x8\",\n\"x9\"\n],\n\"intercept\": 0.24451607054764884,\n\"isConverged\": false,\n\"iters\": 3,\n\"lossHistory\": [],\n\"needOneVsRest\": false,\n\"weight\": {\n\"x0\": 0.04639947589856569,\n\"x1\": 0.19899685467216902,\n\"x2\": -0.18133550931649306,\n\"x3\": 0.44928868756862206,\n\"x4\": 0.05285905125502288,\n\"x5\": 0.319187932844076,\n\"x6\": 0.42578983446194013,\n\"x7\": -0.025765956309895477,\n\"x8\": -0.3699194462271593,\n\"x9\": -0.1212094750908295\n}\n},\n\"meta\": {\n\"meta_data\": {\n\"alpha\": 0.01,\n\"batchSize\": \"320\",\n\"earlyStop\": \"diff\",\n\"fitIntercept\": true,\n\"learningRate\": 0.15,\n\"maxIter\": \"3\",\n\"needOneVsRest\": false,\n\"optimizer\": \"rmsprop\",\n\"partyWeight\": 0.0,\n\"penalty\": \"L2\",\n\"reEncryptBatches\": \"0\",\n\"revealStrategy\": \"\",\n\"tol\": 0.0001\n},\n\"module_name\": \"HeteroLR\"\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/tracking/#get-summary","title":"get-summary","text":"<p>Each component allows to set some summary information for easy observation and analysis</p> <pre><code>flow tracking get-summary [options]\n</code></pre> <p>Options</p> parameter-name required type description -j, --job-id yes string job-id -r, --role yes string participant-role -p, --partyid yes string participant-id -cpn, --component-name yes string Component name, consistent with that in job dsl <p>Returns</p> parameter name type description retcode int return code retmsg string return message data dict return data jobId string job id <p>Example</p> <pre><code>flow tracking get-summary -j 202111081618357358520 -r guest -p 9999 -cpn hetero_lr_0\n</code></pre> <p>Output:</p> <pre><code>{\n\"data\": {\n\"best_iteration\": -1,\n\"coef\": {\n\"x0\": 0.04639947589856569,\n\"x1\": 0.19899685467216902,\n\"x2\": -0.18133550931649306,\n\"x3\": 0.44928868756862206,\n\"x4\": 0.05285905125502288,\n\"x5\": 0.319187932844076,\n\"x6\": 0.42578983446194013,\n\"x7\": -0.025765956309895477,\n\"x8\": -0.3699194462271593,\n\"x9\": -0.1212094750908295\n},\n\"intercept\": 0.24451607054764884,\n\"is_converged\": false,\n\"one_vs_rest\": false\n},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/tracking/#tracking-source","title":"tracking-source","text":"<p>For querying the parent and source tables of a table</p> <pre><code>flow table tracking-source [options]\n</code></pre> <p>Options</p> parameter-name required type description name yes string fate table name namespace yes string fate table namespace <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": [{\"parent_table_name\": \"61210fa23c8d11ec849a5254004fdc71\", \"parent_table_namespace\": \"output_data_202111031759294631020_hetero _lr_0_0\", \"source_table_name\": \"breast_hetero_guest\", \"source_table_namespace\": \"experiment\"}],\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"cli/tracking/#tracking-job","title":"tracking-job","text":"<p>For querying the usage of a particular table</p> <pre><code>flow table tracking-job [options]\n</code></pre> <p>Options</p> parameter name required type description name yes string fate table name namespace yes string fate table namespace <p>Returns</p> parameter name type description retcode int return code retmsg string return message data object return data <p>Example</p> <pre><code>{\n\"data\": {\"count\":2, \"jobs\":[\"202111052115375327830\", \"202111031816501123160\"]},\n\"retcode\": 0,\n\"retmsg\": \"success\"\n}\n</code></pre>"},{"location":"mkdocs/","title":"Build","text":""},{"location":"mkdocs/#use-docker","title":"use docker","text":"<p>At repo root, execute</p> <pre><code>docker run --rm -it -p 8000:8000 -v ${PWD}:/docs sagewei0/mkdocs  </code></pre> <p>to serve docs in http://localhost:8000</p> <p>or</p> <pre><code>docker run --rm -it -p 8000:8000 -v ${PWD}:/docs sagewei0/mkdocs build\n</code></pre> <p>to build docs to <code>site</code> folder.</p>"},{"location":"mkdocs/#manually","title":"manually","text":"<p><code>mkdocs-material</code> and servel plugins are needed to build this docs</p> <p>Fisrt, create an python virtual environment</p> <p><pre><code>python3 -m venv \"fatedocs\"\nsource fatedocs/bin/activate\npip install -U pip\n</code></pre> And then install requirements</p> <pre><code>pip install -r doc/mkdocs/requirements.txt\n</code></pre> <p>Now, use</p> <pre><code>mkdocs serve\n</code></pre> <p>at repo root to serve docs or</p> <p>use </p> <pre><code>mkdocs build\n</code></pre> <p>at repo root to build docs to folder <code>site</code></p>"},{"location":"mkdocs/#develop-guide","title":"Develop guide","text":"<p>We use mkdocs-material to build our docs.  Servel markdown extensions are really useful to write pretty documents such as  admonitions and  content-tabs.</p> <p>Servel plugins are introdused to makes mkdocs-material much powerful:</p> <ul> <li> <p>mkdocstrings      automatic documentation from sources code. We mostly use this to automatic generate     <code>params api</code> for <code>federatedml</code>.</p> </li> <li> <p>awesome-pages     for powerful nav rule</p> </li> <li> <p>i18n     for multi-languege support</p> </li> <li> <p>mkdocs-jupyter     for jupyter format support</p> </li> <li> <p>mkdocs-simple-hooks     for simple plugin-in</p> </li> </ul>"},{"location":"mkdocs/docker/","title":"Image for build FATE's documents","text":"<p>This image is modified from mkdocs-meterial with some plugins embeded.</p> <p>Usage</p> <p>Mount the folder where your mkdocs.yml resides as a volume into /docs:</p> <ul> <li>Start development server on http://localhost:8000</li> </ul> <pre><code>docker run --rm -it -p 8000:8000 -v ${PWD}:/docs sagewei0/mkdocs\n</code></pre> <ul> <li>Build documentation</li> </ul> <pre><code>docker run --rm -it -v ${PWD}:/docs sagewei/mkdocs build\n</code></pre> <ul> <li>Deploy documentation to GitHub Pages</li> </ul> <pre><code>docker run --rm -it -v ~/.ssh:/root/.ssh -v ${PWD}:/docs sagewei0/mkdocs gh-deploy \n</code></pre>"},{"location":"mkdocs/theme/","title":"Index","text":"<p>Mostly copied from https://github.com/cirruslabs/cirrus-ci-docs/tree/master/theme</p>"},{"location":"swagger/","title":"API","text":""},{"location":"swagger/#swagger-api","title":"Swagger API","text":""},{"location":"template/cli_desc/","title":"Cli desc","text":"<p>\u8bf7\u6c42CLI </p> <pre><code>flow\n</code></pre> <p>\u53c2\u6570 </p> \u53c2\u6570\u540d \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e -j, --job-id \u662f string \u4f5c\u4e1aid -r, --role \u662f string \u53c2\u4e0e\u89d2\u8272 -p, --partyid \u662f string \u53c2\u4e0e\u65b9id -cpn, --component-name \u662f string \u7ec4\u4ef6\u540d\uff0c\u4e0ejob dsl\u4e2d\u7684\u4fdd\u6301\u4e00\u81f4 -o, --output-path \u662f string \u8f93\u51fa\u6570\u636e\u7684\u5b58\u653e\u8def\u5f84 <p>\u8fd4\u56de\u53c2\u6570 </p> \u53c2\u6570\u540d \u7c7b\u578b \u8bf4\u660e retcode int \u8fd4\u56de\u7801 retmsg string \u8fd4\u56de\u4fe1\u606f data dict \u8fd4\u56de\u6570\u636e jobId string \u4f5c\u4e1aid <p>\u6837\u4f8b </p> <pre><code>flow\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\n</code></pre>"}]}